var be=Object.defineProperty;var se=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var re=(t,e,r)=>e in t?be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oe=(t,e)=>{for(var r in e||(e={}))_e.call(e,r)&&re(t,r,e[r]);if(se)for(var r of se(e))fe.call(e,r)&&re(t,r,e[r]);return t};import{o as i,c as l,n as y,t as _,r as p,a as o,b as h,w as f,d as S,F as v,e as C,f as E,g as x,C as V,D as Z,h as N,i as M,j as m,k as j,T as W,l as T,v as w,m as G,p as H,q as K,s as ye,U as ve,u as Ce,x as de,y as Te,z as Se,A as Ee,B as Be,E as Me,G as we,H as Oe}from"./vendor.caf0b19e.js";const xe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&d(n)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}};xe();const B={delay:Ae,getRndIntInc:$e,makeId:Ie,getRandomColor:Le,applyDrag:De,saveToStorage:Ue,loadFromStorage:Ne,lightenDarkenColor:Ge,debounce:Je};function Ae(t=1500){return new Promise(e=>{setTimeout(e,t)})}function $e(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function De(t,e){console.log("arr>>",t,"drag",e);const{removedIndex:r,addedIndex:d,payload:a}=e;if(r===null&&d===null)return t;const s=[...t];let n=a;return r!==null&&(n=s.splice(r,1)[0]),d!==null&&s.splice(d,0,n),console.log(s),s}function Ie(t=8){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;d<t;d++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}function Le(){for(var t="0123456789ABCDEF",e="#",r=0;r<6;r++)e+=t[Math.floor(Math.random()*16)];return e}function Ue(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function Ne(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function Ge(t,e){if(t==="#0079bf")return"#055a8c";if(t==="#00c2e0")return"#0098b7";var r=!1;t[0]=="#"&&(t=t.slice(1),r=!0);var d=parseInt(t,16),a=(d>>16)+e;a>255?a=255:a<0&&(a=0);var s=(d>>8&255)+e;s>255?s=255:s<0&&(s=0);var n=(d&255)+e;return n>255?n=255:n<0&&(n=0),(r?"#":"")+(n|s<<8|a<<16).toString(16)}function Je(t,e){let r;return(...d)=>{clearTimeout(r),r=setTimeout(()=>{t(...d)},e)}}var k=(t,e)=>{const r=t.__vccOpts||t;for(const[d,a]of e)r[d]=a;return r};const ze={name:"user-avatar",props:{user:Object,diameter:{type:Number,default:28}},methods:{getNameAbbreviation(t){return console.error("fullName",t),t?t.split(" ").map(d=>d.charAt(0).toUpperCase()).join(""):"\u2753"}},computed:{userColor(){return`background-color: ${this.user.color||B.getRandomColor()}`},getSizeInCss(){return{width:this.diameter+"px",height:this.diameter+"px","line-height":this.diameter+"px"}}}},je=["src"];function Fe(t,e,r,d,a,s){return i(),l("div",{class:"user-avatar",style:y(s.getSizeInCss)},[r.user.imgUrl?(i(),l("img",{key:0,src:r.user.imgUrl},null,8,je)):(i(),l("div",{key:1,class:"flex center",style:y(s.userColor)},_(s.getNameAbbreviation(r.user.fullname)),5))],4)}var J=k(ze,[["render",Fe]]),qe="/assets/homeLogo.10aa9f3f.png",Pe="/assets/Asset3.171b9aa8.png";const Re={name:"home",components:{},created(){},methods:{async goToBoardsPage(){this.$router.push("/board/624afa5e47cdb81018c1bc99")}}},He={class:"homepage"},Ve={class:"homepage-nav flex"},Ze=o("img",{src:qe,alt:""},null,-1),We=S("Log in"),Ke=S("Sign up"),Ye={class:"flex center"},Qe=o("img",{class:"hero",src:Pe,alt:""},null,-1),Xe={class:"text"},et=o("h1",null,"Mello helps teams move work forward.",-1),tt=o("p",null,"As your software team grows, Mello makes it easy to manage workflows across multiple teams and projects. Simple, intuitive, fast: Mello is where software teams do their best work. Free to get started, with easy user experience Mello.",-1),st=S("Start as a guest");function rt(t,e,r,d,a,s){const n=p("router-link");return i(),l("section",He,[o("nav",Ve,[h(n,{title:"Boards",to:"/board",class:"logo"},{default:f(()=>[Ze]),_:1}),o("div",null,[h(n,{title:"Login",to:"/login",class:"login"},{default:f(()=>[We]),_:1}),h(n,{title:"Signup",to:"/signup",class:"signup"},{default:f(()=>[Ke]),_:1})])]),o("main",Ye,[Qe,o("div",Xe,[et,tt,h(n,{to:"/board/624b2ee347cdb81018c1bc9a",class:"btn-start"},{default:f(()=>[st]),_:1})])])])}var ot=k(Re,[["render",rt]]);const at={data(){return{}},async mounted(){await this.$store.dispatch({type:"loadBoards"}),console.log(this.boards)},computed:{boards(){return this.$store.getters.boards},starBoards(){return this.$store.getters.starBoards}},methods:{checkStar(t){if(t.star)return"star-on"},async starBoard(t){const e=this.$store.getters.boards,r=e.findIndex(d=>d._id===t);e[r].star?e[r].star=!1:e[r].star=!0,await this.$store.dispatch({type:"saveCurrBoard",boardToSave:e[r]}),await this.$store.dispatch({type:"loadBoards"})}}},nt={class:"board-list flex center column align-center"},it=o("h3",null,"STARRED BOARDS",-1),lt={class:"board-list-container flex wrap center"},dt=["onClick"],ct={class:"board-title"},ut=["onClick"],ht=["src"],mt=o("h3",{class:"boards"},"YOUR BOARDS",-1),pt={class:"board-list-container flex wrap center"},gt=["onClick"],kt={class:"board-title"},bt=["onClick"],_t=["src"];function ft(t,e,r,d,a,s){return i(),l("section",nt,[o("section",null,[it,o("div",lt,[(i(!0),l(v,null,C(s.starBoards,n=>(i(),l("label",{onClick:c=>t.$router.push(`/board/${n._id}`),key:n._id},[o("span",ct,_(n.title),1),o("span",{onClick:E(c=>s.starBoard(n._id),["stop"]),class:x([s.checkStar(n),"board-star"])},null,10,ut),n.style.bg.split("")[0]!=="#"?(i(),l("img",{key:0,src:n.style.bg,alt:""},null,8,ht)):(i(),l("div",{key:1,style:y({"background-color":`${n.style.bg}`})},null,4))],8,dt))),128))])]),o("section",null,[mt,o("div",pt,[(i(!0),l(v,null,C(s.boards,n=>(i(),l("label",{onClick:c=>t.$router.push(`/board/${n._id}`),key:n._id},[o("span",kt,_(n.title),1),o("span",{onClick:E(c=>s.starBoard(n._id),["stop"]),class:x([s.checkStar(n),"board-star"])},null,10,bt),n.style.bg.split("")[0]!=="#"?(i(),l("img",{key:0,src:n.style.bg,alt:""},null,8,_t)):(i(),l("div",{key:1,style:y({"background-color":`${n.style.bg}`})},null,4))],8,gt))),128))])])])}var yt=k(at,[["render",ft]]);const vt={name:"task-preview",props:{task:Object,labelsOpen:Boolean},components:{userAvatar:J,Container:V,Draggable:Z},data(){return{hover:!1,open:!0,dateBg:"",dateClass:"clock"}},mounted(){this.loadDate()},methods:{async updateTask(){const t=JSON.parse(JSON.stringify(this.task));this.$emit("saveTask",t),this.$emit("socketUpdateBoard")},removeTask(){this.$emit("removeTask",this.task),this.$emit("socketUpdateBoard")},toggleDateBg(t){this.dateBg=B.lightenDarkenColor(this.dateBg,t)},getStyle(t){const r=this.$store.getters.currBoardLabels.find(d=>d.id===t);if(!!r)return this.hover?`background-color: ${B.lightenDarkenColor(r==null?void 0:r.color,-30)}`:`background-color: ${r==null?void 0:r.color}`},getLabelText(t){const r=this.$store.getters.currBoardLabels.find(d=>d.id===t);if(!!r)return`${r.title}`},toggleLabels(){this.$emit("openLabels"),this.open=!this.open},toggleDate(){if(this.task.status==="over-due"||this.task.status==="in-progress"||this.task.status==="due-soon"){this.$emit("done"),this.updateTask();return}if(this.task.dueDate-Date.now()<0){this.$emit("over-due"),this.updateTask();return}if(this.task.dueDate-Date.now()>86400*1e3){this.$emit("in-progress"),this.updateTask();return}if(this.task.dueDate-Date.now()<86400*1e3){this.$emit("due-soon"),this.updateTask();return}},loadDate(){if(this.task.status!=="done"){if(this.task.dueDate-Date.now()<0){this.task.status="over-due";return}if(this.task.dueDate-Date.now()>86400*1e3){this.task.status="in-progress";return}if(this.task.dueDate-Date.now()<86400*1e3){this.task.status="due-soon";return}}},socketUpdateBoard(){this.$emit("socketUpdateBoard")}},computed:{checkStyle(){if(this.task.style&&this.task.style.size==="big")return"border-bottom: none"},getCoverClr(){return`background-color: ${this.task.style.bg} !important`},checkBadges(){return!(!this.task.members&&!this.task.startDate&&!this.task.dueDate)},getClass(){return this.labelsOpen?"open":"close"},getDateClass(){return this.task.status},startDate(){return N(this.task.startDate,"MMM d")},dueDate(){return N(this.task.dueDate,"MMM d")},getWidth(){var t=0;if((this.task.startDate||this.task.dueDate)&&t++,this.task.comments&&t++,t>2||t===0)return"width: 100%"},getDateBg(){this.task.startDate&&this.task.dueDate}},watch:{task(t,e){this.loadDate()}}},Ct={class:"task-preview"},Tt={key:0,class:"small-cover"},St=["src"],Et={key:1,class:"big-cover"},Bt={class:"img-txt"},Mt=o("div",null,null,-1),wt={key:2},Ot={key:0,class:"task-labels"},xt={key:1,class:"task-preview-badges flex wrap"},At={key:0,class:"task-preview-date"},$t={key:0,class:"start-only"},Dt=o("span",null,null,-1),It=o("span",null,"-",-1);function Lt(t,e,r,d,a,s){const n=p("user-avatar"),c=p("Draggable");return i(),M(c,null,{default:f(()=>[o("section",Ct,[o("button",{onClick:e[0]||(e[0]=E((...u)=>s.removeTask&&s.removeTask(...u),["stop"])),title:"Remove card",class:"btn-remove-task"}),r.task.style&&r.task.style.size==="small"?(i(),l("section",Tt,[r.task.style&&r.task.style.bg.split("")[0]!=="#"?(i(),l("img",{key:0,src:r.task.style.bg,alt:""},null,8,St)):(i(),l("div",{key:1,style:y(s.getCoverClr),class:"cover-clr"},null,4))])):m("",!0),r.task.style&&r.task.style.size==="big"?(i(),l("section",Et,[r.task.style&&r.task.style.bg.split("")[0]!=="#"?(i(),l("div",{key:0,class:"big-cover-img",style:y({"background-image":`url(${r.task.style.bg})`})},[o("div",Bt,[Mt,o("div",null,[o("span",null,_(r.task.title),1)])])],4)):m("",!0),r.task.style&&r.task.style.bg.split("")[0]==="#"?(i(),l("div",{key:1,class:"big-cover-clr",style:y({"background-color":`${r.task.style.bg}`})},[o("div",null,[o("span",null,_(r.task.title),1)])],4)):m("",!0)])):m("",!0),!r.task.style||r.task.style.size==="small"?(i(),l("section",wt,[r.task.labelIds?(i(),l("section",Ot,[(i(!0),l(v,null,C(r.task.labelIds,u=>(i(),l("span",{onClick:e[1]||(e[1]=E((...b)=>s.toggleLabels&&s.toggleLabels(...b),["stop"])),onMouseover:e[2]||(e[2]=b=>a.hover=!0),onMouseleave:e[3]||(e[3]=b=>a.hover=!1),key:u,class:x(["task-preview-label",s.getClass]),style:y(s.getStyle(u))},[o("span",null,_(s.getLabelText(u)),1)],38))),128))])):m("",!0),o("p",null,_(r.task.title),1),s.checkBadges?(i(),l("section",xt,[r.task.startDate||r.task.dueDate?(i(),l("section",At,[r.task.startDate&&!r.task.dueDate?(i(),l("div",$t,[Dt,o("span",null,"Starts: "+_(s.startDate),1)])):m("",!0),!r.task.startDate&&r.task.dueDate?(i(),l("div",{key:1,class:x([s.getDateClass,"due-only"]),onClick:e[4]||(e[4]=E((...u)=>s.toggleDate&&s.toggleDate(...u),["stop"])),onMouseover:e[5]||(e[5]=u=>{s.toggleDateBg(-30),a.dateClass="unCheck"}),onMouseleave:e[6]||(e[6]=u=>{s.toggleDateBg(30),a.dateClass="clock"}),style:y(s.getDateBg)},[o("span",{class:x(a.dateClass)},null,2),o("span",null,_(s.dueDate),1)],38)):m("",!0),r.task.startDate&&r.task.dueDate?(i(),l("div",{key:2,class:x([s.getDateClass,"due-only"]),onClick:e[7]||(e[7]=E((...u)=>s.toggleDate&&s.toggleDate(...u),["stop"])),onMouseover:e[8]||(e[8]=u=>{s.toggleDateBg(-30),a.dateClass="unCheck"}),onMouseleave:e[9]||(e[9]=u=>{s.toggleDateBg(30),a.dateClass="clock"}),style:y(s.getDateBg)},[o("span",{class:x(a.dateClass)},null,2),o("span",null,_(s.startDate),1),It,o("span",null,_(s.dueDate),1)],38)):m("",!0)])):m("",!0),r.task.members?(i(),l("section",{key:1,style:y(s.getWidth),class:"task-members flex"},[(i(!0),l(v,null,C(r.task.members,u=>(i(),M(n,{key:u._id,user:u},null,8,["user"]))),128))],4)):m("",!0)])):m("",!0)])):m("",!0)])]),_:1})}var ce=k(vt,[["render",Lt]]);const Ut={props:{menuOpen:Boolean},data(){return{}},methods:{}},Nt={class:"custom-menu"},Gt={key:0,class:"custom-menu-container"};function Jt(t,e,r,d,a,s){return i(),l("section",Nt,[h(W,{"enter-active-class":"animate__animated animate__fadeIn animate__faster","leave-active-class":"animate__animated animate__fadeOut animate__faster"},{default:f(()=>[r.menuOpen?(i(),l("div",Gt,[j(t.$slots,"default")])):m("",!0)]),_:3})])}var Y=k(Ut,[["render",Jt]]);const zt={props:{menuOpen:Boolean},data(){return{}},components:{customMenu:Y},methods:{addTask(){this.$emit("newTask")},copyGroup(){this.$emit("copyGroup")},removeGroup(){this.$emit("removeGroup")},closeMenu(){this.$emit("closeMenu")}}},jt={class:"group-menu"},Ft=o("p",null,"List actions",-1),qt=o("hr",null,null,-1),Pt=o("hr",null,null,-1);function Rt(t,e,r,d,a,s){const n=p("custom-menu");return i(),l("section",jt,[h(n,{menuOpen:r.menuOpen},{default:f(()=>[Ft,o("button",{onClick:e[0]||(e[0]=(...c)=>s.closeMenu&&s.closeMenu(...c)),class:"close",title:"Close"}),qt,o("p",{onClick:e[1]||(e[1]=(...c)=>s.addTask&&s.addTask(...c))},"Add card..."),o("p",{onClick:e[2]||(e[2]=(...c)=>s.copyGroup&&s.copyGroup(...c))},"Copy list..."),Pt,o("p",{onClick:e[3]||(e[3]=(...c)=>s.removeGroup&&s.removeGroup(...c))},"Remove this list...")]),_:1},8,["menuOpen"])])}var Ht=k(zt,[["render",Rt]]);const Vt={props:{menuOpen:Boolean,groupTitle:String},data(){return{titleForDisplay:JSON.parse(JSON.stringify(this.groupTitle))}},components:{customMenu:Y},mounted(){},methods:{addTask(){this.$emit("newTask")},saveGroup(){this.$emit("saveGroup",this.titleForDisplay)},closeMenu(){this.$emit("closeMenu")}}},Zt={class:"copy-group-menu"},Wt=o("p",null,"Copy list",-1),Kt=o("hr",null,null,-1),Yt=o("div",null,"Name",-1),Qt=o("button",null,"Create list",-1);function Xt(t,e,r,d,a,s){const n=p("custom-menu");return i(),l("section",Zt,[h(n,{menuOpen:r.menuOpen},{default:f(()=>[Wt,o("button",{onClick:e[0]||(e[0]=(...c)=>s.closeMenu&&s.closeMenu(...c)),class:"close",title:"Close"}),Kt,o("form",{action:"submit",onSubmit:e[2]||(e[2]=E((...c)=>s.saveGroup&&s.saveGroup(...c),["prevent"]))},[Yt,T(o("textarea",{style:{resize:"none"},"onUpdate:modelValue":e[1]||(e[1]=c=>a.titleForDisplay=c)},null,512),[[w,a.titleForDisplay]]),Qt],32)]),_:1},8,["menuOpen"])])}var es=k(Vt,[["render",Xt]]);const ts={name:"task-add",props:{task:Object},data(){return{isSave:!0}},methods:{saveTask(){this.isSave||(this.task.title=""),console.log(this.task),this.$emit("saveTask",this.task)},func(){console.log("hover")}},mounted(){this.$refs.taskTitle.focus()}},ss={class:"task-add"},rs=o("button",{type:"submit"},"Add card",-1);function os(t,e,r,d,a,s){return i(),l("section",ss,[o("form",{action:"submit",onSubmit:e[3]||(e[3]=E((...n)=>s.saveTask&&s.saveTask(...n),["prevent","stop"]))},[T(o("textarea",{ref:"taskTitle",style:{resize:"none",width:"256px",height:"66px"},placeholder:"Enter a title for this card...","onUpdate:modelValue":e[0]||(e[0]=n=>r.task.title=n)},null,512),[[w,r.task.title]]),o("div",null,[rs,o("button",{onMouseover:e[1]||(e[1]=n=>a.isSave=!1),onMouseleave:e[2]||(e[2]=n=>a.isSave=!0),title:"Close"},null,32)])],32)])}var ae=k(ts,[["render",os]]);const as={props:{group:{type:Object,required:!0}},data(){return{taskToEdit:null,menuOpen:!1,subMenuOpen:!1,subTaskToEdit:null}},components:{taskPreview:ce,groupMenu:Ht,taskAdd:ae,copyGroupMenu:es,Container:V,Draggable:Z,TaskAdd:ae},methods:{async delay(){setTimeout(()=>{},3e3)},closeMenu(){this.menuOpen=!1,this.subMenuOpen=!1},toggleMenu(){this.menuOpen=!this.menuOpen,this.subMenuOpen&&(this.subMenuOpen=!this.subMenuOpen,this.menuOpen=!1)},updateGroup(){this.$emit("updateGroup",this.group)},addTask(t){this[t]=U.getEmptyTask(),this.menuOpen=!1},saveTask(t){t.title&&(this.group.tasks.push(t),this.updateGroup()),this.taskToEdit=null,this.subTaskToEdit=null},saveGroup(t){const e=JSON.parse(JSON.stringify(this.group));e.title=t,e.id="",e.tasks.forEach(r=>{r.id=B.makeId()}),this.menuOpen=!1,this.subMenuOpen=!1,this.$emit("saveGroup",e)},getCardPayload(t){return e=>this.board.groups.filter(r=>r.id===t)[0].tasks[e]},onCardDrop(t,e){if(console.log(e),e.removedIndex!==null||e.addedIndex!==null){const r=Object.assign({},this.board),d=r.groups.filter(n=>n.id===t)[0],a=r.groups.indexOf(d),s=Object.assign({},d);e.removedIndex==null&&e.addedIndex>=0,s.tasks=B.applyDrag(s.tasks,e),r.groups.splice(a,1,s),this.$emit("move",r)}}},computed:{}},ns={class:"board-group"},is={class:"group-header"},ls={class:"tasks-container"},ds=o("span",null,null,-1),cs=o("span",null,"Add a card",-1),us=[ds,cs],hs={class:"sub-task-add"};function ms(t,e,r,d,a,s){const n=p("group-menu"),c=p("copy-group-menu"),u=p("task-add");return i(),l("section",ns,[o("div",is,[T(o("input",{type:"text",onMousedown:e[0]||(e[0]=(...b)=>s.delay&&s.delay(...b)),"onUpdate:modelValue":e[1]||(e[1]=b=>r.group.title=b),class:"group-title",onBlur:e[2]||(e[2]=(...b)=>s.updateGroup&&s.updateGroup(...b))},null,544),[[w,r.group.title]]),o("button",{onClick:e[3]||(e[3]=(...b)=>s.toggleMenu&&s.toggleMenu(...b)),class:"btn-group-menu",title:"Menu"}),h(n,{onRemoveGroup:e[4]||(e[4]=b=>t.$emit("removeGroup",r.group)),onCopyGroup:e[5]||(e[5]=b=>{a.menuOpen=!1,a.subMenuOpen=!0}),onCloseMenu:e[6]||(e[6]=b=>a.menuOpen=!1),onNewTask:e[7]||(e[7]=b=>s.addTask("taskToEdit")),menuOpen:a.menuOpen},null,8,["menuOpen"]),h(c,{onSaveGroup:s.saveGroup,onCloseMenu:e[8]||(e[8]=b=>a.subMenuOpen=!1),menuOpen:a.subMenuOpen,groupTitle:r.group.title},null,8,["onSaveGroup","menuOpen","groupTitle"])]),a.taskToEdit?(i(),M(u,{key:0,task:a.taskToEdit,onSaveTask:s.saveTask},null,8,["task","onSaveTask"])):m("",!0),o("div",ls,[j(t.$slots,"default")]),a.subTaskToEdit?m("",!0):(i(),l("div",{key:1,onClick:e[9]||(e[9]=b=>s.addTask("subTaskToEdit")),class:"flex align-center btn-task-add"},us)),o("div",hs,[a.subTaskToEdit?(i(),M(u,{key:0,task:a.subTaskToEdit,onSaveTask:s.saveTask},null,8,["task","onSaveTask"])):m("",!0)])])}var ps=k(as,[["render",ms]]);const gs={props:{isAddingGroup:Boolean},data(){return{groupToAdd:U.getEmptyGroup()}},methods:{addGroup(){this.$emit("addGroup"),this.$nextTick(()=>{this.$refs.title.focus()})},saveGroup(){this.groupToAdd.title=this.groupToAdd.title.trim(),console.log("group>>",this.groupToAdd),this.groupToAdd.title&&(this.$emit("saveGroup",this.groupToAdd),this.groupToAdd=U.getEmptyGroup())},closeGroupAdd(){this.groupToAdd=U.getEmptyGroup(),this.$emit("closeGroupAdd")}}},ks=o("div",{class:"flex align-center"},[o("span"),o("span",null,"Add another list")],-1),bs=[ks],_s={key:1,class:"group-edit"},fs=o("button",null,"Add list",-1);function ys(t,e,r,d,a,s){return i(),l("section",null,[r.isAddingGroup?(i(),l("div",{key:0,onClick:e[0]||(e[0]=(...n)=>s.addGroup&&s.addGroup(...n)),class:"group-add"},bs)):m("",!0),r.isAddingGroup?m("",!0):(i(),l("div",_s,[o("form",{type:"submit",onSubmit:e[3]||(e[3]=E((...n)=>s.saveGroup&&s.saveGroup(...n),["prevent"]))},[T(o("input",{type:"text",ref:"title",placeholder:"Enter list title...","onUpdate:modelValue":e[1]||(e[1]=n=>a.groupToAdd.title=n)},null,512),[[w,a.groupToAdd.title]]),o("div",null,[fs,o("button",{onClick:e[2]||(e[2]=(...n)=>s.closeGroupAdd&&s.closeGroupAdd(...n))})])],32)]))])}var vs=k(gs,[["render",ys]]);const Cs={props:{menuOpen:Boolean},data(){return{}},computed:{background(){return this.board.style["background-color"],{"background-color":this.board.style["background-color"]}},methods:{close(){this.$emit("close")},changeBackground(t){const e={"background-color":t};this.$emit("setBackground",e)}}}},Ts={class:"custom-menu"},Ss={key:0,class:"custom-menu-container"},Es=o("span",{class:"btn-boards-drop"},"Change background",-1),Bs=["onClick"];function Ms(t,e,r,d,a,s){return i(),l("div",Ts,[o("div",null,[h(W,{"enter-active-class":"animate__animated animate__slideInRight","leave-active-class":"animate__animated animate__slideOutLeft"},{default:f(()=>[r.menuOpen?(i(),l("div",Ss,[Es,(i(!0),l(v,null,C(t.colors,n=>(i(),l("li",{key:n,style:y({backgroundColor:n}),class:"color",onClick:c=>t.changeBackground(n,"")},null,12,Bs))),128))])):m("",!0)]),_:1})])])}var ws=k(Cs,[["render",Ms]]),Os="/assets/boardsIcon.95d49565.png",ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAAsCAYAAADl06/eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAkMSURBVGhD7ZrrUxNXGMYJYCSEqNzFGS9pqRBkbEWjjuAHp9OKtNCWWuw4Vf+D3r+0nY7+GzqOLdXxAvZD+dAZLy1EkGpHLVpr1QoiVCCQhADlKiF9nvBumoRLAi4QKM/Mzia7Z8++57fvvuc952zEomZHGtmHJLfbrTly5Ij3Gvx2azQat/xdsGK7uVfaPp12hwy6rKxMazabs+Lj47fFxcWtxM0j+/r6HE6n82Zzc/PtvLy8Him6oHT48OHIAwcOvLh8+fLtBoNhzZIlS5YODg7+A/1us9l+zcrKsktRdQTQyx0Ox9cDAwO3h4eHrS6Xq2NoaOhJd3f3dwBdUFNTY5CiC0aE3NDQkGG32z9Hu39Bu1vZ7mfPnrX09PT88PTp01wpqp4qKiqS+vv7z+BmPfBmj0Yg3LSNsHHT1xcSbDRP8+jRo5cA+TNAvurbbgrtfoS3eZ8UD6pI2QdVdHS0RqvVxiI2ea/Bb01UVFSKTqd7Da/V+0ajcfuNGzdi5fS8FT0ZkF9csWJFgV6vfwdtz0Y74+S0R5GRkVocXyp/gypk0KjYhVDBODwyemRUAjsVsAsA+0BaWlpuZWWln1HzSQiRUYcOHXopISHhLfRFJYD5Mtq3TE57hRDSBy8fkr9BFTLo9vb2wd7e3pt8ZRgx5LBHPp79Kozbt379+h3Xrl0bY1y4i5BzcnJeWLZsGT25GJA3BnoyBcDtCCd1XV1df8uhoAoZdH19fT9i8Y/obcsA+w/A9nuaAjstNjaWnv3B2rVrd84n2HgLowkZ2UURnQXZxSsTQLYi6/gJ/VUZHO9PORxUUbIPKovF4kbM6kQ6YyNUPO1khJME8pUiHthQHAxMxTldTEyMo7Cw0FpaWhryKzYXIuTVq1cb0b434CR7CRn2+/U17ACZcQByNQCXofOv3rhxo01OB1XIoCmB7cjOzrbBkEgYtBJgV2Dzg41TcdhSAFwL7+javXu39dSpU37hJlxEyOhXVsOTCxAyStCmTWiCju2QIhHMrsDZDshXMHYoB2QLvL9DToekKYGmCBtG2eHZ7bDFDcOSsY/HFi1FPAJoA7aVgG1A+c7i4uKOEydOhJVnHz16dElmZua6pKSkQthIyDloxxjIED35Z3jyudbW1iubNm2aEmRqyqCpANgREioI268+H9hLEbu7SkpKOo4fPz4op+dU9OSMjIy1qamphfDk9wRyTCBk8WQL+qZzLS0tNdOB/Nxivvn48eNMDEW/ROp3GzFskLHMVzQWnWcrRlLfwdCCcOgg6cl3795NRyb1KUd8sLsfG6F6hf8u2G0F4DNWq7X40qVLiTgc8pSF6uLNCVuG53WTwG6D0Sc5gpzLPNsH8kewtxb2DowHGdlFBzMs2Ps27E3C4bmDrIie3djYmEXY8Oy7sHNo1OT/JLCt8OwTMP61Cxcu6OXyWRMh19XVGQH5Q0CugZ19k0A+jzdw7/Xr11Xx5GnF6EApMdtkMrUjJjNmM/VjNuLtIBn7oFicS8OmZwc5m9kIIe/atWtNcnLym5Jd5OBwDOwcE5PxECoxZjgL0Baz2eyA3c89FawKaEpJ/dhBwng3YKZgP16erRfYOoy+nHv27Jlx2Oz4mF0kJiYqkDfDjkDILkB2EjJGfGefPHli2bp1qyqQKdVAU76eDQNdGNSsHA82dh7YaLAeeXZ3UVFR20wNapQULiUlpUiyC0JeKnZ4JJA7FU9uaGioys3NdaKIaosaqoKmFM8W2Jz1SwLsJPz2m/XDjrBXabXaOJ1O15mfn9+mtmfTk2GHEZC94QK3DoTMcNEFyD/Dk08Tcl5enqqQKdVBUwK7c8OGDcw5RwCTI8hEbIGwdXgQq7Dp8CY49+/f33rs2DFVYBMyQsUayZM5rOaIbzxPZriogiefIeTLly93IZarCnnGxdmw+/fvM89WUr8x2Qh7eclGPIsHFRUVzz2fTcictJfs4ipu0See69VocjHczhQOnV5xbW1tAg57H8K8E2E/ePDABNhfCexno039T4SNRhP2t0z9nmfxgPerr69fj/t9jPtVo+peuY1Xcj8bIJ9jnlxdXR2PwzMKOeRp0ukKw24XPOYvNPx7gDwL7+UU67Cc9ggxPBJvdFJMTEw+XvMPEFN3wiunPKghZAyRjaijEJ0sw4Vn7kJOeySezRSOMZkdn4XhAuXmV7iYSIRw7949etqXaORvcKqJPJuv86mmpqb8qYQR1s+FVNT/Ceq/hqr6pFqvpH6vJ8/7cDGRCENi9hdBwghhnwTs3aF4Nuttbm7mQipXqz0xWarzivXibWK95QsiJgcTobCjEtjBPPskoOyZDLbPJwGcIKInjxuTZa7lLDz5nQUPWRGzAukgg4URdpCl7CDHmxvxgcxPAmpQ/h+53Cuphw/t/wVZEWHfuXMnaBiBJ3KK9RtA8pv1k08CvOECMLvkMq+U6xkurFbru2pNEE1Hc/pkCRsZhhGDir3IEjhyy0YC4rdSwywB4grHJQwqTuNNqK6qquo7ePBgOgZFhXq9fh8GPCaMMv3CC67hjGE7rqvs7e0tb2xstGzbtk3dz7emoDl/hQh73bp16QaDodgHtt+IVaAR9kWn08lVeBtSuJ2A/BYg87sLv7DiA5kLqWfQUV7ZvHmzfS5TuLCIVYSdnp5uRB79LoBzqX+MZ0sosPf399/EvhNlTSiXHghZyvGTgCp6MiFv2bIl5NXqBS9mI7IsxhEkO8iJFg+6h4aG7IjJA3LYT5JdnOby061bt5Kl+kX5ip7NlRqBPW4HOZkAuUU6vuKHDx+GFeQZmb2brkpLS0d27NjhSEhIaEXsdSEscPGAs35B7YSHt0rHV4ZMxJKZmRlW4SKsQFPl5eXu+Pj4TpPJZANoZVlsUtiAzI6vhpDh0VczMjJm/5OAIAo70JSyeACvbAPgEXj3mGUxiuFCOj5+3OLx5HCETIUlaEpZPAj41s/7RZRAVvLk8xjQTOlbuNlW2IKmFM+Wb/04nUqvjgZjfvDiQPbBcMFv4aqn+i3cbCusQVOEzQVfhhGAfgrPfgjYtwD5CkaKF5uammrNZvNinqy24M0aznNw4285vKhFLWpRC08REf8CWiQ4qyM/fXgAAAAASUVORK5CYII=";const xs={props:{board:{type:Object,required:!0}},data(){return{boardTitleToEdit:null,isMembersMenuOpen:!1,isSideMenuOpen:!1}},computed:{selected(){return{selected:this.board.isStarred}},users(){return this.$store.getters.users},boardTitle(){return JSON.parse(JSON.stringify(this.board.title))},userWorkspace(){const t=this.board.createdBy.fullname.split(" ");return t[0]+" "+t[1].split("")[0]+"'s"},checkStar(){if(this.board.star)return"star-on"}},created(){},watch:{boardTitle:{immediate:!0,handler(){this.boardTitleToEdit=this.boardTitle}}},methods:{setBackground(t){this.$emit("setBackground",t)},starBoard(){this.board.star?this.$emit("starBoard",!1):this.$emit("starBoard",!0)}},components:{userAvatar:J,showMenu:ws}},As={class:"board-header"},$s={class:"flex"},Ds=o("button",{class:"btn-boards-drop"},[o("img",{class:"boards-icon",src:Os,alt:""}),o("span",null," Boards "),o("img",{class:"img-arrow",src:ue,alt:""})],-1),Is={class:"board-title",contenteditable:"true"},Ls=o("div",null,null,-1),Us=[Ls],Ns=S(),Gs=o("span",{class:"nav-divider"},"|",-1),Js={class:"btn-user-space"},zs=S(),js=o("span",{class:"nav-divider sub"},"|",-1),Fs={class:"flex board-members"},qs=o("button",{class:"btn-share-board flex center align-center"},[o("span"),S("Share")],-1),Ps=o("button",{class:"btn-show-menu"},[o("span"),o("span",null," Show menu")],-1);function Rs(t,e,r,d,a,s){const n=p("user-avatar");return i(),l("div",As,[o("div",$s,[Ds,o("h2",Is,_(r.board.title),1),o("button",{onClick:e[0]||(e[0]=(...c)=>s.starBoard&&s.starBoard(...c)),class:x([s.checkStar,"btn-star-board"])},Us,2),Ns,Gs,o("button",Js,[o("h4",null,_(s.userWorkspace)+" Workspace",1)]),zs,js,o("div",Fs,[(i(!0),l(v,null,C(r.board.members,c=>(i(),M(n,{key:c._id,user:c},null,8,["user"]))),128)),qs]),Ps])])}var Hs=k(xs,[["render",Rs]]);const Vs={name:"board-details",data(){return{isAddingGroup:!0,labelsOpen:!1,loadDate:!1}},components:{boardGroup:ps,groupAdd:vs,Container:V,Draggable:Z,boardHeader:Hs,taskPreview:ce},async mounted(){const{boardId:t}=this.$route.params;await this.$store.dispatch({type:"loadCurrBoard",boardId:t}),this.board.style&&(document.body.style=`
   background-image: url(${this.board.style.bg});
   background-color: ${this.board.style.bg};`,console.log(this.board))},unmounted(){document.body.style=`
   background: none;`},computed:{board(){return this.$store.getters.currBoard},unfilteredBoard(){return this.$store.state.boardStore.currBoard}},methods:{async starBoard(t){const e=this.$store.getters.currBoard;e.star=t,await this.$store.dispatch({type:"saveCurrBoard",boardToSave:e})},async saveTask(t,e){await this.$store.dispatch({type:"saveTask",groupId:e,taskToSave:t})},async removeGroup(t){await this.$store.dispatch({type:"removeGroup",group:t})},async removeTask(t,e){await this.$store.dispatch({type:"removeTask",groupId:e.id,taskId:t.id})},async updateGroup(t){this.isAddingGroup||(this.isAddingGroup=!0),t.title&&await this.$store.dispatch({type:"updateGroup",groupToSave:t})},async loadBoard(){const{boardId:t}=this.$route.params,e=await this.$store.dispatch({type:"loadCurrBoard",boardId:t});return this.board=e,this.board.style&&(document.body.style=`
    background-image: url(${this.board.style.bg});
    background-color: ${this.board.style.bg};`),e},async onColumnDrop(t){const e=Object.assign({},this.board);console.log(e),t.payload={},t.payload.data=this.board.groups[t.removedIndex],t.payload.id=this.board.groups[t.removedIndex].id,console.log("drop>>",t),e.groups=B.applyDrag(e.groups,t),await this.$store.dispatch({type:"saveCurrBoard",boardToSave:e})},getCardPayload(t){return e=>this.board.groups.filter(r=>r.id===t)[0].tasks[e]},async onCardDrop(t,e){if(console.log(e),e.removedIndex!==null||e.addedIndex!==null){const r=Object.assign({},this.board),d=r.groups.filter(n=>n.id===t)[0],a=r.groups.indexOf(d),s=Object.assign({},d);e.removedIndex==null&&e.addedIndex>=0,s.tasks=B.applyDrag(s.tasks,e),r.groups.splice(a,1,s),await this.$store.dispatch({type:"saveCurrBoard",boardToSave:r})}},goToDetail(t,e){this.$router.push(`/board/${this.board._id}/task/${t.id}/${e.id}`)}},watch:{"$route.params.boardId"(t){!t||(console.log("Changed to",t),this.loadBoard())}}},Zs={key:0,class:"board-details"},Ws=o("div",{class:"bg"},null,-1),Ks={class:"group-list flex"};function Ys(t,e,r,d,a,s){const n=p("board-header"),c=p("router-view"),u=p("task-preview"),b=p("Container"),D=p("board-group"),P=p("Draggable"),R=p("group-add");return s.board?(i(),l("section",Zs,[Ws,h(n,{onStarBoard:s.starBoard,board:s.board},null,8,["onStarBoard","board"]),h(c),o("div",Ks,[h(b,{"group-name":"cols",tag:"div",orientation:"horizontal",onDrop:e[1]||(e[1]=A=>s.onColumnDrop(A))},{default:f(()=>[(i(!0),l(v,null,C(s.board.groups,A=>(i(),M(P,{key:A.id},{default:f(()=>[o("div",null,[h(D,{group:A,onUpdateGroup:s.updateGroup,onSaveGroup:s.updateGroup,onRemoveGroup:s.removeGroup},{default:f(()=>[h(b,{orientation:"vertical","group-name":"col-items",shouldAcceptDrop:(O,g)=>O.groupName==="col-items","get-child-payload":s.getCardPayload(A.id),onDrop:O=>s.onCardDrop(A.id,O)},{default:f(()=>[(i(!0),l(v,null,C(A.tasks,O=>(i(),M(u,{onDueSoon:g=>O.status="due-soon",onInProgress:g=>O.status="in-progress",onOverDue:g=>O.status="over-due",onDone:g=>O.status="done",onSaveTask:g=>s.saveTask(O,A.id),onOpenLabels:e[0]||(e[0]=g=>a.labelsOpen=!a.labelsOpen),labelsOpen:a.labelsOpen,onClick:g=>s.goToDetail(A,O),key:O.id,task:O,onRemoveTask:g=>s.removeTask(O,A)},null,8,["onDueSoon","onInProgress","onOverDue","onDone","onSaveTask","labelsOpen","onClick","task","onRemoveTask"]))),128))]),_:2},1032,["shouldAcceptDrop","get-child-payload","onDrop"])]),_:2},1032,["group","onUpdateGroup","onSaveGroup","onRemoveGroup"])])]),_:2},1024))),128))]),_:1}),h(R,{onAddGroup:e[2]||(e[2]=A=>a.isAddingGroup=!1),onSaveGroup:s.updateGroup,onCloseGroupAdd:e[3]||(e[3]=A=>a.isAddingGroup=!0),isAddingGroup:a.isAddingGroup},null,8,["onSaveGroup","isAddingGroup"])])])):m("",!0)}var Qs=k(Vs,[["render",Ys]]);const Xs={name:"trello-labels",props:{labels:Array},methods:{openEditModal(t){this.$emit("editModalOpened",t,"labelsEdit")}}},er={class:"trello-labels"},tr=o("span",{class:"secondary-section-title"},"Labels",-1),sr={class:"clean-list flex wrap"};function rr(t,e,r,d,a,s){return i(),l("section",er,[tr,o("ul",sr,[(i(!0),l(v,null,C(r.labels,n=>(i(),l("li",{key:n.id},[o("div",{class:"label",style:y({"background-color":n.color}),onClick:e[0]||(e[0]=(...c)=>s.openEditModal&&s.openEditModal(...c))},_(n.title),5)]))),128)),o("li",null,[o("button",{class:"add-label btn-default",onClick:e[1]||(e[1]=(...n)=>s.openEditModal&&s.openEditModal(...n))})])])])}var or=k(Xs,[["render",rr]]);const ar={name:"trello-members",props:{members:Array},methods:{openEditModal(t){console.log("event",t),this.$emit("editModalOpened",t,"membersEdit")}},components:{userAvatar:J}},nr={class:"trello-members"},ir=o("span",{class:"secondary-section-title"},"Members",-1),lr={class:"clean-list"};function dr(t,e,r,d,a,s){const n=p("user-avatar");return i(),l("section",nr,[ir,o("ul",lr,[(i(!0),l(v,null,C(r.members,c=>(i(),l("li",{key:c._id,onClick:e[0]||(e[0]=(...u)=>s.openEditModal&&s.openEditModal(...u))},[h(n,{user:c,diameter:32},null,8,["user"])]))),128)),o("li",null,[o("button",{class:"btn-round",onClick:e[1]||(e[1]=(...c)=>s.openEditModal&&s.openEditModal(...c))})])])])}var cr=k(ar,[["render",dr]]);const ur={name:"trello-txt-input",props:{txt:String,placeholder:{type:String,default:""},denyEmptySave:{type:Boolean,default:!1},resetOnSave:{type:Boolean},allowNext:{type:Boolean,default:!1}},data(){return{updatedTxt:this.txt,isInEdit:!1}},methods:{saveTxt(){if(console.log("saving Text!"),!this.updatedTxt)return console.log("this.denyEmptySave",this.denyEmptySave),this.denyEmptySave||(this.isInEdit=!1),this.$emit("txtIsEmpty","");this.$emit("txtSaved",this.updatedTxt),this.resetOnSave&&(this.updatedTxt=""),this.isInEdit=!1},openEdit(t){console.log("event.target.tagName",typeof t.target.tagName),t.target.tagName!=="BUTTON"&&(this.isInEdit=!0)},cancel(){this.updatedTxt=this.txt,this.isInEdit=!1},next(){this.saveTxt(),!this.isInEdit&&this.allowNext&&(this.isInEdit=!0)},handleClickOutside(){!this.isInEdit||(this.updatedTxt?this.saveTxt():this.cancel())}},computed:{txtToShow(){return!this.updatedTxt&&this.placeholder?this.placeholder:this.updatedTxt}}},hr={key:0,class:"flex space-between"},mr={class:"input-title"},pr={key:1,class:"input-edit"},gr=["placeholder"],kr={class:"controlls"};function br(t,e,r,d,a,s){const n=G("focus"),c=G("clickoutside");return T((i(),l("section",{class:"trello-txt-input",onClick:e[5]||(e[5]=(...u)=>s.openEdit&&s.openEdit(...u))},[a.isInEdit?(i(),l("div",pr,[T(o("textarea",{cols:"30",rows:"3",onKeydown:[e[0]||(e[0]=H(E((...u)=>s.next&&s.next(...u),["prevent"]),["enter"])),e[1]||(e[1]=H((...u)=>s.cancel&&s.cancel(...u),["esc"]))],"onUpdate:modelValue":e[2]||(e[2]=u=>a.updatedTxt=u),placeholder:r.placeholder},null,40,gr),[[w,a.updatedTxt],[n]]),o("div",kr,[o("button",{class:"primary-btn",onClick:e[3]||(e[3]=(...u)=>s.saveTxt&&s.saveTxt(...u))},"Save"),o("button",{class:"cancel-btn",onClick:e[4]||(e[4]=(...u)=>s.cancel&&s.cancel(...u))}),j(t.$slots,"edit-controlls")])])):(i(),l("div",hr,[o("span",mr,_(s.txtToShow),1),j(t.$slots,"default")]))])),[[c,s.handleClickOutside]])}var Q=k(ur,[["render",br]]);const _r={name:"activity-log",props:{comments:Array,default:[]},data(){return{updatedComments:this.comments?JSON.parse(JSON.stringify(this.comments)):[],byMember:this.$store.getters.getMyMiniUser}},methods:{formatCreatedAt(t){return N(t,"MMM d")+" at "+N(t,"HH:MM")},addComment(t){const e={id:B.makeId(),txt:t,createdAt:Date.now(),byMember:this.byMember};this.updatedComments.unshift(e),this.$emit("updated",JSON.parse(JSON.stringify(this.updatedComments)))}},computed:{user(){return console.log(this.$store.getters.loggedinUser),this.$store.getters.loggedinUser}},components:{userAvatar:J,trelloTxtInput:Q}},fr={class:"activity-log"},yr=o("span",{class:"section-title text-m icon-activity"},"Activity",-1),vr={class:"clean-list"},Cr={class:"user-fullname"},Tr={class:"comment-time"};function Sr(t,e,r,d,a,s){const n=p("user-avatar"),c=p("trello-txt-input");return i(),l("section",fr,[yr,o("ul",vr,[o("li",null,[h(n,{user:s.user},null,8,["user"]),h(c,{placeholder:"Write a comment...","deny-empty-save":"","reset-on-save":"",onTxtSaved:s.addComment},null,8,["onTxtSaved"])]),(i(!0),l(v,null,C(a.updatedComments,u=>(i(),l("li",{key:u.id},[h(n,{user:u.byMember},null,8,["user"]),o("span",Cr,_(u.byMember.fullname),1),o("span",Tr,_(s.formatCreatedAt(u.createdAt)),1),o("p",null,_(u.txt),1)]))),128))])])}var Er=k(_r,[["render",Sr]]);const Br={name:"trello-checklist",props:{checklist:Object,isEditModalMounted:Boolean},data(){return{updatedChecklist:JSON.parse(JSON.stringify(this.checklist)),isDeleteContentTeleported:!1}},methods:{saveChecklist(){const t=JSON.parse(JSON.stringify(this.updatedChecklist));this.$emit("updated",t)},toggleTodoStatus(t){const e=this.updatedChecklist.todos[t];e.isDone=!e.isDone,this.saveChecklist()},updateChecklistTitle(t){this.updatedChecklist.title=t,this.saveChecklist()},updateTodoTitle(t,e){const r=this.updatedChecklist.todos.findIndex(d=>d.id===e);this.updatedChecklist.todos[r].title=t,this.saveChecklist()},removeTodo(t){this.updatedChecklist.todos.splice(t,1),this.saveChecklist()},removeChecklist(){this.$emit("removed"),this.$emit("editModalClosed")},addTodo(t){this.updatedChecklist.todos.push({id:B.makeId(),title:t,isDone:!1}),this.saveChecklist()},next(){this.$refs.input.$el.click()},openDeleteModal(t){this.isDeleteContentTeleported=!0,this.$emit("teleportContainerOpened",t)}},computed:{completePercentage(){const t=this.updatedChecklist.todos,e=t.length;if(e===0)return 0;const r=t.filter(d=>d.isDone).length;return Math.floor(r/e*100)},passSuccess(){return this.completePercentage===100?"success":""}},watch:{isEditModalMounted(t){t||(this.isDeleteContentTeleported=!1)}},components:{trelloTxtInput:Q}},Mr={class:"trello-checklist"},wr={class:"todos clean-list"},Or=["checked","onChange"],xr=["onClick"],Ar=["onClick"],$r=o("p",{class:"msg"},"Deleting a checklist is permanent and there is no way to get it back.",-1);function Dr(t,e,r,d,a,s){const n=p("trello-txt-input"),c=p("el-progress");return i(),l("section",Mr,[h(n,{class:"section-title text-m icon-checklist",txt:a.updatedChecklist.title,onTxtSaved:s.updateChecklistTitle,"deny-empty-save":""},{default:f(()=>[o("button",{class:"btn float-right btn-default",onClick:e[0]||(e[0]=(...u)=>s.openDeleteModal&&s.openDeleteModal(...u))},"Delete")]),_:1},8,["txt","onTxtSaved"]),h(c,{percentage:s.completePercentage,status:s.passSuccess},null,8,["percentage","status"]),o("ul",wr,[(i(!0),l(v,null,C(a.updatedChecklist.todos,(u,b)=>(i(),l("li",{key:u.id},[o("input",{type:"checkbox",checked:u.isDone,onChange:D=>s.toggleTodoStatus(b)},null,40,Or),h(n,{class:x({done:u.isDone}),txt:u.title,onTxtSaved:D=>s.updateTodoTitle(D,u.id),onTxtIsEmpty:D=>s.removeTodo(b)},{"edit-controlls":f(()=>[o("button",{class:"remove-btn-quite",onClick:D=>s.removeTodo(b)},null,8,Ar)]),default:f(()=>[o("button",{class:"remove-btn-quite",onClick:D=>s.removeTodo(b)},null,8,xr)]),_:2},1032,["class","txt","onTxtSaved","onTxtIsEmpty"])]))),128))]),h(n,{class:"make-btn",placeholder:"Add an item","deny-empty-save":"","reset-on-save":"",onTxtSaved:s.addTodo,"allow-next":"",ref:"input"},null,8,["onTxtSaved"]),a.isDeleteContentTeleported&&r.isEditModalMounted?(i(),M(K,{key:0,to:".teleport-container"},[$r,o("button",{onClick:e[1]||(e[1]=(...u)=>s.removeChecklist&&s.removeChecklist(...u)),class:"delete-btn btn"},"Delete checklist")])):m("",!0)])}var Ir=k(Br,[["render",Dr]]);const Lr={name:"trello-dates",props:{dueDate:Number,status:String},methods:{openEditModal(t){console.log("event",t),this.$emit("editModalOpened",t,"dateEdit")}},computed:{formatDueDate(){return N(this.dueDate,"MMM d")+" at "+N(this.dueDate,"HH:MM")}}},Ur={class:"trello-dates"},Nr=o("span",{class:"secondary-section-title"},"Due date",-1),Gr={class:"flex-container flex align-center"},Jr=o("input",{type:"checkbox"},null,-1),zr=o("svg",{width:"24",height:"24",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1);function jr(t,e,r,d,a,s){return i(),l("section",Ur,[Nr,o("div",Gr,[Jr,o("button",{class:"btn-default flex align-center",onClick:e[0]||(e[0]=(...n)=>s.openEditModal&&s.openEditModal(...n))},[S(_(s.formatDueDate)+" ",1),r.status!=="in-progress"?(i(),l("span",{key:0,class:x(["status-tag",r.status])},_(r.status),3)):m("",!0),zr])])])}var Fr=k(Lr,[["render",jr]]);const qr={name:"main-edit-modal",props:{modalTitle:String,pos:Object},mounted(){console.log("Main edit modal is mounted!"),new ResizeObserver(()=>{this.correctPosition()}).observe(this.$refs.elModal),this.$emit("mounted")},data(){return{posCorrected:this.pos?JSON.parse(JSON.stringify(this.pos)):{x:0,y:0},maxHeight:window.innerHeight||document.documentElement.clientHeight}},methods:{closeModal(){this.$emit("editModalClosed")},correctPosition(){if(!this.$refs.elModal||!this.pos)return;const t=JSON.parse(JSON.stringify(this.pos)),e=this.$refs.elModal.getBoundingClientRect(),r={h:window.innerHeight||document.documentElement.clientHeight,w:window.innerWidth||document.documentElement.clientWidth};t.x<0&&(t.x=20),t.x+e.width>r.w&&(t.x=r.w-e.width-20),this.maxHeight=r.h,t.y+e.height>r.h&&(t.y=r.h-e.height-20),t.y<20&&(t.y=20,this.maxHeight=r.h-80),this.posCorrected=t}},computed:{position(){return this.$refs.elModal},elheight(){if(!!this.$refs.elModal)return this.$refs.elModal.getBoundingClientRect().height}},watch:{},unmounted(){console.log("main edit modal is unmounted"),this.$emit("unmounted")}},Pr={class:"edit-modal-header"},Rr={class:"modal-header-title"};function Hr(t,e,r,d,a,s){const n=G("clickoutside");return T((i(),l("section",{class:"main-edit-modal",style:y({top:a.posCorrected.y+"px",left:a.posCorrected.x+"px"}),ref:"elModal"},[o("header",Pr,[o("span",Rr,_(r.modalTitle),1),o("button",{class:"exit-btn",onClick:e[0]||(e[0]=(...c)=>s.closeModal&&s.closeModal(...c))})]),o("main",{class:"edit-modal-main",style:y({"max-height":a.maxHeight+"px"})},[j(t.$slots,"default")],4)],4)),[[n,s.closeModal]])}var Vr=k(qr,[["render",Hr]]);const Zr={name:"labels-edit",props:{currTask:Object},data(){return{filterBy:"",labelInEdit:null}},methods:{checkIfTaskLabel(t){return this.taskToEdit.labelIds?this.taskToEdit.labelIds.some(e=>e===t.id):!1},toggleLabelFromTask(t){this.taskToEdit.labelIds||(this.taskToEdit.labelIds=[]);var e=this.taskToEdit.labelIds;const r=e.findIndex(d=>d===t.id);r===-1?e.push(t.id):e.splice(r,1),this.$emit("taskUpdated",this.taskToEdit)},saveLabel(){this.$emit("labelUpdated",this.labelInEdit),this.labelInEdit=null}},computed:{labels(){return this.$store.getters.currBoardLabels},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))},labelsForDisplay(){return this.labels.filter(t=>t.title.toLowerCase().includes(this.filterBy.toLowerCase()))}}},Wr={class:"labels-edit"},Kr={key:0,class:"all-labels"},Yr=o("span",{class:"secondary-section-title"},"Labels",-1),Qr={class:"clean-list"},Xr=["onClick"],eo=["onClick"],to={key:1,class:"label-editor"},so={class:"controlls flex space-between align-center"};function ro(t,e,r,d,a,s){return i(),l("section",Wr,[a.labelInEdit?(i(),l("div",to,[o("div",{class:x(["label",[s.checkIfTaskLabel(a.labelInEdit)?"selected":""]]),style:y({"background-color":a.labelInEdit.color})},[T(o("input",{type:"text",placeholder:"Enter label name...","onUpdate:modelValue":e[1]||(e[1]=n=>a.labelInEdit.title=n)},null,512),[[w,a.labelInEdit.title]])],6),o("div",so,[o("button",{class:"primary-btn",onClick:e[2]||(e[2]=(...n)=>s.saveLabel&&s.saveLabel(...n))},"Save"),o("button",{class:"btn",onClick:e[3]||(e[3]=n=>a.labelInEdit=null)},"Cancel")])])):(i(),l("div",Kr,[T(o("input",{class:"search",type:"text",placeholder:"Search labels...","onUpdate:modelValue":e[0]||(e[0]=n=>a.filterBy=n)},null,512),[[w,a.filterBy]]),Yr,o("ul",Qr,[(i(!0),l(v,null,C(s.labelsForDisplay,n=>(i(),l("li",{key:n.id},[o("div",{class:x(["label",[s.checkIfTaskLabel(n)?"selected":"",n.class]]),style:y({"background-color":n.color}),onClick:c=>s.toggleLabelFromTask(n)},[o("span",null,_(n.title),1)],14,Xr),o("span",{class:"edit-icon",onClick:E(c=>a.labelInEdit=JSON.parse(JSON.stringify(n)),["stop"])},null,8,eo)]))),128))])]))])}var oo=k(Zr,[["render",ro]]);const ao={name:"members-edit",props:{currTask:Object},data(){return{filterBy:""}},methods:{checkIfTaskMember(t){return this.taskToEdit.members?this.taskToEdit.members.some(e=>e._id===t):!1},async toggleMembership(t){this.taskToEdit.members||(this.taskToEdit.members=[]);var e=this.taskToEdit.members;const r=e.findIndex(d=>d._id===t._id);r===-1?e.push(t):e.splice(r,1),this.$emit("taskUpdated",this.taskToEdit)}},computed:{currBoardMembers(){return this.$store.getters.currBoardMembers},membersForDisplay(){return this.currBoardMembers.filter(t=>t.username.toLowerCase().includes(this.filterBy.toLowerCase())||t.fullname.toLowerCase().includes(this.filterBy.toLowerCase()))},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}},components:{userAvatar:J}},no={class:"members-edit"},io=o("span",{class:"secondary-section-title"},"Board members",-1),lo=["onClick"],co={class:"member"};function uo(t,e,r,d,a,s){const n=p("user-avatar");return i(),l("section",no,[T(o("input",{class:"search",type:"text",placeholder:"Search members","onUpdate:modelValue":e[0]||(e[0]=c=>a.filterBy=c)},null,512),[[w,a.filterBy]]),io,o("ul",null,[(i(!0),l(v,null,C(s.membersForDisplay,c=>(i(),l("li",{key:c._id,class:x(["flex align-center",{selected:s.checkIfTaskMember(c._id)}]),onClick:u=>s.toggleMembership(c)},[h(n,{user:c,diameter:32},null,8,["user"]),o("div",co,[o("span",null,_(c.fullname+" ("+c.username+")"),1)])],10,lo))),128))])])}var ho=k(ao,[["render",uo]]);const mo={name:"checklists-edit",props:{currTask:Object},data(){return{newChecklist:{id:"",title:"Checklist",todos:[]},todosToCopy:[]}},methods:{createChecklist(){this.newChecklist.id=B.makeId(),this.newChecklist.todos=JSON.parse(JSON.stringify(this.todosToCopy.flat())).map(t=>(console.log("todo",t),t.id=B.makeId(),t)),this.taskToEdit.checklists||(this.taskToEdit.checklists=[]),this.taskToEdit.checklists.push(JSON.parse(JSON.stringify(this.newChecklist))),this.$emit("taskUpdated",this.taskToEdit),this.newChecklist={id:null,title:"Checklist",todos:[]},this.$emit("modalClosed")}},computed:{checklists(){return this.$store.getters.currBoardChecklists},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}}},po={class:"checklists-edit"},go=o("span",{class:"secondary-section-title"},"Title",-1),ko=o("span",{class:"secondary-section-title"},"Copy items from...",-1),bo=o("option",{value:[]},"(none)",-1),_o=["label"],fo=["value"];function yo(t,e,r,d,a,s){const n=G("focus");return i(),l("section",po,[go,T(o("input",{class:"search",type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>a.newChecklist.title=c)},null,512),[[n],[w,a.newChecklist.title]]),ko,T(o("select",{"onUpdate:modelValue":e[1]||(e[1]=c=>a.todosToCopy=c),multiple:""},[bo,(i(!0),l(v,null,C(s.checklists,c=>(i(),l("optgroup",{key:c.taskId,label:c.taskTitle},[(i(!0),l(v,null,C(c.checklists,u=>(i(),l("option",{key:u.id,value:u.todos},_(u.title),9,fo))),128))],8,_o))),128))],512),[[ye,a.todosToCopy]]),o("button",{class:"primary-btn",onClick:e[2]||(e[2]=(...c)=>s.createChecklist&&s.createChecklist(...c))},"Add")])}var vo=k(mo,[["render",yo]]);const Co={name:"date-edit",props:{currTask:Object},components:{Datepicker:ve},data(){return{startDate:null,dueDate:null,taskDate:null,currTaskDates:{startDate:null,endDate:null,endTime:null,date:null}}},computed:{taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}},methods:{selectDate(){var t=document.querySelector(".dp__selection_preview"),e=Date.parse(t.innerText);this.taskToEdit.dueDate=e,console.log(this.taskToEdit),this.dueDate-Date.now()<0&&(this.taskToEdit.status="over-due"),this.dueDate-Date.now()<86400*1e3&&(this.taskToEdit.status="due-soon"),this.dueDate-Date.now()>86400*1e3&&(this.taskToEdit.status="in-progress"),this.$emit("taskUpdated",this.taskToEdit)},test(){console.log(modelValue)}}},To={class:"date-edit"},So=o("p",{class:"date-title"},"Due date",-1);function Eo(t,e,r,d,a,s){const n=p("Datepicker");return i(),l("section",To,[h(n,{AutoApply:"",modelValue:a.taskDate,"onUpdate:modelValue":[e[1]||(e[1]=c=>a.taskDate=c),s.test],utc:"",inline:"",startTime:{},monthChangeOnScroll:!1,weekStart:"0",monthNameFormat:"long"},{"action-select":f(()=>[o("button",{class:"btn-save-date",onClick:e[0]||(e[0]=(...c)=>s.selectDate&&s.selectDate(...c))},"Save")]),_:1},8,["modelValue","onUpdate:modelValue"]),So,o("pre",null,_(a.taskDate),1)])}var Bo=k(Co,[["render",Eo]]);const he=t=>{const e="dxj8szufc",d="https://api.cloudinary.com/v1_1/dxj8szufc/image/upload",a=new FormData;return a.append("file",t.target.files[0]),a.append("upload_preset",e),fetch(d,{method:"POST",body:a}).then(s=>s.json()).then(s=>s).catch(s=>{throw console.error(s),s})};var Mo="/assets/Upload-PNG-Image-File.0ddaa69b.png",wo="/assets/loader.fd6c922f.gif",Oo="/assets/checkmark-cut.81d2fd44.gif",xo="/assets/ezgif.com-gif-maker.29a621cd.gif";const Ao={name:"attachment-edit",props:{currTask:Object},created(){this.currStatus=this.statusOptions.waiting},data(){return{currStatus:null,statusOptions:{waiting:{txt:"Upload file",isWaiting:!0},loading:{txt:"Loading...",isLoading:!0,txtColor:"#00c2e0"},complete:{txt:"Attachment added successfuly!",isComplete:!0,txtColor:"#61bd4f"},failed:{txt:"OOPS! File upload failed!",isFailed:!0,txtColor:"#eb5a46"}}}},methods:{async onUpload(t){console.log("ev.target.files[0]",t.target.files[0]),this.currStatus=this.statusOptions.loading;try{const e=await he(t);this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(e),console.log("this.taskToEdit",this.taskToEdit),this.$emit("taskUpdated",this.taskToEdit),this.currStatus=this.statusOptions.complete}catch{this.currStatus=this.statusOptions.failed}setTimeout(()=>{this.closeModal(),this.$refs.checkmarkImg.src+=`?v=${Date.now()}`},2e3)},closeModal(){this.$emit("editModalClosed")}},computed:{taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}}},$o={class:"attachment-edit flex column"},Do=o("span",{class:"secondary-section-title"},"Upload file",-1),Io={key:0},Lo=["alt"],Uo={key:1,class:"status-msg flex align-center"},No=o("img",{class:"status-icon",src:wo},null,-1),Go={key:2,class:"status-msg flex align-center"},Jo={class:"status-icon",src:Oo,ref:"checkmarkImg"},zo={key:3,class:"status-msg flex align-center"},jo=o("img",{class:"status-icon",src:xo},null,-1);function Fo(t,e,r,d,a,s){const n=G("focus");return i(),l("section",$o,[Do,a.currStatus.isWaiting?(i(),l("label",Io,[o("img",{class:"upload-icon",src:Mo,alt:a.currStatus.txt},null,8,Lo),T(o("input",{class:"search",type:"file",onChange:e[0]||(e[0]=(...c)=>s.onUpload&&s.onUpload(...c))},null,544),[[n]])])):a.currStatus.isLoading?(i(),l("div",Uo,[o("span",{class:"secondary-section-title",style:y({color:a.currStatus.txtColor})},_(a.currStatus.txt),5),No])):a.currStatus.isComplete?(i(),l("div",Go,[o("span",{class:"secondary-section-title",style:y({color:a.currStatus.txtColor})},_(a.currStatus.txt),5),o("img",Jo,null,512)])):a.currStatus.isFailed?(i(),l("div",zo,[o("span",{class:"secondary-section-title",style:y({color:a.currStatus.txtColor})},_(a.currStatus.txt),5),jo])):m("",!0)])}var qo=k(Ao,[["render",Fo]]);const Po={name:"trello-attachments",props:{attachments:Array,isEditModalMounted:Boolean},data(){return{attachmentToEditIdx:NaN,isDeleteContentTeleported:!1,isNameContentTeleported:!1}},methods:{removeAttachment(){this.updatedAttachments.splice(this.attachmentToEditIdx,1),this.$emit("updated",this.updatedAttachments),this.$emit("editModalClosed")},openEditModal(t){this.$emit("editModalOpened",t)},openDeleteModal(t,e){console.log("event",t),this.attachmentToEditIdx=e,this.isDeleteContentTeleported=!0,this.$emit("teleportContainerOpened",t)},openNameModal(t,e){this.attachmentToEditIdx=e,this.isNameContentTeleported=!0,this.$emit("teleportContainerOpened",t)},formatCreatedAt(t){const e=new Date(t.created_at).getTime();return console.log("createdAt",e),N(e,"MMM d")+" at "+N(e,"HH:MM")}},computed:{updatedAttachments(){return JSON.parse(JSON.stringify(this.attachments))}},watch:{isEditModalMounted(t){t||(this.isDeleteContentTeleported=!1,this.isNameContentTeleported=!1)}}},Ro={class:"trello-attachments"},Ho=o("div",{class:"section-title text-m icon-attachment"},"Attachments",-1),Vo={class:"attachments clean-list"},Zo=["src","alt"],Wo={class:"file-details"},Ko={class:"attachment-name"},Yo={class:"attachment-addedAt"},Qo={class:"attachment-delete"},Xo=["onClick"],ea={class:"attachment-edit-name"},ta=["onClick"],sa={class:"attachment-make-cover"},ra=["onClick"],oa=o("p",{class:"msg"},"Deleting an attachment is permanent. There is no undo.",-1);function aa(t,e,r,d,a,s){return i(),l("section",Ro,[Ho,o("ul",Vo,[(i(!0),l(v,null,C(r.attachments,(n,c)=>(i(),l("li",{class:"flex align-center",key:n.asset_id},[o("img",{class:"img-preview",src:n.secure_url,alt:n.original_filename},null,8,Zo),o("p",Wo,[o("span",Ko,_(n.original_filename+"."+n.format),1),o("span",Yo,"Added at "+_(s.formatCreatedAt(n)),1),o("span",Qo,[o("a",{href:"#",onClick:E(u=>s.openDeleteModal(u,c),["prevent"])},"Delete",8,Xo)]),o("span",ea,[o("a",{href:"#",onClick:E(u=>s.openNameModal(u,c),["prevent"])},"Edit",8,ta)]),o("span",sa,[o("a",{href:"#",onClick:E(u=>t.makeCover(c),["prevent"])},"Make-cover",8,ra)])])]))),128))]),o("button",{class:"btn",onClick:e[0]||(e[0]=(...n)=>s.openEditModal&&s.openEditModal(...n))},"Add an attachment"),a.isDeleteContentTeleported&&r.isEditModalMounted?(i(),M(K,{key:0,to:".teleport-container"},[oa,o("button",{onClick:e[1]||(e[1]=(...n)=>s.removeAttachment&&s.removeAttachment(...n)),class:"delete-btn btn"},"Delete")])):m("",!0)])}var na=k(Po,[["render",aa]]);const ia={name:"cover-edit",props:{currTask:Object},data(){return{currStatus:null,statusOptions:{waiting:{imgName:"Upload-PNG-Image-File.png",txt:"Upload file",isWaiting:!0},loading:{imgName:"loader.gif",txt:"Loading...",isLoading:!0},complete:{imgName:"checkmark-cut.gif",txt:"Attachment added successfuly!"},failed:{imgName:"ezgif.com-gif-maker.gif",txt:"OOPS! File upload failed!"}}}},created(){this.currStatus=this.statusOptions.waiting},methods:{openSearch(){this.$emit("openSearch")},async onUpload(t){console.log("ev.target.files[0]",t.target.files[0]),this.currStatus=this.statusOptions.loading;try{const e=await he(t);console.log(e),this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(e),console.log("this.taskToEdit",this.taskToEdit),this.$emit("taskUpdated",this.taskToEdit),this.currStatus=this.statusOptions.complete}catch{this.currStatus=this.statusOptions.failed}},setCoverClr(t){console.log(this.taskToEdit),this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.bg=t,this.taskToEdit.style.size||(this.taskToEdit.style.size="small"),this.$emit("taskUpdated",this.taskToEdit)},setCoverImg(t){this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.bg=t,this.taskToEdit.style.size||(this.taskToEdit.style.size="big"),this.$emit("taskUpdated",this.taskToEdit),console.log(this.currTask)},setCoverSize(t){console.log(this.taskToEdit),this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.size=t,this.taskToEdit.style.bg||(this.taskToEdit.style.bg="#7BC86C"),this.$emit("taskUpdated",this.taskToEdit)},removeCover(){delete this.taskToEdit.style,console.log(this.taskToEdit),this.$emit("taskUpdated",this.taskToEdit)}},computed:{getBg(){var t=JSON.parse(JSON.stringify(this.currTask));if(t.style||(t.style={},t.style.bg=""),t.style.bg)return console.log(t.style),t.style.bg.split("")[0]==="#"?`background-color: ${t.style.bg}; opacity:1`:`background-image: url('${t.style.bg}'); opacity:1; background-color:transparent;`},getLine(){if(this.currTask.style)return"colorized"},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}},components:{}},la={class:"cover-edit"},da=o("h4",null,"Size",-1),ca={class:"flex center align-center"},ua=["checked"],ha={class:"cover-opt small"},ma=Ce('<div class="line"></div><div class="line"></div><div class="cube"></div><div class="cube"></div><div class="circle"></div>',5),pa=[ma],ga=["checked"],ka={class:"cover-opt big"},ba=o("div",{class:"line"},null,-1),_a=o("div",{class:"line"},null,-1),fa=[ba,_a],ya=o("h4",null,"Colors",-1),va={class:"btn-cover-container flex center wrap"},Ca=["checked"],Ta=o("div",{class:"btn-clr green"},null,-1),Sa=["checked"],Ea=o("div",{class:"btn-clr yellow"},null,-1),Ba=["checked"],Ma=o("div",{class:"btn-clr orange"},null,-1),wa=["checked"],Oa=o("div",{class:"btn-clr red"},null,-1),xa=["checked"],Aa=o("div",{class:"btn-clr purple"},null,-1),$a=["checked"],Da=o("div",{class:"btn-clr blue"},null,-1),Ia=["checked"],La=o("div",{class:"btn-clr lightblue"},null,-1),Ua=["checked"],Na=o("div",{class:"btn-clr turquoise"},null,-1),Ga=["checked"],Ja=o("div",{class:"btn-clr pink"},null,-1),za=["checked"],ja=o("div",{class:"btn-clr navy"},null,-1),Fa=o("h4",null,"Attachments",-1),qa={key:1,class:"btn-cover-container img-container flex wrap"},Pa=["onClick"],Ra=["checked"],Ha={class:"btn-clr cover-opt-img"},Va=["src"],Za={key:2,class:"btn-upload-cover"},Wa=S(" Upload a cover image "),Ka={key:3},Ya=["src"];function Qa(t,e,r,d,a,s){return i(),l("section",la,[da,o("div",ca,[o("label",null,[o("input",{onClick:e[0]||(e[0]=n=>s.setCoverSize("small")),checked:r.currTask.style&&r.currTask.style.size=="small",type:"radio",name:"cover-opt"},null,8,ua),o("div",ha,[o("div",{class:"cover-opt-header",style:y(s.getBg)},null,4),o("div",{class:x(["cover-opt-lines",s.getLine])},pa,2)])]),o("label",null,[o("input",{onClick:e[1]||(e[1]=n=>s.setCoverSize("big")),checked:r.currTask.style&&r.currTask.style.size=="big",type:"radio",name:"cover-opt",value:"true"},null,8,ga),o("div",ka,[o("div",{style:y(s.getBg),class:"big-container"},[o("div",{class:x(["cover-opt-lines",s.getLine])},fa,2)],4)])])]),r.currTask.style?(i(),l("button",{key:0,onClick:e[2]||(e[2]=(...n)=>s.removeCover&&s.removeCover(...n)),class:"btn-remove-cover"},"Remove cover")):m("",!0),ya,o("div",va,[o("label",{onClick:e[3]||(e[3]=n=>s.setCoverClr("#7BC86C"))},[o("input",{checked:r.currTask.style&&r.currTask.style.bg=="#7BC86C",type:"radio",name:"btn-clr"},null,8,Ca),Ta]),o("label",{onClick:e[4]||(e[4]=n=>s.setCoverClr("#f5dd29"))},[o("input",{checked:r.currTask.style&&r.currTask.style.bg=="#f5dd29",type:"radio",name:"btn-clr"},null,8,Sa),Ea]),o("label",{onClick:e[5]||(e[5]=n=>s.setCoverClr("#FFAF3F"))},[o("input",{checked:r.currTask.style&&r.currTask.style.bg=="#FFAF3F",type:"radio",name:"btn-clr"},null,8,Ba),Ma]),o("label",{onClick:e[6]||(e[6]=n=>s.setCoverClr("#EF7564"))},[o("input",{checked:r.currTask.style&&r.currTask.style.bg=="#EF7564",type:"radio",name:"btn-clr"},null,8,wa),Oa]),o("label",{onClick:e[7]||(e[7]=n=>s.setCoverClr("#CD8DE5"))},[o("input",{checked:r.currTask.style&&r.currTask.style.bg=="#CD8DE5",type:"radio",name:"btn-clr"},null,8,xa),Aa]),o("label",{onClick:e[8]||(e[8]=n=>s.setCoverClr("#5BA4CF"))},[o("input",{checked:r.currTask.style&&r.currTask.style.bg=="#5BA4CF",type:"radio",name:"btn-clr"},null,8,$a),Da]),o("label",{onClick:e[9]||(e[9]=n=>s.setCoverClr("#29CCE5"))},[o("input",{checked:r.currTask.style&&r.currTask.style.bg=="#29CCE5",type:"radio",name:"btn-clr"},null,8,Ia),La]),o("label",{onClick:e[10]||(e[10]=n=>s.setCoverClr("#6DECA9"))},[o("input",{checked:r.currTask.style&&r.currTask.style.bg=="#6DECA9",type:"radio",name:"btn-clr"},null,8,Ua),Na]),o("label",{onClick:e[11]||(e[11]=n=>s.setCoverClr("#FF8ED4"))},[o("input",{checked:r.currTask.style&&r.currTask.style.bg=="#FF8ED4",type:"radio",name:"btn-clr"},null,8,Ga),Ja]),o("label",{onClick:e[12]||(e[12]=n=>s.setCoverClr("#172B4D"))},[o("input",{checked:r.currTask.style&&r.currTask.style.bg=="#172B4D",type:"radio",name:"btn-clr"},null,8,za),ja])]),Fa,r.currTask.attachments?(i(),l("div",qa,[(i(!0),l(v,null,C(r.currTask.attachments,n=>(i(),l("label",{key:n.asset_id,onClick:c=>s.setCoverImg(n.secure_url)},[o("input",{checked:r.currTask.style&&r.currTask.style.bg==n.secure_url,type:"radio",name:"btn-clr"},null,8,Ra),o("div",Ha,[o("img",{class:"cover-opt-img",src:n.secure_url,alt:""},null,8,Va)])],8,Pa))),128))])):m("",!0),a.currStatus.isWaiting||!a.currStatus.isLoading?(i(),l("label",Za,[Wa,o("input",{type:"file",class:"attach",onChange:e[13]||(e[13]=(...n)=>s.onUpload&&s.onUpload(...n))},null,32)])):m("",!0),a.currStatus.isLoading?(i(),l("div",Ka,[o("img",{src:"../../../../src/assets/"+a.currStatus.imgName},null,8,Ya),o("span",null,_(a.currStatus.txt),1)])):m("",!0),o("button",{onClick:e[14]||(e[14]=E((...n)=>s.openSearch&&s.openSearch(...n),["stop"])),class:"btn-search-photo"},"Search for photos")])}var Xa=k(ia,[["render",Qa]]);const en={name:"teleport-container"},tn={class:"teleport-container"};function sn(t,e,r,d,a,s){return i(),l("section",tn)}var rn=k(en,[["render",sn]]);const on={query:an};async function an(t){return(await de({method:"get",url:"https://api.unsplash.com/search/photos",params:{client_id:"wfRMyNNl6BtufTtEgOm1agD3oTHPI-ymhw9iJXaCr98",query:t,page:1,per_page:20,orientation:"landscape",w:"2560",h:"1560"}})).data}const nn={name:"search-photo",props:{currTask:Object},data(){return{isSearching:!1,res:null}},created(){this.searchImg=B.debounce(this.searchImg,1e3)},methods:{async searchImg(){const t=this.$refs.filterBy.value;if(!t){this.isSearching=!1,this.res=null;return}this.res=await on.query(t),this.isSearching=!0,console.log(this.res),this.res=this.res.results.map(e=>({small:e.urls.thumb,regular:e.urls.regular,big:e.urls.full,asset_id:e.id,format:"png",original_filename:e.alt_description,secure_url:e.urls.regular,created_at:e.created_at}))},setImg(t){this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.bg=t.regular,this.taskToEdit.style.size||(this.taskToEdit.style.size="big"),this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(t),this.$emit("taskUpdated",this.taskToEdit),this.$emit("closeSearch")},setSuggestSearch(t){this.$refs.filterBy.value=t,this.searchImg()}},computed:{taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}}},ln={class:"search-photo"},dn={key:0},cn=o("h4",null,"Suggested searches",-1),un={class:"suggested-container flex wrap"},hn={key:1},mn=o("h4",null,"Results",-1),pn={class:"search-results flex wrap"},gn=["onClick"],kn=["src"];function bn(t,e,r,d,a,s){return i(),l("section",ln,[o("input",{ref:"filterBy",onInput:e[0]||(e[0]=(...n)=>s.searchImg&&s.searchImg(...n)),class:"img-search-input",type:"text",placeholder:"Search for photos"},null,544),a.isSearching?m("",!0):(i(),l("section",dn,[cn,o("div",un,[o("button",{onClick:e[1]||(e[1]=n=>s.setSuggestSearch("Perspective")),class:"btn-search-opt"},"Perspective"),o("button",{onClick:e[2]||(e[2]=n=>s.setSuggestSearch("Productivity")),class:"btn-search-opt"},"Productivity"),o("button",{onClick:e[3]||(e[3]=n=>s.setSuggestSearch("Oraganization")),class:"btn-search-opt"},"Oraganization"),o("button",{onClick:e[4]||(e[4]=n=>s.setSuggestSearch("Colorful")),class:"btn-search-opt"},"Colorful"),o("button",{onClick:e[5]||(e[5]=n=>s.setSuggestSearch("Nature")),class:"btn-search-opt"},"Nature"),o("button",{onClick:e[6]||(e[6]=n=>s.setSuggestSearch("Business")),class:"btn-search-opt"},"Business"),o("button",{onClick:e[7]||(e[7]=n=>s.setSuggestSearch("Minimal")),class:"btn-search-opt"},"Minimal"),o("button",{onClick:e[8]||(e[8]=n=>s.setSuggestSearch("Space")),class:"btn-search-opt"},"Space"),o("button",{onClick:e[9]||(e[9]=n=>s.setSuggestSearch("Animals")),class:"btn-search-opt"},"Animals")])])),a.res?(i(),l("section",hn,[mn,o("section",pn,[(i(!0),l(v,null,C(a.res,n=>(i(),l("div",{onClick:c=>s.setImg(n),class:"res-container",key:n},[o("img",{src:n.small,alt:""},null,8,kn)],8,gn))),128))])])):m("",!0)])}var _n=k(nn,[["render",bn]]);const fn={name:"task-details",async created(){this.currTaskId=this.$route.params.taskId,this.parentGroupId=this.$route.params.groupId,this.parentGroupName=this.$store.getters.currBoard.groups.find(r=>r.id===this.parentGroupId).title;const{groupId:t,taskId:e}=this.$route.params;await this.$store.dispatch({type:"loadCurrTask",groupId:t,taskId:e})},data(){return{editModalStatus:{isOpen:!1,editType:"",pos:null,title:""},isDeleteContentTeleported:!1,isEditModalMounted:!1,currTaskId:"",parentGroupId:"",parentGroupName:""}},mounted(){},methods:{checkImg(){return this.currTask.style.bg.split("")[0]!=="#"},openSearch(){this.editModalStatus.editType="search-photo"},async saveCurrTask(t=null){const e=t||this.currTask;await this.$store.dispatch({type:"saveTask",groupId:this.parentGroupId,taskToSave:JSON.parse(JSON.stringify(e))}),console.log("Current task saved!")},async removeTask(){const t=this.$route.params.groupId,e=await this.$store.dispatch({type:"removeTask",groupId:t,taskId:this.currTask.id});this.$router.push(`/board/${e._id}`)},updateDesc(t){console.log("updatedDesc",t),this.currTask.description=t,this.saveCurrTask()},updateChecklist(t){const e=this.currTask.checklists.findIndex(r=>r.id===t.id);this.currTask.checklists[e]=t,this.saveCurrTask()},updateLabel(t){t=JSON.parse(JSON.stringify(t)),this.$store.dispatch({type:"updateLabel",label:t})},removeChecklist(t){this.currTask.checklists.splice(t,1),this.saveCurrTask()},updateComments(t){this.currTask.comments=t,this.saveCurrTask()},updateAttachments(t){this.currTask.attachments=t,this.saveCurrTask()},closeModal(){this.saveCurrTask();const t=this.$route.params.boardId;this.$router.push({name:"board",params:{boardId:t}})},openDeleteModal(t){this.isDeleteContentTeleported=!0,this.openEditModal(t,"teleportContainer","Delete card?")},openEditModal(t,e,r=""){console.log("event",t);var d;if(!t)d=this.pos;else{const s=t.target.getBoundingClientRect();d={x:s.x,y:s.y-s.height-10}}if(!r)switch(e){case"labels-edit":case"labelsEdit":r="Labels";break;case"members-edit":case"membersEdit":r="Members";break;case"checklists-edit":case"checklistsEdit":r="Add checklist";break;case"date-edit":case"dateEdit":r="Dates";break;case"attachment-edit":case"attachmentEdit":r="Attach from computer";break;case"cover-edit":case"coverEdit":r="Cover";break;case"search-photo":case"searchPhoto":r="Photo search"}console.log("title",r);const a={isOpen:!0,editType:e,pos:d,title:r};this.editModalStatus=a},closeEditModal(){this.editModalStatus={isOpen:!1,editType:"",pos:null,title:""}}},computed:{getCoverClr(){return`background-color: ${this.currTask.style.bg} !important`},boardLabels(){return this.$store.getters.currBoardLabels},hasLabels(){return this.currTaskLabels&&this.currTaskLabels.length>0},hasMembers(){if(!!this.currTask)return this.currTask.members&&this.currTask.members.length>0},hasAttachments(){return this.currTask.attachments&&this.currTask.attachments.length},currTask(){return this.$store.getters.getCurrTask},currTaskLabels(){return!this.currTask.labelIds||!this.currTask.labelIds.length?[]:this.boardLabels.filter(t=>this.currTask.labelIds.includes(t.id))}},watch:{isEditModalMounted(t){t||(this.isDeleteContentTeleported=!1)}},components:{mainEditModal:Vr,trelloLabels:or,trelloMembers:cr,activityLog:Er,trelloChecklist:Ir,trelloTxtInput:Q,trelloDates:Fr,labelsEdit:oo,membersEdit:ho,checklistsEdit:vo,dateEdit:Bo,attachmentEdit:qo,trelloAttachments:na,coverEdit:Xa,teleportContainer:rn,searchPhoto:_n}},yn={key:0,class:"task-details"},vn={class:"modal-screen flex center"},Cn={class:"modal-container flex column center"},Tn={key:1,class:"cover"},Sn=["src"],En={class:"modal-header section-title text-l icon-task-title"},Bn={class:"group-data"},Mn=S(" in list "),wn={class:"flex-container flex space-between"},On={class:"modal-main"},xn={key:0,class:"notations flex wrap"},An={key:1,class:"gutter"},$n={class:"description"},Dn=o("span",{class:"section-title text-m icon-description"},"Description",-1),In={key:2,class:"attachments"},Ln={key:3,class:"checklists"},Un={class:"activity-log"},Nn={class:"modal-sidebar flex column"},Gn=o("span",{class:"secondary-section-title"},"Add to card",-1),Jn=o("span",{class:"secondary-section-title"},"Actions",-1),zn=o("p",{class:"msg"},"All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo.",-1);function jn(t,e,r,d,a,s){const n=p("trello-members"),c=p("trello-labels"),u=p("trello-dates"),b=p("trello-txt-input"),D=p("trello-attachments"),P=p("trello-checklist"),R=p("activity-log"),A=p("main-edit-modal"),O=G("clickoutside");return s.currTask?(i(),l("section",yn,[o("div",vn,[T((i(),l("div",Cn,[m("",!0),s.currTask.style?(i(),l("div",Tn,[s.currTask.style&&s.currTask.style.bg.split("")[0]!=="#"?(i(),l("img",{key:0,src:s.currTask.style.bg,alt:""},null,8,Sn)):(i(),l("div",{key:1,style:y(s.getCoverClr),class:"cover-clr"},null,4))])):m("",!0),o("button",{class:"exit-btn",onClick:e[0]||(e[0]=(...g)=>s.closeModal&&s.closeModal(...g))}),o("div",En,[S(_(s.currTask.title)+" ",1),o("div",Bn,[Mn,o("a",{onClick:e[1]||(e[1]=E(()=>{},["prevent"])),href:"#"},_(a.parentGroupName),1)])]),o("div",wn,[o("div",On,[s.hasMembers||s.hasLabels||s.currTask.dueDate?(i(),l("div",xn,[s.hasMembers?(i(),M(n,{key:0,members:s.currTask.members,onEditModalOpened:s.openEditModal},null,8,["members","onEditModalOpened"])):m("",!0),s.hasLabels?(i(),M(c,{key:1,labels:s.currTaskLabels,onEditModalOpened:s.openEditModal},null,8,["labels","onEditModalOpened"])):m("",!0),s.currTask.dueDate?(i(),M(u,{key:2,dueDate:s.currTask.dueDate,status:s.currTask.status,onEditModalOpened:s.openEditModal},null,8,["dueDate","status","onEditModalOpened"])):m("",!0)])):(i(),l("div",An)),o("div",$n,[Dn,h(b,{class:"make-btn",txt:s.currTask.description,placeholder:"Add a more detailed description\u2026",onTxtSaved:s.updateDesc,onTxtIsEmpty:s.updateDesc},null,8,["txt","onTxtSaved","onTxtIsEmpty"])]),s.hasAttachments?(i(),l("div",In,[h(D,{attachments:s.currTask.attachments,isEditModalMounted:a.isEditModalMounted,onEditModalOpened:e[2]||(e[2]=g=>s.openEditModal(g,"attachmentEdit")),onTeleportContainerOpened:e[3]||(e[3]=g=>s.openEditModal(g,"teleportContainer","Delete attachment?")),onUpdated:s.updateAttachments},null,8,["attachments","isEditModalMounted","onUpdated"])])):m("",!0),(i(),l("div",Ln,[(i(!0),l(v,null,C(s.currTask.checklists,(g,ke)=>(i(),M(P,{key:g.id,checklist:g,isEditModalMounted:a.isEditModalMounted,onUpdated:s.updateChecklist,onRemoved:te=>s.removeChecklist(ke),onEditModalClosed:s.closeEditModal,onTeleportContainerOpened:e[4]||(e[4]=te=>s.openEditModal(te,"teleportContainer","Delete Checklist?"))},null,8,["checklist","isEditModalMounted","onUpdated","onRemoved","onEditModalClosed"]))),128))])),o("div",Un,[h(R,{comments:s.currTask.comments,onUpdated:s.updateComments},null,8,["comments","onUpdated"])])]),o("div",Nn,[Gn,o("button",{class:"btn side-bar icon-members",onClick:e[5]||(e[5]=g=>s.openEditModal(g,"members-edit"))},"Members"),o("button",{class:"btn side-bar icon-labels",onClick:e[6]||(e[6]=g=>s.openEditModal(g,"labels-edit"))},"Labels"),o("button",{class:"btn side-bar icon-checklist",onClick:e[7]||(e[7]=g=>s.openEditModal(g,"checklists-edit"))},"Checklist"),o("button",{class:"btn side-bar icon-dates",onClick:e[8]||(e[8]=g=>s.openEditModal(g,"date-edit"))},"Dates"),o("button",{class:"btn side-bar icon-attachment",onClick:e[9]||(e[9]=g=>s.openEditModal(g,"attachment-edit"))},"Attachment"),o("button",{class:"btn side-bar icon-cover",onClick:e[10]||(e[10]=g=>s.openEditModal(g,"cover-edit"))},"Cover"),Jn,o("button",{class:"btn side-bar icon-copy",onClick:e[11]||(e[11]=g=>s.openEditModal(g,"copy-edit"))},"Copy"),o("button",{class:"btn delete-btn side-bar icon-delete",onClick:e[12]||(e[12]=(...g)=>s.openDeleteModal&&s.openDeleteModal(...g))},"Delete")])]),h(W,{"enter-active-class":"animate__animated animate__fadeIn animate__faster","leave-active-class":"animate__animated animate__fadeOut animate__faster"},{default:f(()=>[a.editModalStatus.isOpen?(i(),M(A,{key:0,"modal-title":a.editModalStatus.title,onEditModalClosed:s.closeEditModal,pos:a.editModalStatus.pos,onMounted:e[15]||(e[15]=g=>this.isEditModalMounted=!0),onUnmounted:e[16]||(e[16]=g=>this.isEditModalMounted=!1)},{default:f(()=>[(i(),M(Te(a.editModalStatus.editType),{currTask:s.currTask,onTaskUpdated:s.saveCurrTask,onEditModalClosed:s.closeEditModal,onLabelUpdated:s.updateLabel,onOpenSearch:e[13]||(e[13]=g=>s.openEditModal(void 0,"search-photo")),onCloseSearch:e[14]||(e[14]=g=>s.openEditModal(void 0,"cover-edit"))},null,8,["currTask","onTaskUpdated","onEditModalClosed","onLabelUpdated"]))]),_:1},8,["modal-title","onEditModalClosed","pos"])):m("",!0)]),_:1}),a.isDeleteContentTeleported&&a.isEditModalMounted?(i(),M(K,{key:2,to:".teleport-container"},[zn,o("button",{onClick:e[17]||(e[17]=(...g)=>s.removeTask&&s.removeTask(...g)),class:"delete-btn btn"},"Delete")])):m("",!0)])),[[O,s.closeModal]])])])):m("",!0)}var Fn=k(fn,[["render",jn]]);const qn={data(){return{user:{username:null,password:null}}},methods:{async login(){try{await this.$store.dispatch({type:"login",userCred:this.user})&&this.$router.push("/board/624afa5e47cdb81018c1bc99")}catch(t){console.log("ERROR: cannot login. User and/or password are incorrect",t);const e={txt:"Invalid username or password",type:"error"};await this.$store.dispatch({type:"showMsg",msg:e})}}}},Pn={class:"login-signup"},Rn={class:"header-home"},Hn=o("div",{class:"logo"},[o("span",{class:"material-icons-outlined logo-icon"}),S("Mello ")],-1),Vn={class:"homepage-nav"},Zn=S("Home"),Wn=o("span",null," | ",-1),Kn=S("Sign up"),Yn={class:"main-container login-container"},Qn=o("p",null,"Log in to Mello",-1),Xn=o("button",{class:"login"},"Log in",-1),ei=S("Sign up for an account");function ti(t,e,r,d,a,s){const n=p("router-link");return i(),l("div",Pn,[o("section",Rn,[Hn,o("nav",Vn,[h(n,{to:"/",class:"login"},{default:f(()=>[Zn]),_:1}),Wn,h(n,{to:"/signup",class:"signup"},{default:f(()=>[Kn]),_:1})])]),o("div",Yn,[Qn,o("form",{onSubmit:e[2]||(e[2]=E((...c)=>s.login&&s.login(...c),["prevent"]))},[T(o("input",{type:"text",name:"username","onUpdate:modelValue":e[0]||(e[0]=c=>a.user.username=c),placeholder:"Enter username",required:""},null,512),[[w,a.user.username]]),T(o("input",{type:"password",name:"password","onUpdate:modelValue":e[1]||(e[1]=c=>a.user.password=c),placeholder:"Enter password",required:""},null,512),[[w,a.user.password]]),Xn],32),h(n,{class:"btn-signup",to:"/signup"},{default:f(()=>[ei]),_:1})])])}var si=k(qn,[["render",ti]]);const ri={data(){return{user:{fullname:null,username:null,email:null,password:null,imgUrl:"",mentions:[]},isLoading:!1,isLoaded:!1}},methods:{async onUploadImg(t){try{this.isLoading=!0;const e=await uploadImg(t);this.user.imgUrl=e.url,this.isLoaded=!0}catch(e){throw console.log("cannot upload image",e),e}finally{this.isLoading=!1}},async signup(){await this.$store.dispatch({type:"signup",userCred:this.user}),this.$router.push("/board/624afa5e47cdb81018c1bc99")}}},oi={class:"login-signup"},ai={class:"header-home"},ni=o("div",{class:"logo"},[o("span",{class:"material-icons-outlined logo-icon"}),S("Mello ")],-1),ii={class:"homepage-nav"},li=S("Home"),di=o("span",null," | ",-1),ci=S("Log in"),ui={class:"main-container"},hi=o("p",null,"Sign up for your account",-1),mi={key:0},pi=o("button",null,"Sign up",-1),gi=S("Already have an account? Log in");function ki(t,e,r,d,a,s){const n=p("router-link");return i(),l("div",oi,[o("section",ai,[ni,o("nav",ii,[h(n,{to:"/",class:"login"},{default:f(()=>[li]),_:1}),di,h(n,{to:"/login",class:"signup"},{default:f(()=>[ci]),_:1})])]),o("div",ui,[hi,o("form",{onSubmit:e[4]||(e[4]=E((...c)=>s.signup&&s.signup(...c),["prevent"]))},[T(o("input",{type:"text",name:"fullname","onUpdate:modelValue":e[0]||(e[0]=c=>a.user.fullname=c),placeholder:"Enter full name",autocomplete:"off",required:""},null,512),[[w,a.user.fullname]]),T(o("input",{type:"text",name:"username","onUpdate:modelValue":e[1]||(e[1]=c=>a.user.username=c),placeholder:"Enter username",autocomplete:"off",required:""},null,512),[[w,a.user.username]]),T(o("input",{type:"email",name:"email","onUpdate:modelValue":e[2]||(e[2]=c=>a.user.email=c),placeholder:"Enter email",required:""},null,512),[[w,a.user.email]]),T(o("input",{type:"password",name:"password","onUpdate:modelValue":e[3]||(e[3]=c=>a.user.password=c),placeholder:"Enter password",required:""},null,512),[[w,a.user.password]]),o("div",null,[a.isLoading?(i(),l("div",mi," Loading image... ")):m("",!0)]),pi],32),h(n,{class:"btn-signup",to:"/login"},{default:f(()=>[gi]),_:1})])])}var bi=k(ri,[["render",ki]]);const me=Se({history:Ee("/"),routes:[{path:"/",name:"home",component:ot},{path:"/board",name:"boards",component:yt},{path:"/board/:boardId",name:"board",component:Qs,children:[{path:"task/:groupId/:taskId",name:"task-details",component:Fn}]},{path:"/login",name:"Login",component:si},{path:"/signup",name:"Signup",component:bi}]}),_i="/api/";var fi=de.create({withCredentials:!0});const I={get(t,e){return F(t,"GET",e)},post(t,e){return F(t,"POST",e)},put(t,e){return F(t,"PUT",e)},delete(t,e){return F(t,"DELETE",e)}};async function F(t,e="GET",r=null){try{return(await fi({url:`${_i}${t}`,method:e,data:r,params:e==="GET"?r:null})).data}catch(d){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,r),console.dir(d),d.response&&d.response.status===401&&me.push("/login"),d}}const yi="user-watch",ne="board updated",ie="user-updated",vi="",L=Ci();window.socketService=L;L.setup();function Ci(){var t=null;return{async setup(){t=Be(vi),console.log("socket",t)},on(r,d){t.on(r,d)},off(r,d=null){!t||(d?t.off(r,d):t.removeAllListeners(r))},emit(r,d){t.emit(r,d)},terminate(){t=null}}}const X="loggedinUser";q({_id:"6245e54524c152b7c822ae91",fullname:"Amit Miz",username:"amit",password:"123",imgUrl:"https://ca.slack-edge.com/T02L3AYJGN4-U02K3QJLCBH-762de20f3035-512",isAdmin:!1});const $={login:Ei,logout:Mi,signup:Bi,getLoggedinUser:ee,getUsers:Ti,getById:pe,remove:Si,update:ge,changeScore:wi,getMiniUser:Oi};window.userService=$;function Ti(){return I.get("user")}async function pe(t){return await I.get(`user/${t}`)}function Si(t){return I.delete(`user/${t}`)}async function ge(t){return t=await I.put(`user/${t._id}`,t),ee()._id===t._id&&q(t),t}async function Ei(t){try{const e=await I.post("auth/login",t);if(e)return q(e)}catch(e){throw console.log("userService: Error in login user",e),e}}async function Bi(t){try{const e=await I.post("auth/signup",t);return q(e)}catch(e){throw console.log("userService: Error in signup user",e),e}}async function Mi(){return sessionStorage.removeItem(X),await I.post("auth/logout")}async function wi(t){const e=ee();if(!e)throw new Error("Not loggedin");return e.score=e.score+t||t,await ge(e),e.score}function q(t){return sessionStorage.setItem(X,JSON.stringify(t)),t}function ee(){const t=JSON.parse(sessionStorage.getItem(X)||"null");return delete t._id,t}async function Oi(t){try{const e=await pe(t);return{_id:e._id,username:e.username,fullname:e.fullname,imgUrl:e.imgUrl}}catch(e){throw console.log("userService: Error in getById user",e),e}}const U={query:xi,getById:Ai,remove:$i,save:Di,getEmptyBoard:Ii,getEmptyTask:Ui,getEmptyGroup:Li};async function xi(){try{return await I.get("board")}catch(t){console.log("query had an error",t)}}async function Ai(t){try{return await I.get(`board/${t}`)}catch(e){console.log("Error:",e)}}async function $i(t){try{return await I.get(`board/${t}`)}catch(e){console.log("Error:",e)}}async function Di(t){try{return t._id?await I.put("board",t):await I.post("board",t)}catch(e){console.log("Error:",e)}}async function Ii(){return{title:"",createdAt:Date.now(),createdBy:{},style:{bgImg:["https://res.cloudinary.com/dxj8szufc/image/upload/v1648812004/bg/bg6_hsbmsz.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648812001/bg/bg2_mz8ugr.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648812000/bg/bg3_dmcjgv.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811997/bg/bg5_pkzq9o.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811995/bg/bg4_mvddif.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811991/bg/bg7_tbhddd.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811988/bg/bg_iyfy8d.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811985/bg/bg1_xzp635.jpg","#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc"]},labels:[{id:"l101",title:"",color:"#61bd4f"},{id:"l102",title:"",color:"#f2d600"},{id:"l103",title:"",color:"#ff9f1a"},{id:"l104",title:"",color:"#eb5a46"},{id:"l105",title:"",color:"#c377e0"},{id:"l106",title:"",color:"#0079bf"},{id:"l107",title:"",color:"#00c2e0"},{id:"l108",title:"",color:"#51e898"},{id:"l109",title:"",color:"#ff78cb"},{id:"l110",title:"",color:"#344563"}],members:[],groups:[],activities:[]}}function Li(){return{id:"",title:"",tasks:[],style:{}}}function Ui(){const{_id:t,fullname:e,imgUrl:r}=$.getLoggedinUser();return{id:B.makeId(),title:"",status:"",description:"",createdAt:Date.now(),dueDate:null,byMember:{_id:t,fullname:e,imgUrl:r}}}const Ni={data(){return{board:U.getEmptyBoard(),colors:[],imgs:[],selectImg:"",selectColor:""}},created(){this.renderColors()},methods:{renderColors(){this.colors=[];for(var t=0;t<9;t++)this.colors.push(B.getRandomColor())},closeCompose(t){t.target.className==="board-compose-container"&&this.$emit("closeCompose")},async createBoard(){this.board.style={"background-color":this.selectColor,"background-image":`url(${this.selectImg})`},this.board.createdAt=Date.now();try{const t=this.$store.getters.loggedinUser._id,e=await this.$store.dispatch({type:"getMiniUser",userId:t});this.board.createdBy=e,this.board.members=[e],this.$emit("addBoard",this.board)}catch(t){console.log("failed to get miniLoggedInUser",t)}},close(){this.$emit("closeCompose")},setBcg(t){this.selectImg="",this.selectColor=t,this.board.style={"background-color":t}},setimg(t){this.selectColor="",this.selectImg=t,this.board.style={"background-image:":`url(${t})`}}},destroyed(){this.colors=[]}},Gi={class:"board-compose"},Ji=S("Create board"),zi=S("Change Colors"),ji={class:"backgrounds"},Fi={class:"board-compose-imgs"},qi=["onClick"],Pi={class:"board-compose-bgcs"},Ri=["onClick"];function Hi(t,e,r,d,a,s){const n=p("el-input"),c=p("el-button");return i(),l("div",{class:"board-compose-container",onClick:e[2]||(e[2]=(...u)=>s.closeCompose&&s.closeCompose(...u))},[o("div",Gi,[o("div",{class:"board-compose-preview",style:y({backgroundColor:a.selectColor,backgroundImage:`url(${a.selectImg})`})},[o("span",{onClick:e[0]||(e[0]=(...u)=>s.close&&s.close(...u))},"close"),h(n,{placeholder:"Add board title",modelValue:a.board.title,"onUpdate:modelValue":e[1]||(e[1]=u=>a.board.title=u),onKeyup:H(s.createBoard,["enter","native"])},null,8,["modelValue","onKeyup"]),h(c,{onClick:s.createBoard,type:"primary",disabled:!a.board.title,class:"compose-btn"},{default:f(()=>[Ji]),_:1},8,["onClick","disabled"]),h(c,{onClick:s.renderColors,type:"primary",class:"compose-btn change-colors"},{default:f(()=>[zi]),_:1},8,["onClick"])],4),o("section",ji,[o("div",Fi,[(i(!0),l(v,null,C(a.imgs,(u,b)=>(i(),l("span",{key:b,style:y({backgroundImage:`url(${u})`}),onClick:D=>s.setimg(u)},null,12,qi))),128))]),o("div",Pi,[(i(!0),l(v,null,C(a.colors,(u,b)=>(i(),l("span",{key:b,style:y({backgroundColor:u}),onClick:D=>s.setBcg(u)},null,12,Ri))),128))])])])])}var Vi=k(Ni,[["render",Hi]]);const Zi={props:{boards:{type:Array,required:!0}},data(){return{recentBoards:null,listClose:[],searchBoard:""}},created(){this.$store.getters.currBoard&&this.$store.commit({type:"addBoardToRecentBoards",board:this.$store.getters.currBoard}),this.recentBoards=this.$store.getters.recentBoards},mounted(){this.$refs.searchBoard.focus()},methods:{closeBoardList(){this.$emit("closeBoardList")},openBoard(t){this.$store.commit({type:"addBoardToRecentBoards",board:t}),(!this.$store.getters.currBoard||t._id!==this.$store.getters.currBoard._id)&&(this.$emit("setBackground",t.style),this.$store.commit({type:"setCurrBoard",board:t}),this.$router.push(`/b/${t._id}`)),this.closeBoardList()},toggleListClose(t){const e=this.listClose.findIndex(r=>r===t);e===-1?this.listClose.push(t):this.listClose.splice(e,1)},setFilter(){this.$store.commit({type:"setFilterBy",filterBy:{txt:this.searchBoard}})}},computed:{borads(){return this.boards.filter(t=>t.isStarred)},boardsAfterFilter(){return this.$store.getters.boardsToShow}}},Wi={key:0},Ki={key:0},Yi=o("h2",{class:"title"},[o("span",null,"BOARDS")],-1),Qi={key:0},Xi=["onClick"],el=o("h2",null,[o("span",null,"RECENT BOARDS")],-1),tl={key:0},sl=["onClick"],rl=o("h2",null,[o("span",null,"ALL BOARDS")],-1),ol={key:0},al=["onClick"],nl={key:1},il=["onClick"];function ll(t,e,r,d,a,s){return i(),l("section",null,[o("header",null,[T(o("input",{ref:"searchBoard",class:"input-search-boards",type:"text",placeholder:"Find boards by name...","onUpdate:modelValue":e[0]||(e[0]=n=>a.searchBoard=n),onInput:e[1]||(e[1]=(...n)=>s.setFilter&&s.setFilter(...n))},null,544),[[w,a.searchBoard]]),o("span",{onClick:e[2]||(e[2]=(...n)=>s.closeBoardList&&s.closeBoardList(...n))},"close")]),o("main",null,[a.searchBoard?(i(),l("section",nl,[o("div",null,[(i(!0),l(v,null,C(s.boardsAfterFilter,n=>(i(),l("article",{key:n._id,class:"board-preview",onClick:c=>s.openBoard(n)},null,8,il))),128))])])):(i(),l("section",Wi,[s.borads.length?(i(),l("div",Ki,[Yi,a.listClose.includes("borads")?m("",!0):(i(),l("div",Qi,[(i(!0),l(v,null,C(s.borads,n=>(i(),l("article",{key:n._id,class:"board-preview",onClick:c=>s.openBoard(n)}," > ",8,Xi))),128))]))])):m("",!0),o("div",null,[el,a.listClose.includes("recentBoards")?m("",!0):(i(),l("div",tl,[(i(!0),l(v,null,C(a.recentBoards,n=>(i(),l("article",{key:n._id,onClick:c=>s.openBoard(n)},null,8,sl))),128))]))]),o("div",null,[rl,a.listClose.includes("boards")?m("",!0):(i(),l("div",ol,[(i(!0),l(v,null,C(r.boards,n=>(i(),l("article",{key:n._id,class:"board-preview",onClick:c=>s.openBoard(n)},null,8,al))),128))]))])]))])])}var dl=k(Zi,[["render",ll]]);const cl={props:{user:{type:Object,required:!0}},data(){return{}},methods:{close(){this.$emit("close")},logout(){this.$emit("logout")}},components:{userAvatar:J}},ul={class:"user-menu"},hl={class:"group-edit-header"},ml=o("span",null,"Account",-1),pl={class:"account-info"},gl={class:"account-details"},kl={class:"username"};function bl(t,e,r,d,a,s){const n=p("user-avatar");return i(),l("section",ul,[o("div",hl,[ml,o("span",{onClick:e[0]||(e[0]=E((...c)=>s.close&&s.close(...c),["stop"])),class:"close"},"X")]),o("div",pl,[h(n,{size:32,username:r.user.fullname,src:r.user.imgUrl,backgroundColor:"#DFE1E6",color:"#172b4d"},null,8,["username","src"]),o("div",gl,[o("span",null,_(r.user.fullname),1),o("span",kl," ( "+_(r.user.username)+" )",1)])]),o("div",{class:"logout",onClick:e[1]||(e[1]=(...c)=>s.logout&&s.logout(...c))},"Log out")])}var _l=k(cl,[["render",bl]]),fl="/assets/boardAdd.76c3902e.svg";const yl={props:{menuOpen:Boolean},data(){return{boardToAdd:null,boardBg:"#0079bf"}},components:{customMenu:Y},async created(){const t=await this.$store.dispatch({type:"getEmptyBoard"});this.boardToAdd=t},mounted(){},methods:{setBg(t){this.boardBg=t,console.log(t),console.log(this.$refs);for(const e in this.$refs)this.boardBg===e?e.split("")[0]==="#"?this.$refs[e][0].classList.value="bg-opt clr checked":this.$refs[e][0].classList.value="bg-opt checked":e.split("")[0]==="#"?this.$refs[e][0].classList.value="bg-opt clr":this.$refs[e][0].classList.value="bg-opt"},closeMenu(){this.$emit("closeMenu")},getStyle(t){return`background-color: ${t}`},getClass(){this.$refs.title.value?this.$refs.btn.classList.value="enable":this.$refs.btn.classList.value="disable"},async saveBoard(){if(!this.$refs.title.value)return;this.boardToAdd.title=this.$refs.title.value,this.boardToAdd.style.bg=this.boardBg;const t=this.$store.getters.loggedinUser;this.boardToAdd.createdBy={_id:t._id,fullname:t.fullname,imgUrl:"http://some-img"},delete this.boardToAdd.style.bgImg;const e=await this.$store.dispatch({type:"saveCurrBoard",boardToSave:this.boardToAdd});this.boardToAdd=await this.$store.dispatch({type:"getEmptyBoard"}),this.$router.push(`/board/${e._id}`)}},computed:{getBg(){if(this.boardBg)return this.boardBg.split("")[0]==="#"?`background-color: ${this.boardBg}`:`background-image: url(${this.boardBg})`}}},vl={class:"board-add-menu"},Cl=o("p",null,"Create board",-1),Tl=o("hr",null,null,-1),Sl={class:"board-add-container flex align-center column"},El=o("img",{class:"board-image",src:fl,alt:""},null,-1),Bl=[El],Ml={class:"bg-selector"},wl=o("p",null,"Background",-1),Ol={class:"btn-bg-container flex wrap"},xl=["onClick","idx"],Al=["src"],$l=o("p",null,[S("Board title "),o("span",null,"*")],-1),Dl=o("div",{class:"emoticon"},"\u{1F44B} Board title is required",-1);function Il(t,e,r,d,a,s){const n=p("custom-menu"),c=G("focus");return i(),l("section",vl,[h(n,{menuOpen:r.menuOpen},{default:f(()=>[Cl,o("button",{onClick:e[0]||(e[0]=(...u)=>s.closeMenu&&s.closeMenu(...u)),class:"close",title:"Close"}),Tl,o("section",Sl,[o("div",{style:y(s.getBg),class:"board-image-container flex center align-center"},Bl,4),o("div",Ml,[wl,o("div",Ol,[(i(!0),l(v,null,C(a.boardToAdd.style.bgImg,(u,b)=>(i(),l("label",{key:b,onClick:E(D=>s.setBg(u),["stop"]),idx:b},[u.split("")[0]!=="#"?(i(),l("img",{key:0,class:"bg-opt",src:u,alt:"",ref_for:!0,ref:u},null,8,Al)):m("",!0),u.split("")[0]=="#"?(i(),l("div",{key:1,style:y(s.getStyle(u)),class:"bg-opt clr",ref_for:!0,ref:u},null,4)):m("",!0)],8,xl))),128)),$l,o("form",{action:"submit",onSubmit:e[4]||(e[4]=E(()=>{},["prevent"]))},[T(o("input",{required:"",ref:"title",onFocus:e[1]||(e[1]=(...u)=>s.getClass&&s.getClass(...u)),onInput:e[2]||(e[2]=(...u)=>s.getClass&&s.getClass(...u)),placeholder:"   ",type:"text"},null,544),[[c]]),Dl,o("button",{ref:"btn",type:"submit",onClick:e[3]||(e[3]=(...u)=>s.saveBoard&&s.saveBoard(...u))},"Create",512)],32)])])])]),_:1},8,["menuOpen"])])}var le=k(yl,[["render",Il]]),Ll="/assets/boards.b440fffa.png",Ul="data:image/gif;base64,R0lGODlhOAFAAHAAACH5BAEAAAIALAAAAAA4AUAAgQAAAP///wAAAAAAAAL/lB+py+0P3Zm02ouz3rz7D2KR0o1BiKaIybbuqcbyTNceW472Pr3+L+EJh8QijmMq0oDMpvIJjSKT04gU1cwCr9yu8riheqvasljY4rnGKbDmzBaZ51a0r/aLf9wZuL5CFxi0szVT+Bfmd6GIaCD4SEJ4GDPZuMgIqGOZCSmoxmSYtymnmVg3utIZ+FkZAopqwUcKAZuqOscqqvJa24NJ8fsXbNuQc4rntNtaK3t5jFpKtrD3HMrret0r0BwbDV3dNyhdLJlNvQzLzUnb6/0mbvqQix5/p00sP07ODD47fdNPWTIQWYZEWjLMkTtkCQTmM8bg3EOG5vStsbYQYMZ1/xNlXLR40KJEeBgrvjMJ8SPBhNs2arR3smPMfyn3UUTpTAJLjrpesqtHciQ9hT9F+rSJsKDQaTt9aVnp0mlRqE/9IZ0ZEmjEcrR26mhK1MzRoN0CYq3Kc2vNhmNp3tQZVSpcs2XprL2aUyZIpcDo9sVrVe3bYl7ZNe20N2tgwXfF/tW7eKnbpIbjtqzsF59drYDTMuaM6zHZvIrDTS0ZJKEmlrdgmM58+fRrxHI71518FrfH1ZZPqX6hWbZoyJ51L/YUvHTktsodPgxW6je3NLOJD7d9HVLtz9XZNvY+WC1033GpHzeeHH129euDAg87+nZz+dwpRY96bJi67fXTz6rnz55/6n1kWXCS/YdNfhtFM16B++0HIILwCRfhVgVOCB5oGaJmEybPNAjbg6w5OCIVF8bWX3sb7qZgQB/id6GIJGZmnoaRnNjaPPAo4s0vEFa4ooCu5RYgitYV9w+Ot+iIFI+n+aikSz9imKKQVOUTJW02wCFLNVDCZmR8YWInYGJDfkdCltpxJROXXko5I4xxHkllkSo2pOYjTH7mpl5fZtQTfWTWKSFYY/9GlCdyWy50Bjh/5kiknfoZikOiq7Dp3n2yPbpkpBIeiuCUd55g6WaLOqopWZxq2d2goAYJ5Jlmkgrmq2XsaZyJwq2qqI2w3umrrMG+emBop+76VT+8mjormsIi+Stpc9EZK1/h5ZosccuiVeyn0lF4Xpq1Qnqstla4COeL1HoabZm+JnjuuJ2WO5q1wIb7rEElgmtltzDsyypl5g617accuvotv6MS2hpM186HU8HtPuxtb6La+m/DjtFrW8Ry1urcugCLfITGG1OcL8bYgQgyFiOLyXCoYJh8K6YrOywoeyqtFGzKQvqscsoE0mzvwTrjDC3Q76XUM3qBVrvi0kS2F82iwkvj2zSffqHz9M81xzy1wlfCfLW0VYLNrdmAIg21tWHj5PLWO+dcKLn4qsq21wOh/fbZYw9aI9azUp10Z3nr/XTfXdtH45SFBaw2hYcjXnbQik/s7+Bm+rt3q+BWTnfnlIdtR4hzwjzqUG0LPXfk9FweuMCo2+osvMyye/TFxt6tuL7yzk573LtrjjvQqYvNN833LE9r2sxJeuLoy09PvbN+j9WGq64bXH333n//BOYWFAAAOw==";const Nl={data(){return{boardMenuOpen:!1,user:null,bg:""}},components:{userAvatar:J,boardCompose:Vi,boardList:dl,userMenu:_l,boardAddMenu:le,BoardAddMenu:le},created(){this.user=this.$store.getters.loggedinUser},methods:{toggleBoardCompose(){this.isBoardComposeOn=!this.isBoardComposeOn},toggleBoardList(){this.isBoardListOpen=!this.isBoardListOpen},hideBoardList(){this.isBoardListOpen=!1},hideUserMenu(){this.isUserMenuOpen=!1},addBoard(t){this.$emit("addBoard",t),this.isBoardComposeOn=!1},setBackground(t){this.$emit("setBackground",t)},async logout(){await this.$store.dispatch({type:"logout"});const t={"background-color":"whitesmoke"};this.setBackground(t),this.$router.push("/")}},computed:{boards(){return this.$store.getters.boards},getClr(){}},watch:{"$route.params"(t){t.boardId?this.bg="#00000040":this.bg="#026AA7"}}},Gl=o("button",{class:"btn-boards",title:"Boards"},[o("img",{src:Ll,alt:""})],-1),Jl=o("button",{title:"Mello",class:"btn-logo"},[o("img",{src:Ul,alt:""})],-1),zl=o("button",{class:"btn-opt",title:"Recent"},[S("Recent "),o("img",{class:"img-arrow",src:ue,alt:""})],-1);function jl(t,e,r,d,a,s){const n=p("router-link"),c=p("board-add-menu"),u=p("user-avatar");return i(),l("section",{style:y({"background-color":`${a.bg}`}),class:"main-header"},[h(n,{to:"/board"},{default:f(()=>[Gl]),_:1}),h(n,{to:"/"},{default:f(()=>[Jl]),_:1}),zl,o("button",{onClick:e[0]||(e[0]=b=>a.boardMenuOpen=!a.boardMenuOpen),class:"btn-opt create",title:"Create"},"Create"),h(c,{onCloseMenu:e[1]||(e[1]=b=>a.boardMenuOpen=!1),menuOpen:a.boardMenuOpen},null,8,["menuOpen"]),h(u,{diameter:32,user:a.user},null,8,["user"])],4)}var Fl=k(Nl,[["render",jl]]);const ql={name:"app-vue",computed:{editModalStatus(){return this.$store.getters.editModalStatus}},components:{mainHeader:Fl}};function Pl(t,e,r,d,a,s){const n=p("main-header"),c=p("router-view");return i(),l("section",null,[h(n),h(c)])}var Rl=k(ql,[["render",Pl]]);const Hl={state:{loggedinUser:$.getLoggedinUser(),users:[],watchedUser:null},getters:{users({users:t}){return JSON.parse(JSON.stringify(t))},loggedinUser({loggedinUser:t}){return t},getMyMiniUser(t){const e=JSON.parse(JSON.stringify(t.loggedinUser));return delete e.email,delete e.mentions,e},watchedUser({watchedUser:t}){return t}},mutations:{setLoggedinUser(t,{user:e}){t.loggedinUser=e?oe({},e):null},setWatchedUser(t,{user:e}){t.watchedUser=e},setUsers(t,{users:e}){t.users=e},removeUser(t,{userId:e}){t.users=t.users.filter(r=>r._id!==e)},setUserScore(t,{score:e}){t.loggedinUser.score=e},updateUser(t,{user:e}){const r=t.users.findIndex(d=>d._id===e._id);t.users.splice(r,1,e)}},actions:{async login({commit:t},{userCred:e}){try{const r=await $.login(e);return t({type:"setLoggedinUser",user:r}),r}catch(r){throw console.log("userStore: Error in login",r),r}},async signup({commit:t},{userCred:e}){try{const r=await $.signup(e);return t({type:"setLoggedinUser",user:r}),r}catch(r){throw console.log("userStore: Error in signup",r),r}},async logout({commit:t}){try{await $.logout(),t({type:"setLoggedinUser",user:null})}catch(e){throw console.log("userStore: Error in logout",e),e}},async loadUsers({commit:t}){try{const e=await $.getUsers();t({type:"setUsers",users:e})}catch(e){throw console.log("userStore: Error in loadUsers",e),e}},async loadAndWatchUser({commit:t},{userId:e}){try{const r=await $.getById(e);t({type:"setWatchedUser",user:r}),L.emit(yi,e),L.off(ie),L.on(ie,d=>{t({type:"setWatchedUser",user:d})})}catch(r){throw console.log("userStore: Error in loadAndWatchUser",r),r}},async removeUser({commit:t},{userId:e}){try{await $.remove(e),t({type:"removeUser",userId:e})}catch(r){throw console.log("userStore: Error in removeUser",r),r}},async updateUser({commit:t},{user:e}){try{e=await $.update(e),t({type:"setUser",user:e})}catch(r){throw console.log("userStore: Error in updateUser",r),r}},async increaseScore({commit:t}){try{const e=await $.changeScore(100);t({type:"setUserScore",score:e})}catch(e){throw console.log("userStore: Error in increaseScore",e),e}},async signup({commit:t},{userCred:e}){try{const r=await $.signup(e);return t({type:"setLoggedinUser",user:r}),r}catch(r){throw console.log("userStore: Error in signup",r),r}},async signupAsGuest({commit:t,dispatch:e}){try{const r=await $.signupAsGuest();await e({type:"loadAndWatchUser",userId:r._id}),t({type:"setLoggedinUser",user:r})}catch(r){throw console.log("userStore: Error in signup As Guest",r),r}},async getMiniUser(t,{userId:e}){try{return await $.getMiniUser(e)}catch(r){throw console.log("userStore: Error in getById user",r),r}}}},Vl={state:{boards:[],currBoard:null,recentBoards:[],currTaskIdxs:null},getters:{boards(t){return JSON.parse(JSON.stringify(t.boards))},starBoards(t){return JSON.parse(JSON.stringify(t.boards.filter(e=>e.star)))},currBoard(t){return JSON.parse(JSON.stringify(t.currBoard))},currBoardLabels(t){return t.currBoard.labels},currBoardMembers(t){return t.currBoard.members},currBoardChecklists(t){const e=[];return t.currBoard.groups.forEach(r=>{r.tasks.forEach(d=>{!d.checklists||!d.checklists.length||e.push({taskId:d.id,taskTitle:d.title,checklists:d.checklists})})}),e},getCurrTask({currTaskIdxs:t,currBoard:e}){if(!t)return null;const{groupIdx:r,currTaskIdx:d}=t,a=e.groups[r].tasks[d];return JSON.parse(JSON.stringify(a))},recentBoards({recentBoards:t}){return t},cardEdit({cardEdit:t}){return t},boardsToShow(t){let e=new RegExp(t.filterBy.txt,"i");return t.boards.filter(r=>e.test(r.title))}},mutations:{setCurrTask(t,{currTaskIdx:e,groupIdx:r}){t.currTaskIdxs={currTaskIdx:e,groupIdx:r}},setCurrBoard(t,{currBoard:e}){t.currBoard=e},addBoardToRecentBoards(t,{board:e}){t.recentBoards.length>=5&&t.recentBoards.pop(),t.recentBoards=t.recentBoards.filter(r=>r._id!==e._id),t.recentBoards.unshift(e)},addBoard(t,{savedBoard:e}){t.boards.push(e)},loadBoards(t,{boards:e}){console.log(e),t.boards=e}},actions:{async loadCurrBoard(t,{boardId:e}){try{const r=await U.getById(e);return t.commit({type:"setCurrBoard",currBoard:r}),L.emit("watch board",r._id),L.off(ne),L.on(ne,d=>{console.log("board updated",d),t.commit({type:"setCurrBoard",currBoard:d})}),JSON.parse(JSON.stringify(r))}catch(r){console.error("Cannot load currBoard: ",r),t.dispatch({type:"flashUserMsg",msg:"Oops! Cannot load selected board...",style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async saveCurrBoard(t,{boardToSave:e}){const r=t.getters.currBoard;try{t.commit({type:"setCurrBoard",currBoard:e});const d=await U.save(e);return L.emit("board update",e),t.dispatch({type:"flashUserMsg",msg:`Board ${d._id} saved successfully`,style:"success"}),d}catch(d){t.commit({type:"setCurrBoard",currBoard:r}),console.error(`Cannot save board ${t.getters.currBoard._id}: `,d),t.dispatch({type:"flashUserMsg",msg:`Oops! Cannot save board ${t.getters.currBoard._id}...`,style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async updateGroup(t,{groupToSave:e}){console.log(e),t.commit({type:"setIsLoading",loadingStatus:!0});try{const r=t.getters.currBoard;if(e.id){const a=r.groups.findIndex(s=>s.id===e.id);r.groups.splice(a,1,e)}else e.id=B.makeId(),r.groups.push(e);const d=await t.dispatch({type:"saveCurrBoard",boardToSave:r});return L.emit("board update",r),d}catch(r){console.error(`Cannot save group ${t.getters.currBoard._Id}: `,r),t.dispatch({type:"flashUserMsg",msg:`Oops! Cannot save board ${t.getters.currBoard._id}...`,style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async copyGroup(t,{groupToSave:e}){t.commit({type:"setIsLoading",loadingStatus:!0});try{e.id=B.makeId();const r=t.getters.currBoard;return r.groups.push(e),await t.dispatch({type:"saveCurrBoard",boardToSave:r})}catch(r){console.error(`Cannot save group ${t.getters.currBoard._Id}: `,r),t.dispatch({type:"flashUserMsg",msg:`Oops! Cannot save board ${t.getters.currBoard._Id}...`,style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async getEmptyBoard(t){t.commit({type:"setIsLoading",loadingStatus:!0});try{return U.getEmptyBoard()}catch{console.error("Cannot get empty board: ",err),t.dispatch({type:"flashUserMsg",msg:"Oops! Cannot initiate a new board...",style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async loadCurrTask({commit:t,getters:e},{groupId:r,taskId:d}){const a=e.currBoard,s=a.groups.findIndex(c=>c.id===r),n=a.groups[s].tasks.findIndex(c=>c.id===d);t({type:"setCurrTask",groupIdx:s,currTaskIdx:n})},async getTaskById({getters:t},{groupId:e,taskId:r}){return t.currBoard.groups.find(n=>n.id===e).tasks.find(n=>n.id===r)},async saveTask(t,{groupId:e,taskToSave:r}){const d=t.getters.currBoard,a=d.groups.find(s=>s.id===e);if(r.id){const s=a.tasks.findIndex(n=>n.id===r.id);a.tasks[s]=r}else{debugger;r.id=B.makeId(),r.createdAt=Date.now(),console.log(a),a.tasks.push(r),console.log(a)}return t.dispatch({type:"saveCurrBoard",boardToSave:d})},async removeTask(t,{groupId:e,taskId:r}){const d=t.getters.currBoard,a=d.groups.find(n=>n.id===e),s=a.tasks.findIndex(n=>n.id===r);return a.tasks.splice(s,1),await t.dispatch({type:"saveCurrBoard",boardToSave:d})},async removeGroup(t,{group:e}){const r=t.getters.currBoard,d=r.groups.findIndex(s=>s.id===e.id);return r.groups.splice(d,1),await t.dispatch({type:"saveCurrBoard",boardToSave:r})},async getBoardById(t,{boardId:e}){try{return await U.getById(e)}catch(r){throw console.log("Cannot get board",e,",",r),r}},async loadBoards({commit:t}){try{const e=await U.query();return t({type:"loadBoards",boards:e}),console.log(e),e}catch(e){throw console.log("Cannot load boards",e),e}},async updateLabel(t,{label:e}){const r=t.getters.currBoard,d=r.labels.findIndex(a=>a.id===e.id);return r.labels[d]=e,await t.dispatch({type:"saveCurrBoard",boardToSave:r})}}},Zl=Me({strict:!0,state:{editModalStatus:{isOpen:!1,editType:"",currTask:null,parentGroupId:""},isLoading:!1,userMsg:{msg:"",style:"",isAlive:!1}},getters:{editModalStatus(t){return JSON.parse(JSON.stringify(t.editModalStatus))},isLoading(t){return JSON.parse(JSON.stringify(t.isLoading))},userMsg(t){return t.userMsg}},mutations:{toggleEditModal(t,{isOpen:e,editType:r,currTask:d,parentGroupId:a}){t.editModalStatus={isOpen:e,editType:r,currTask:d,parentGroupId:a}},setIsLoading(t,{loadingStatus:e}){t.isLoading=e},setUserMsg(t,{msg:e,style:r,isAlive:d}){t.userMsg={msg:e,style:r,isAlive:d}},setMsg(t,{msg:e}){t.userMsg=e}},actions:{flashUserMsg(t,{msg:e,style:r}){t.commit({type:"setUserMsg",msg:e,style:r,isAlive:!0}),setTimeout(()=>{t.commit({type:"setUserMsg",msg:"",style:"",isAlive:!1})},2e3)},async showMsg({state:t,commit:e},{msg:r}){try{t.setTimeId&&clearTimeout(t.setTimeId),e({type:"setMsg",msg:r}),r={txt:"",type:""},t.setTimeId=setTimeout(()=>{e({type:"setMsg",msg:r}),clearTimeout(t.setTimeId)},2500)}catch(d){console.log("ERROR: cannot get userMsg",d)}}},modules:{userStore:Hl,boardStore:Vl}}),Wl={mounted:t=>{t.focus()}},Kl={mounted:(t,e,r)=>{t.clickOutsideEvent=function(a){const s=t.getBoundingClientRect();(a.clientX<s.x||a.clientX>s.x+s.width||a.clientY<s.y||a.clientY>s.y+s.height)&&!(t==a.target||t.contains(a.target))&&(console.log("clicked outside!",t),e.value(a))};const d=function(){document.body.removeEventListener("click",d),document.body.removeEventListener("touchstart",d),document.body.addEventListener("click",t.clickOutsideEvent),document.body.addEventListener("touchstart",t.clickOutsideEvent)};document.body.addEventListener("click",d),document.body.addEventListener("touchstart",d)},unmounted:function(t){document.body.removeEventListener("click",t.clickOutsideEvent),document.body.removeEventListener("touchstart",t.clickOutsideEvent)},stopProp(t){t.stopPropagation()}};const z=we(Rl);z.config.globalProperties.$filters={};z.directive("focus",Wl);z.directive("clickoutside",Kl);z.use(me);z.use(Zl);z.use(Oe);z.mount("#app");
