var be=Object.defineProperty;var te=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var se=(t,e,o)=>e in t?be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,oe=(t,e)=>{for(var o in e||(e={}))fe.call(e,o)&&se(t,o,e[o]);if(te)for(var o of te(e))_e.call(e,o)&&se(t,o,e[o]);return t};import{o as i,c as d,n as y,t as f,r as p,a as r,b as h,w as _,d as E,F as v,e as C,C as V,D as H,f as re,g as O,h as S,i as m,j as I,k as j,T as Z,l as T,v as M,m as N,p as R,q as W,s as ye,U as ve,u as Ce,x as de,y as Te,z as Ee,A as Se,B as Me,E as Be,G as we,H as Oe}from"./vendor.136dd17b.js";const xe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};xe();var k=(t,e)=>{const o=t.__vccOpts||t;for(const[l,n]of e)o[l]=n;return o};const De={name:"user-avatar",props:{user:Object,diameter:{type:Number,default:28}},methods:{getNameAbbreviation(t){return t.split(" ").map(l=>l.charAt(0).toUpperCase()).join("")}},computed:{userColor(){return`background-color: ${this.user.color}`},getSizeInCss(){return{width:this.diameter+"px",height:this.diameter+"px","line-height":this.diameter+"px"}}}},Ae=["src"];function $e(t,e,o,l,n,s){return i(),d("div",{class:"user-avatar",style:y(s.getSizeInCss)},[o.user.imgUrl?(i(),d("img",{key:0,src:o.user.imgUrl},null,8,Ae)):(i(),d("div",{key:1,class:"flex center",style:y(s.userColor)},f(s.getNameAbbreviation(o.user.fullname)),5))],4)}var G=k(De,[["render",$e]]);const B={delay:Ie,getRndIntInc:Le,makeId:Ne,getRandomColor:Ge,applyDrag:Ue,saveToStorage:Je,loadFromStorage:je,lightenDarkenColor:ze,debounce:Fe};function Ie(t=1500){return new Promise(e=>{setTimeout(e,t)})}function Le(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function Ue(t,e){console.log("arr>>",t,"drag",e);const{removedIndex:o,addedIndex:l,payload:n}=e;if(o===null&&l===null)return t;const s=[...t];let a=n;return o!==null&&(a=s.splice(o,1)[0]),l!==null&&s.splice(l,0,a),console.log(s),s}function Ne(t=8){for(var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=0;l<t;l++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}function Ge(){for(var t="0123456789ABCDEF",e="#",o=0;o<6;o++)e+=t[Math.floor(Math.random()*16)];return e}function Je(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function je(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function ze(t,e){if(t==="#0079bf")return"#055a8c";if(t==="#00c2e0")return"#0098b7";var o=!1;t[0]=="#"&&(t=t.slice(1),o=!0);var l=parseInt(t,16),n=(l>>16)+e;n>255?n=255:n<0&&(n=0);var s=(l>>8&255)+e;s>255?s=255:s<0&&(s=0);var a=(l&255)+e;return a>255?a=255:a<0&&(a=0),(o?"#":"")+(a|s<<8|n<<16).toString(16)}function Fe(t,e){let o;return(...l)=>{clearTimeout(o),o=setTimeout(()=>{t(...l)},e)}}var qe="/assets/Asset3.171b9aa8.png";const Pe={name:"home",components:{},created(){},methods:{async goToBoardsPage(){this.$router.push("/board/6249680f207696d8ae3ee216")}}},Re={class:"home"},Ve={class:"homepage"},He={class:"header-home"},Ze=r("div",{class:"logo"},[r("span"),E("Mello ")],-1),We={class:"homepage-nav"},Ke=E("Log in"),Ye=r("span",null," | ",-1),Qe=E("Sign up"),Xe={class:"layout"},et={class:"main-home-page"},tt={class:"started"},st=r("p",{class:"txt-title"},[r("h1",null,"Mello helpss teams move work forward"),E(" As your software team grows, Mello makes it easy to manage workflows across multiple teams and projects. Simple, intuitive, fast: Mello is where software teams do their best work. Free to get started, with easy user experience Mello. ")],-1),ot=r("div",{class:"img"},[r("img",{src:qe})],-1);function rt(t,e,o,l,n,s){const a=p("router-link");return i(),d("section",Re,[r("div",Ve,[r("section",He,[Ze,r("nav",We,[h(a,{to:"/login",class:"login"},{default:_(()=>[Ke]),_:1}),Ye,h(a,{to:"/signup",class:"signup"},{default:_(()=>[Qe]),_:1})])]),r("div",Xe,[r("main",et,[r("section",tt,[st,r("button",{class:"start-btn",onClick:e[0]||(e[0]=(...c)=>s.goToBoardsPage&&s.goToBoardsPage(...c))},"Start as a guest")]),ot])])])])}var nt=k(Pe,[["render",rt]]);const at={data(){return{}},async mounted(){await this.$store.dispatch({type:"loadBoards"}),console.log(this.boards)},computed:{boards(){return this.$store.getters.boards}}},it={class:"board-list flex center column align-center"},lt=r("h3",null,"YOUR BOARDS",-1),dt={class:"board-list-container flex wrap"},ct=["onClick"],ut={class:"board-title"},ht=["src"];function mt(t,e,o,l,n,s){return i(),d("section",it,[lt,r("div",dt,[(i(!0),d(v,null,C(s.boards,a=>(i(),d("label",{onClick:c=>t.$router.push(`/board/${a._id}`),key:a._id},[r("span",ut,f(a.title),1),a.style.bg.split("")[0]!=="#"?(i(),d("img",{key:0,src:a.style.bg,alt:""},null,8,ht)):(i(),d("div",{key:1,style:y({"background-color":`${a.style.bg}`})},null,4))],8,ct))),128))])])}var pt=k(at,[["render",mt]]);const gt={name:"task-preview",props:{task:Object,labelsOpen:Boolean},components:{userAvatar:G,Container:V,Draggable:H},data(){return{hover:!1,open:!0,dateBg:"",dateClass:"clock"}},mounted(){this.loadDate()},methods:{async updateTask(){const t=JSON.parse(JSON.stringify(this.task));this.$emit("saveTask",t),this.$emit("socketUpdateBoard")},removeTask(){this.$emit("removeTask",this.task),this.$emit("socketUpdateBoard")},toggleDateBg(t){this.dateBg=B.lightenDarkenColor(this.dateBg,t)},getStyle(t){const o=this.$store.getters.currBoardLabels.find(l=>l.id===t);if(!!o)return this.hover?`background-color: ${B.lightenDarkenColor(o==null?void 0:o.color,-30)}`:`background-color: ${o==null?void 0:o.color}`},getLabelText(t){const o=this.$store.getters.currBoardLabels.find(l=>l.id===t);if(!!o)return`${o.title}`},toggleLabels(){this.$emit("openLabels"),this.open=!this.open},toggleDate(){if(this.task.status==="over-due"||this.task.status==="in-progress"||this.task.status==="due-soon"){this.$emit("done"),this.updateTask();return}if(this.task.dueDate-Date.now()<0){this.$emit("over-due"),this.updateTask();return}if(this.task.dueDate-Date.now()>86400*1e3){this.$emit("in-progress"),this.updateTask();return}if(this.task.dueDate-Date.now()<86400*1e3){this.$emit("due-soon"),this.updateTask();return}},loadDate(){if(this.task.status!=="done"){if(this.task.dueDate-Date.now()<0){this.task.status="over-due";return}if(this.task.dueDate-Date.now()>86400*1e3){this.task.status="in-progress";return}if(this.task.dueDate-Date.now()<86400*1e3){this.task.status="due-soon";return}}},socketUpdateBoard(){this.$emit("socketUpdateBoard")}},computed:{checkStyle(){if(this.task.style&&this.task.style.size==="big")return"border-bottom: none"},getCoverClr(){return`background-color: ${this.task.style.bg} !important`},checkBadges(){return!(!this.task.members&&!this.task.startDate&&!this.task.dueDate)},getClass(){return this.labelsOpen?"open":"close"},getDateClass(){return this.task.status},startDate(){return re(this.task.startDate,"MMM d")},dueDate(){return re(this.task.dueDate,"MMM d")},getWidth(){var t=0;if((this.task.startDate||this.task.dueDate)&&t++,this.task.comments&&t++,t>2||t===0)return"width: 100%"},getDateBg(){this.task.startDate&&this.task.dueDate}},watch:{task(t,e){this.loadDate()}}},kt={class:"task-preview"},bt={key:0,class:"small-cover"},ft=["src"],_t={key:1,class:"big-cover"},yt={class:"img-txt"},vt=r("div",null,null,-1),Ct={key:2},Tt={key:0,class:"task-labels"},Et={key:1,class:"task-preview-badges flex wrap"},St={key:0,class:"task-preview-date"},Mt={key:0,class:"start-only"},Bt=r("span",null,null,-1),wt=r("span",null,"-",-1);function Ot(t,e,o,l,n,s){const a=p("user-avatar"),c=p("Draggable");return i(),O(c,null,{default:_(()=>[r("section",kt,[r("button",{onClick:e[0]||(e[0]=S((...u)=>s.removeTask&&s.removeTask(...u),["stop"])),title:"Remove card",class:"btn-remove-task"}),o.task.style&&o.task.style.size==="small"?(i(),d("section",bt,[o.task.style&&o.task.style.bg.split("")[0]!=="#"?(i(),d("img",{key:0,src:o.task.style.bg,alt:""},null,8,ft)):(i(),d("div",{key:1,style:y(s.getCoverClr),class:"cover-clr"},null,4))])):m("",!0),o.task.style&&o.task.style.size==="big"?(i(),d("section",_t,[o.task.style&&o.task.style.bg.split("")[0]!=="#"?(i(),d("div",{key:0,class:"big-cover-img",style:y({"background-image":`url(${o.task.style.bg})`})},[r("div",yt,[vt,r("div",null,[r("span",null,f(o.task.title),1)])])],4)):m("",!0),o.task.style&&o.task.style.bg.split("")[0]==="#"?(i(),d("div",{key:1,class:"big-cover-clr",style:y({"background-color":`${o.task.style.bg}`})},[r("div",null,[r("span",null,f(o.task.title),1)])],4)):m("",!0)])):m("",!0),!o.task.style||o.task.style.size==="small"?(i(),d("section",Ct,[o.task.labelIds?(i(),d("section",Tt,[(i(!0),d(v,null,C(o.task.labelIds,u=>(i(),d("span",{onClick:e[1]||(e[1]=S((...b)=>s.toggleLabels&&s.toggleLabels(...b),["stop"])),onMouseover:e[2]||(e[2]=b=>n.hover=!0),onMouseleave:e[3]||(e[3]=b=>n.hover=!1),key:u,class:I(["task-preview-label",s.getClass]),style:y(s.getStyle(u))},[r("span",null,f(s.getLabelText(u)),1)],38))),128))])):m("",!0),r("p",null,f(o.task.title),1),s.checkBadges?(i(),d("section",Et,[o.task.startDate||o.task.dueDate?(i(),d("section",St,[o.task.startDate&&!o.task.dueDate?(i(),d("div",Mt,[Bt,r("span",null,"Starts: "+f(s.startDate),1)])):m("",!0),!o.task.startDate&&o.task.dueDate?(i(),d("div",{key:1,class:I([s.getDateClass,"due-only"]),onClick:e[4]||(e[4]=S((...u)=>s.toggleDate&&s.toggleDate(...u),["stop"])),onMouseover:e[5]||(e[5]=u=>{s.toggleDateBg(-30),n.dateClass="unCheck"}),onMouseleave:e[6]||(e[6]=u=>{s.toggleDateBg(30),n.dateClass="clock"}),style:y(s.getDateBg)},[r("span",{class:I(n.dateClass)},null,2),r("span",null,f(s.dueDate),1)],38)):m("",!0),o.task.startDate&&o.task.dueDate?(i(),d("div",{key:2,class:I([s.getDateClass,"due-only"]),onClick:e[7]||(e[7]=S((...u)=>s.toggleDate&&s.toggleDate(...u),["stop"])),onMouseover:e[8]||(e[8]=u=>{s.toggleDateBg(-30),n.dateClass="unCheck"}),onMouseleave:e[9]||(e[9]=u=>{s.toggleDateBg(30),n.dateClass="clock"}),style:y(s.getDateBg)},[r("span",{class:I(n.dateClass)},null,2),r("span",null,f(s.startDate),1),wt,r("span",null,f(s.dueDate),1)],38)):m("",!0)])):m("",!0),o.task.members?(i(),d("section",{key:1,style:y(s.getWidth),class:"task-members flex"},[(i(!0),d(v,null,C(o.task.members,u=>(i(),O(a,{key:u._id,user:u},null,8,["user"]))),128))],4)):m("",!0)])):m("",!0)])):m("",!0)])]),_:1})}var ce=k(gt,[["render",Ot]]);const xt={props:{menuOpen:Boolean},data(){return{}},methods:{}},Dt={class:"custom-menu"},At={key:0,class:"custom-menu-container"};function $t(t,e,o,l,n,s){return i(),d("section",Dt,[h(Z,{"enter-active-class":"animate__animated animate__fadeIn animate__faster","leave-active-class":"animate__animated animate__fadeOut animate__faster"},{default:_(()=>[o.menuOpen?(i(),d("div",At,[j(t.$slots,"default")])):m("",!0)]),_:3})])}var K=k(xt,[["render",$t]]);const It={props:{menuOpen:Boolean},data(){return{}},components:{customMenu:K},methods:{addTask(){this.$emit("newTask")},copyGroup(){this.$emit("copyGroup")},removeGroup(){this.$emit("removeGroup")},closeMenu(){this.$emit("closeMenu")}}},Lt={class:"group-menu"},Ut=r("p",null,"List actions",-1),Nt=r("hr",null,null,-1),Gt=r("hr",null,null,-1);function Jt(t,e,o,l,n,s){const a=p("custom-menu");return i(),d("section",Lt,[h(a,{menuOpen:o.menuOpen},{default:_(()=>[Ut,r("button",{onClick:e[0]||(e[0]=(...c)=>s.closeMenu&&s.closeMenu(...c)),class:"close",title:"Close"}),Nt,r("p",{onClick:e[1]||(e[1]=(...c)=>s.addTask&&s.addTask(...c))},"Add card..."),r("p",{onClick:e[2]||(e[2]=(...c)=>s.copyGroup&&s.copyGroup(...c))},"Copy list..."),Gt,r("p",{onClick:e[3]||(e[3]=(...c)=>s.removeGroup&&s.removeGroup(...c))},"Remove this list...")]),_:1},8,["menuOpen"])])}var jt=k(It,[["render",Jt]]);const zt={props:{menuOpen:Boolean,groupTitle:String},data(){return{titleForDisplay:JSON.parse(JSON.stringify(this.groupTitle))}},components:{customMenu:K},mounted(){},methods:{addTask(){this.$emit("newTask")},saveGroup(){this.$emit("saveGroup",this.titleForDisplay)},closeMenu(){this.$emit("closeMenu")}}},Ft={class:"copy-group-menu"},qt=r("p",null,"Copy list",-1),Pt=r("hr",null,null,-1),Rt=r("div",null,"Name",-1),Vt=r("button",null,"Create list",-1);function Ht(t,e,o,l,n,s){const a=p("custom-menu");return i(),d("section",Ft,[h(a,{menuOpen:o.menuOpen},{default:_(()=>[qt,r("button",{onClick:e[0]||(e[0]=(...c)=>s.closeMenu&&s.closeMenu(...c)),class:"close",title:"Close"}),Pt,r("form",{action:"submit",onSubmit:e[2]||(e[2]=S((...c)=>s.saveGroup&&s.saveGroup(...c),["prevent"]))},[Rt,T(r("textarea",{style:{resize:"none"},"onUpdate:modelValue":e[1]||(e[1]=c=>n.titleForDisplay=c)},null,512),[[M,n.titleForDisplay]]),Vt],32)]),_:1},8,["menuOpen"])])}var Zt=k(zt,[["render",Ht]]);const Wt={name:"task-add",props:{task:Object},data(){return{isSave:!0}},methods:{saveTask(){this.isSave||(this.task.title=""),console.log(this.task),this.$emit("saveTask",this.task)},func(){console.log("hover")}},mounted(){this.$refs.taskTitle.focus()}},Kt={class:"task-add"},Yt=r("button",{type:"submit"},"Add card",-1);function Qt(t,e,o,l,n,s){return i(),d("section",Kt,[r("form",{action:"submit",onSubmit:e[3]||(e[3]=S((...a)=>s.saveTask&&s.saveTask(...a),["prevent","stop"]))},[T(r("textarea",{ref:"taskTitle",style:{resize:"none",width:"256px",height:"66px"},placeholder:"Enter a title for this card...","onUpdate:modelValue":e[0]||(e[0]=a=>o.task.title=a)},null,512),[[M,o.task.title]]),r("div",null,[Yt,r("button",{onMouseover:e[1]||(e[1]=a=>n.isSave=!1),onMouseleave:e[2]||(e[2]=a=>n.isSave=!0),title:"Close"},null,32)])],32)])}var ne=k(Wt,[["render",Qt]]);const Xt={props:{group:{type:Object,required:!0}},data(){return{taskToEdit:null,menuOpen:!1,subMenuOpen:!1,subTaskToEdit:null}},components:{taskPreview:ce,groupMenu:jt,taskAdd:ne,copyGroupMenu:Zt,Container:V,Draggable:H,TaskAdd:ne},methods:{async delay(){setTimeout(()=>{},3e3)},closeMenu(){this.menuOpen=!1,this.subMenuOpen=!1},toggleMenu(){this.menuOpen=!this.menuOpen,this.subMenuOpen&&(this.subMenuOpen=!this.subMenuOpen,this.menuOpen=!1)},updateGroup(){this.$emit("updateGroup",this.group)},addTask(t){this[t]=L.getEmptyTask(),this.menuOpen=!1},saveTask(t){t.title&&(this.group.tasks.push(t),this.updateGroup()),this.taskToEdit=null,this.subTaskToEdit=null},saveGroup(t){const e=JSON.parse(JSON.stringify(this.group));e.title=t,e.id="",e.tasks.forEach(o=>{o.id=B.makeId()}),this.menuOpen=!1,this.subMenuOpen=!1,this.$emit("saveGroup",e)},getCardPayload(t){return e=>this.board.groups.filter(o=>o.id===t)[0].tasks[e]},onCardDrop(t,e){if(console.log(e),e.removedIndex!==null||e.addedIndex!==null){const o=Object.assign({},this.board),l=o.groups.filter(a=>a.id===t)[0],n=o.groups.indexOf(l),s=Object.assign({},l);e.removedIndex==null&&e.addedIndex>=0,s.tasks=B.applyDrag(s.tasks,e),o.groups.splice(n,1,s),this.$emit("move",o)}}},computed:{}},es={class:"board-group"},ts={class:"group-header"},ss={class:"tasks-container"},os=r("span",null,null,-1),rs=r("span",null,"Add a card",-1),ns=[os,rs],as={class:"sub-task-add"};function is(t,e,o,l,n,s){const a=p("group-menu"),c=p("copy-group-menu"),u=p("task-add");return i(),d("section",es,[r("div",ts,[T(r("input",{type:"text",onMousedown:e[0]||(e[0]=(...b)=>s.delay&&s.delay(...b)),"onUpdate:modelValue":e[1]||(e[1]=b=>o.group.title=b),class:"group-title",onBlur:e[2]||(e[2]=(...b)=>s.updateGroup&&s.updateGroup(...b))},null,544),[[M,o.group.title]]),r("button",{onClick:e[3]||(e[3]=(...b)=>s.toggleMenu&&s.toggleMenu(...b)),class:"btn-group-menu",title:"Menu"}),h(a,{onRemoveGroup:e[4]||(e[4]=b=>t.$emit("removeGroup",o.group)),onCopyGroup:e[5]||(e[5]=b=>{n.menuOpen=!1,n.subMenuOpen=!0}),onCloseMenu:e[6]||(e[6]=b=>n.menuOpen=!1),onNewTask:e[7]||(e[7]=b=>s.addTask("taskToEdit")),menuOpen:n.menuOpen},null,8,["menuOpen"]),h(c,{onSaveGroup:s.saveGroup,onCloseMenu:e[8]||(e[8]=b=>n.subMenuOpen=!1),menuOpen:n.subMenuOpen,groupTitle:o.group.title},null,8,["onSaveGroup","menuOpen","groupTitle"])]),n.taskToEdit?(i(),O(u,{key:0,task:n.taskToEdit,onSaveTask:s.saveTask},null,8,["task","onSaveTask"])):m("",!0),r("div",ss,[j(t.$slots,"default")]),n.subTaskToEdit?m("",!0):(i(),d("div",{key:1,onClick:e[9]||(e[9]=b=>s.addTask("subTaskToEdit")),class:"flex align-center btn-task-add"},ns)),r("div",as,[n.subTaskToEdit?(i(),O(u,{key:0,task:n.subTaskToEdit,onSaveTask:s.saveTask},null,8,["task","onSaveTask"])):m("",!0)])])}var ls=k(Xt,[["render",is]]);const ds={props:{isAddingGroup:Boolean},data(){return{groupToAdd:L.getEmptyGroup()}},methods:{addGroup(){this.$emit("addGroup"),this.$nextTick(()=>{this.$refs.title.focus()})},saveGroup(){this.groupToAdd.title=this.groupToAdd.title.trim(),console.log("group>>",this.groupToAdd),this.groupToAdd.title&&(this.$emit("saveGroup",this.groupToAdd),this.groupToAdd=L.getEmptyGroup())},closeGroupAdd(){this.groupToAdd=L.getEmptyGroup(),this.$emit("closeGroupAdd")}}},cs=r("div",{class:"flex align-center"},[r("span"),r("span",null,"Add another list")],-1),us=[cs],hs={key:1,class:"group-edit"},ms=r("button",null,"Add list",-1);function ps(t,e,o,l,n,s){return i(),d("section",null,[o.isAddingGroup?(i(),d("div",{key:0,onClick:e[0]||(e[0]=(...a)=>s.addGroup&&s.addGroup(...a)),class:"group-add"},us)):m("",!0),o.isAddingGroup?m("",!0):(i(),d("div",hs,[r("form",{type:"submit",onSubmit:e[3]||(e[3]=S((...a)=>s.saveGroup&&s.saveGroup(...a),["prevent"]))},[T(r("input",{type:"text",ref:"title",placeholder:"Enter list title...","onUpdate:modelValue":e[1]||(e[1]=a=>n.groupToAdd.title=a)},null,512),[[M,n.groupToAdd.title]]),r("div",null,[ms,r("button",{onClick:e[2]||(e[2]=(...a)=>s.closeGroupAdd&&s.closeGroupAdd(...a))})])],32)]))])}var gs=k(ds,[["render",ps]]);const ks={props:{menuOpen:Boolean},data(){return{}},computed:{background(){return this.board.style["background-color"],{"background-color":this.board.style["background-color"]}},methods:{close(){this.$emit("close")},changeBackground(t){const e={"background-color":t};this.$emit("setBackground",e)}}}},bs={class:"custom-menu"},fs={key:0,class:"custom-menu-container"},_s=r("span",{class:"btn-boards-drop"},"Change background",-1),ys=["onClick"];function vs(t,e,o,l,n,s){return i(),d("div",bs,[r("div",null,[h(Z,{"enter-active-class":"animate__animated animate__slideInRight","leave-active-class":"animate__animated animate__slideOutLeft"},{default:_(()=>[o.menuOpen?(i(),d("div",fs,[_s,(i(!0),d(v,null,C(t.colors,a=>(i(),d("li",{key:a,style:y({backgroundColor:a}),class:"color",onClick:c=>t.changeBackground(a,"")},null,12,ys))),128))])):m("",!0)]),_:1})])])}var Cs=k(ks,[["render",vs]]),Ts="/assets/boardsIcon.95d49565.png",ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAAsCAYAAADl06/eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAkMSURBVGhD7ZrrUxNXGMYJYCSEqNzFGS9pqRBkbEWjjuAHp9OKtNCWWuw4Vf+D3r+0nY7+GzqOLdXxAvZD+dAZLy1EkGpHLVpr1QoiVCCQhADlKiF9nvBumoRLAi4QKM/Mzia7Z8++57fvvuc952zEomZHGtmHJLfbrTly5Ij3Gvx2azQat/xdsGK7uVfaPp12hwy6rKxMazabs+Lj47fFxcWtxM0j+/r6HE6n82Zzc/PtvLy8Him6oHT48OHIAwcOvLh8+fLtBoNhzZIlS5YODg7+A/1us9l+zcrKsktRdQTQyx0Ox9cDAwO3h4eHrS6Xq2NoaOhJd3f3dwBdUFNTY5CiC0aE3NDQkGG32z9Hu39Bu1vZ7mfPnrX09PT88PTp01wpqp4qKiqS+vv7z+BmPfBmj0Yg3LSNsHHT1xcSbDRP8+jRo5cA+TNAvurbbgrtfoS3eZ8UD6pI2QdVdHS0RqvVxiI2ea/Bb01UVFSKTqd7Da/V+0ajcfuNGzdi5fS8FT0ZkF9csWJFgV6vfwdtz0Y74+S0R5GRkVocXyp/gypk0KjYhVDBODwyemRUAjsVsAsA+0BaWlpuZWWln1HzSQiRUYcOHXopISHhLfRFJYD5Mtq3TE57hRDSBy8fkr9BFTLo9vb2wd7e3pt8ZRgx5LBHPp79Kozbt379+h3Xrl0bY1y4i5BzcnJeWLZsGT25GJA3BnoyBcDtCCd1XV1df8uhoAoZdH19fT9i8Y/obcsA+w/A9nuaAjstNjaWnv3B2rVrd84n2HgLowkZ2UURnQXZxSsTQLYi6/gJ/VUZHO9PORxUUbIPKovF4kbM6kQ6YyNUPO1khJME8pUiHthQHAxMxTldTEyMo7Cw0FpaWhryKzYXIuTVq1cb0b434CR7CRn2+/U17ACZcQByNQCXofOv3rhxo01OB1XIoCmB7cjOzrbBkEgYtBJgV2Dzg41TcdhSAFwL7+javXu39dSpU37hJlxEyOhXVsOTCxAyStCmTWiCju2QIhHMrsDZDshXMHYoB2QLvL9DToekKYGmCBtG2eHZ7bDFDcOSsY/HFi1FPAJoA7aVgG1A+c7i4uKOEydOhJVnHz16dElmZua6pKSkQthIyDloxxjIED35Z3jyudbW1iubNm2aEmRqyqCpANgREioI268+H9hLEbu7SkpKOo4fPz4op+dU9OSMjIy1qamphfDk9wRyTCBk8WQL+qZzLS0tNdOB/Nxivvn48eNMDEW/ROp3GzFskLHMVzQWnWcrRlLfwdCCcOgg6cl3795NRyb1KUd8sLsfG6F6hf8u2G0F4DNWq7X40qVLiTgc8pSF6uLNCVuG53WTwG6D0Sc5gpzLPNsH8kewtxb2DowHGdlFBzMs2Ps27E3C4bmDrIie3djYmEXY8Oy7sHNo1OT/JLCt8OwTMP61Cxcu6OXyWRMh19XVGQH5Q0CugZ19k0A+jzdw7/Xr11Xx5GnF6EApMdtkMrUjJjNmM/VjNuLtIBn7oFicS8OmZwc5m9kIIe/atWtNcnLym5Jd5OBwDOwcE5PxECoxZjgL0Baz2eyA3c89FawKaEpJ/dhBwng3YKZgP16erRfYOoy+nHv27Jlx2Oz4mF0kJiYqkDfDjkDILkB2EjJGfGefPHli2bp1qyqQKdVAU76eDQNdGNSsHA82dh7YaLAeeXZ3UVFR20wNapQULiUlpUiyC0JeKnZ4JJA7FU9uaGioys3NdaKIaosaqoKmFM8W2Jz1SwLsJPz2m/XDjrBXabXaOJ1O15mfn9+mtmfTk2GHEZC94QK3DoTMcNEFyD/Dk08Tcl5enqqQKdVBUwK7c8OGDcw5RwCTI8hEbIGwdXgQq7Dp8CY49+/f33rs2DFVYBMyQsUayZM5rOaIbzxPZriogiefIeTLly93IZarCnnGxdmw+/fvM89WUr8x2Qh7eclGPIsHFRUVzz2fTcictJfs4ipu0See69VocjHczhQOnV5xbW1tAg57H8K8E2E/ePDABNhfCexno039T4SNRhP2t0z9nmfxgPerr69fj/t9jPtVo+peuY1Xcj8bIJ9jnlxdXR2PwzMKOeRp0ukKw24XPOYvNPx7gDwL7+UU67Cc9ggxPBJvdFJMTEw+XvMPEFN3wiunPKghZAyRjaijEJ0sw4Vn7kJOeySezRSOMZkdn4XhAuXmV7iYSIRw7949etqXaORvcKqJPJuv86mmpqb8qYQR1s+FVNT/Ceq/hqr6pFqvpH6vJ8/7cDGRCENi9hdBwghhnwTs3aF4Nuttbm7mQipXqz0xWarzivXibWK95QsiJgcTobCjEtjBPPskoOyZDLbPJwGcIKInjxuTZa7lLDz5nQUPWRGzAukgg4URdpCl7CDHmxvxgcxPAmpQ/h+53Cuphw/t/wVZEWHfuXMnaBiBJ3KK9RtA8pv1k08CvOECMLvkMq+U6xkurFbru2pNEE1Hc/pkCRsZhhGDir3IEjhyy0YC4rdSwywB4grHJQwqTuNNqK6qquo7ePBgOgZFhXq9fh8GPCaMMv3CC67hjGE7rqvs7e0tb2xstGzbtk3dz7emoDl/hQh73bp16QaDodgHtt+IVaAR9kWn08lVeBtSuJ2A/BYg87sLv7DiA5kLqWfQUV7ZvHmzfS5TuLCIVYSdnp5uRB79LoBzqX+MZ0sosPf399/EvhNlTSiXHghZyvGTgCp6MiFv2bIl5NXqBS9mI7IsxhEkO8iJFg+6h4aG7IjJA3LYT5JdnOby061bt5Kl+kX5ip7NlRqBPW4HOZkAuUU6vuKHDx+GFeQZmb2brkpLS0d27NjhSEhIaEXsdSEscPGAs35B7YSHt0rHV4ZMxJKZmRlW4SKsQFPl5eXu+Pj4TpPJZANoZVlsUtiAzI6vhpDh0VczMjJm/5OAIAo70JSyeACvbAPgEXj3mGUxiuFCOj5+3OLx5HCETIUlaEpZPAj41s/7RZRAVvLk8xjQTOlbuNlW2IKmFM+Wb/04nUqvjgZjfvDiQPbBcMFv4aqn+i3cbCusQVOEzQVfhhGAfgrPfgjYtwD5CkaKF5uammrNZvNinqy24M0aznNw4285vKhFLWpRC08REf8CWiQ4qyM/fXgAAAAASUVORK5CYII=";const Es={props:{board:{type:Object,required:!0}},data(){return{boardTitleToEdit:null,isMembersMenuOpen:!1,isSideMenuOpen:!1}},computed:{selected(){return{selected:this.board.isStarred}},users(){return this.$store.getters.users},boardTitle(){return JSON.parse(JSON.stringify(this.board.title))},userWorkspace(){const t=this.board.createdBy.fullname.split(" ");return t[0]+" "+t[1].split("")[0]+"'s"}},created(){},watch:{boardTitle:{immediate:!0,handler(){this.boardTitleToEdit=this.boardTitle}}},methods:{setBackground(t){this.$emit("setBackground",t)}},components:{userAvatar:G,showMenu:Cs}},Ss={class:"board-header"},Ms={class:"flex"},Bs=r("button",{class:"btn-boards-drop"},[r("img",{class:"boards-icon",src:Ts,alt:""}),r("span",null," Boards "),r("img",{class:"img-arrow",src:ue,alt:""})],-1),ws={class:"board-title",contenteditable:"true"},Os=r("button",{class:"btn-star-board"},[r("div")],-1),xs=E(),Ds=r("span",{class:"nav-divider"},"|",-1),As={class:"btn-user-space"},$s=r("button",{class:"btn-show-menu"},[r("span"),r("span",null," Show menu")],-1),Is=r("div",{class:"board-members-section"},[r("div",{class:"board-section"})],-1);function Ls(t,e,o,l,n,s){return i(),d("div",Ss,[r("div",Ms,[Bs,r("h2",ws,f(o.board.title),1),Os,xs,Ds,r("button",As,[r("h4",null,f(s.userWorkspace)+" Workspace",1)]),$s]),Is])}var Us=k(Es,[["render",Ls]]);const Ns={name:"board-details",data(){return{isAddingGroup:!0,labelsOpen:!1,loadDate:!1}},components:{boardGroup:ls,groupAdd:gs,Container:V,Draggable:H,boardHeader:Us,taskPreview:ce},async mounted(){const{boardId:t}=this.$route.params;await this.$store.dispatch({type:"loadCurrBoard",boardId:t}),this.board.style&&(document.body.style=`
   background-image: url(${this.board.style.bg});
   background-color: ${this.board.style.bg};`)},unmounted(){document.body.style=`
   background: none;`},computed:{board(){return this.$store.getters.currBoard},unfilteredBoard(){return this.$store.state.boardStore.currBoard}},methods:{async saveTask(t,e){await this.$store.dispatch({type:"saveTask",groupId:e,taskToSave:t})},async removeGroup(t){await this.$store.dispatch({type:"removeGroup",group:t})},async removeTask(t,e){await this.$store.dispatch({type:"removeTask",groupId:e.id,taskId:t.id})},async updateGroup(t){this.isAddingGroup||(this.isAddingGroup=!0),t.title&&await this.$store.dispatch({type:"updateGroup",groupToSave:t})},async loadBoard(){const{boardId:t}=this.$route.params,e=await this.$store.dispatch({type:"loadCurrBoard",boardId:t});return this.board=e,this.board.style&&(document.body.style=`
    background-image: url(${this.board.style.bg});
    background-color: ${this.board.style.bg};`),e},async onColumnDrop(t){const e=Object.assign({},this.board);console.log(e),t.payload={},t.payload.data=this.board.groups[t.removedIndex],t.payload.id=this.board.groups[t.removedIndex].id,console.log("drop>>",t),e.groups=B.applyDrag(e.groups,t),await this.$store.dispatch({type:"saveCurrBoard",boardToSave:e})},getCardPayload(t){return e=>this.board.groups.filter(o=>o.id===t)[0].tasks[e]},async onCardDrop(t,e){if(console.log(e),e.removedIndex!==null||e.addedIndex!==null){const o=Object.assign({},this.board),l=o.groups.filter(a=>a.id===t)[0],n=o.groups.indexOf(l),s=Object.assign({},l);e.removedIndex==null&&e.addedIndex>=0,s.tasks=B.applyDrag(s.tasks,e),o.groups.splice(n,1,s),await this.$store.dispatch({type:"saveCurrBoard",boardToSave:o})}},goToDetail(t,e){this.$router.push(`/board/${this.board._id}/task/${t.id}/${e.id}`)}},watch:{"$route.params.boardId"(t){!t||(console.log("Changed to",t),this.loadBoard())}}},Gs={key:0,class:"board-details"},Js=r("div",{class:"bg"},null,-1),js={class:"group-list flex"};function zs(t,e,o,l,n,s){const a=p("board-header"),c=p("router-view"),u=p("task-preview"),b=p("Container"),A=p("board-group"),q=p("Draggable"),P=p("group-add");return s.board?(i(),d("section",Gs,[Js,h(a,{board:s.board},null,8,["board"]),h(c),r("div",js,[h(b,{"group-name":"cols",tag:"div",orientation:"horizontal",onDrop:e[1]||(e[1]=x=>s.onColumnDrop(x))},{default:_(()=>[(i(!0),d(v,null,C(s.board.groups,x=>(i(),O(q,{key:x.id},{default:_(()=>[r("div",null,[h(A,{group:x,onUpdateGroup:s.updateGroup,onSaveGroup:s.updateGroup,onRemoveGroup:s.removeGroup},{default:_(()=>[h(b,{orientation:"vertical","group-name":"col-items",shouldAcceptDrop:(w,g)=>w.groupName==="col-items","get-child-payload":s.getCardPayload(x.id),onDrop:w=>s.onCardDrop(x.id,w)},{default:_(()=>[(i(!0),d(v,null,C(x.tasks,w=>(i(),O(u,{onDueSoon:g=>w.status="due-soon",onInProgress:g=>w.status="in-progress",onOverDue:g=>w.status="over-due",onDone:g=>w.status="done",onSaveTask:g=>s.saveTask(w,x.id),onOpenLabels:e[0]||(e[0]=g=>n.labelsOpen=!n.labelsOpen),labelsOpen:n.labelsOpen,onClick:g=>s.goToDetail(x,w),key:w.id,task:w,onRemoveTask:g=>s.removeTask(w,x)},null,8,["onDueSoon","onInProgress","onOverDue","onDone","onSaveTask","labelsOpen","onClick","task","onRemoveTask"]))),128))]),_:2},1032,["shouldAcceptDrop","get-child-payload","onDrop"])]),_:2},1032,["group","onUpdateGroup","onSaveGroup","onRemoveGroup"])])]),_:2},1024))),128))]),_:1}),h(P,{onAddGroup:e[2]||(e[2]=x=>n.isAddingGroup=!1),onSaveGroup:s.updateGroup,onCloseGroupAdd:e[3]||(e[3]=x=>n.isAddingGroup=!0),isAddingGroup:n.isAddingGroup},null,8,["onSaveGroup","isAddingGroup"])])])):m("",!0)}var Fs=k(Ns,[["render",zs]]);const qs={name:"trello-labels",props:{labels:Array},methods:{openEditModal(t){this.$emit("editModalOpened",t,"labelsEdit")}}},Ps={class:"trello-labels"},Rs=r("span",{class:"secondary-section-title"},"Labels",-1),Vs={class:"clean-list flex wrap"};function Hs(t,e,o,l,n,s){return i(),d("section",Ps,[Rs,r("ul",Vs,[(i(!0),d(v,null,C(o.labels,a=>(i(),d("li",{key:a.id},[r("div",{class:"label",style:y({"background-color":a.color}),onClick:e[0]||(e[0]=(...c)=>s.openEditModal&&s.openEditModal(...c))},f(a.title),5)]))),128)),r("li",null,[r("button",{class:"btn add-label btn-default",onClick:e[1]||(e[1]=(...a)=>s.openEditModal&&s.openEditModal(...a))})])])])}var Zs=k(qs,[["render",Hs]]);const Ws={name:"trello-members",props:{members:Array},methods:{openEditModal(t){console.log("event",t),this.$emit("editModalOpened",t,"membersEdit")}},components:{userAvatar:G}},Ks={class:"trello-members"},Ys=r("span",{class:"secondary-section-title"},"Members",-1),Qs={class:"clean-list"};function Xs(t,e,o,l,n,s){const a=p("user-avatar");return i(),d("section",Ks,[Ys,r("ul",Qs,[(i(!0),d(v,null,C(o.members,c=>(i(),d("li",{key:c._id,onClick:e[0]||(e[0]=(...u)=>s.openEditModal&&s.openEditModal(...u))},[h(a,{user:c,diameter:32},null,8,["user"])]))),128)),r("li",null,[r("button",{class:"btn-round",onClick:e[1]||(e[1]=(...c)=>s.openEditModal&&s.openEditModal(...c))})])])])}var eo=k(Ws,[["render",Xs]]);const to={name:"trello-txt-input",props:{txt:String,placeholder:{type:String,default:""},denyEmptySave:{type:Boolean,default:!1},resetOnSave:{type:Boolean},allowNext:{type:Boolean,default:!1}},data(){return{updatedTxt:this.txt,isInEdit:!1}},methods:{saveTxt(){if(console.log("saving Text!"),!this.updatedTxt)return console.log("this.denyEmptySave",this.denyEmptySave),this.denyEmptySave||(this.isInEdit=!1),this.$emit("txtIsEmpty","");this.$emit("txtSaved",this.updatedTxt),this.resetOnSave&&(this.updatedTxt=""),this.isInEdit=!1},openEdit(t){console.log("event.target.tagName",typeof t.target.tagName),t.target.tagName!=="BUTTON"&&(this.isInEdit=!0)},cancel(){this.updatedTxt=this.txt,this.isInEdit=!1},next(){this.saveTxt(),!this.isInEdit&&this.allowNext&&(this.isInEdit=!0)},handleClickOutside(){!this.isInEdit||(this.updatedTxt?this.saveTxt():this.cancel())}},computed:{txtToShow(){return!this.updatedTxt&&this.placeholder?this.placeholder:this.updatedTxt}}},so={key:0,class:"flex space-between"},oo={class:"input-title"},ro={key:1,class:"input-edit"},no=["placeholder"],ao={class:"controlls"};function io(t,e,o,l,n,s){const a=N("focus"),c=N("clickoutside");return T((i(),d("section",{class:"trello-txt-input",onClick:e[5]||(e[5]=(...u)=>s.openEdit&&s.openEdit(...u))},[n.isInEdit?(i(),d("div",ro,[T(r("textarea",{cols:"30",rows:"3",onKeydown:[e[0]||(e[0]=R(S((...u)=>s.next&&s.next(...u),["prevent"]),["enter"])),e[1]||(e[1]=R((...u)=>s.cancel&&s.cancel(...u),["esc"]))],"onUpdate:modelValue":e[2]||(e[2]=u=>n.updatedTxt=u),placeholder:o.placeholder},null,40,no),[[M,n.updatedTxt],[a]]),r("div",ao,[r("button",{class:"primary-btn",onClick:e[3]||(e[3]=(...u)=>s.saveTxt&&s.saveTxt(...u))},"Save"),r("button",{class:"cancel-btn",onClick:e[4]||(e[4]=(...u)=>s.cancel&&s.cancel(...u))}),j(t.$slots,"edit-controlls")])])):(i(),d("div",so,[r("span",oo,f(s.txtToShow),1),j(t.$slots,"default")]))])),[[c,s.handleClickOutside]])}var Y=k(to,[["render",io]]);const lo={name:"activity-log",props:{comments:Array,default:[]},data(){return{updatedComments:this.comments?JSON.parse(JSON.stringify(this.comments)):[],byMember:{_id:"u101",fullname:"Tal Tarablus",imgUrl:"http://res.cloudinary.com/shaishar9/image/upload/v1590850482/j1glw3c9jsoz2py0miol.jpg"}}},methods:{formatCreatedAt(t){const e={month:"long",day:"2-digit",hour:"numeric",minute:"numeric"};return new Date(t).toLocaleString(void 0,e)},addComment(t){const e={id:B.makeId(),txt:t,createdAt:Date.now(),byMember:this.byMember};this.updatedComments.unshift(e),this.$emit("updated",JSON.parse(JSON.stringify(this.updatedComments)))}},components:{userAvatar:G,trelloTxtInput:Y}},co={class:"activity-log"},uo=r("span",{class:"section-title text-m icon-activity"},"Activity",-1),ho={class:"clean-list"},mo={class:"user-fullname"},po={class:"comment-time"};function go(t,e,o,l,n,s){const a=p("user-avatar"),c=p("trello-txt-input");return i(),d("section",co,[uo,r("ul",ho,[r("li",null,[h(a,{user:n.byMember},null,8,["user"]),h(c,{placeholder:"Write a comment...","deny-empty-save":"","reset-on-save":"",onTxtSaved:s.addComment},null,8,["onTxtSaved"])]),(i(!0),d(v,null,C(n.updatedComments,u=>(i(),d("li",{key:u.id},[h(a,{user:u.byMember},null,8,["user"]),r("span",mo,f(u.byMember.fullname),1),r("span",po,f(s.formatCreatedAt(u.createdAt)),1),r("p",null,f(u.txt),1)]))),128))])])}var ko=k(lo,[["render",go]]);const bo={name:"trello-checklist",props:{checklist:Object,isEditModalMounted:Boolean},data(){return{updatedChecklist:JSON.parse(JSON.stringify(this.checklist)),isDeleteContentTeleported:!1}},methods:{saveChecklist(){const t=JSON.parse(JSON.stringify(this.updatedChecklist));this.$emit("updated",t)},toggleTodoStatus(t){const e=this.updatedChecklist.todos[t];e.isDone=!e.isDone,this.saveChecklist()},updateChecklistTitle(t){this.updatedChecklist.title=t,this.saveChecklist()},updateTodoTitle(t,e){const o=this.updatedChecklist.todos.findIndex(l=>l.id===e);this.updatedChecklist.todos[o].title=t,this.saveChecklist()},removeTodo(t){this.updatedChecklist.todos.splice(t,1),this.saveChecklist()},removeChecklist(){this.$emit("removed"),this.$emit("editModalClosed")},addTodo(t){this.updatedChecklist.todos.push({id:B.makeId(),title:t,isDone:!1}),this.saveChecklist()},next(){this.$refs.input.$el.click()},openDeleteModal(t){this.isDeleteContentTeleported=!0,this.$emit("teleportContainerOpened",t)}},computed:{completePercentage(){const t=this.updatedChecklist.todos,e=t.length;if(e===0)return 0;const o=t.filter(l=>l.isDone).length;return Math.floor(o/e*100)},passSuccess(){return this.completePercentage===100?"success":""}},watch:{isEditModalMounted(t){t||(this.isDeleteContentTeleported=!1)}},components:{trelloTxtInput:Y}},fo={class:"trello-checklist"},_o={class:"todos clean-list"},yo=["checked","onChange"],vo=["onClick"],Co=["onClick"],To=r("p",{class:"msg"},"Deleting a checklist is permanent and there is no way to get it back.",-1);function Eo(t,e,o,l,n,s){const a=p("trello-txt-input"),c=p("el-progress");return i(),d("section",fo,[h(a,{class:"section-title text-m icon-checklist",txt:n.updatedChecklist.title,onTxtSaved:s.updateChecklistTitle,"deny-empty-save":""},{default:_(()=>[r("button",{class:"btn float-right btn-default",onClick:e[0]||(e[0]=(...u)=>s.openDeleteModal&&s.openDeleteModal(...u))},"Delete")]),_:1},8,["txt","onTxtSaved"]),h(c,{percentage:s.completePercentage,status:s.passSuccess},null,8,["percentage","status"]),r("ul",_o,[(i(!0),d(v,null,C(n.updatedChecklist.todos,(u,b)=>(i(),d("li",{key:u.id},[r("input",{type:"checkbox",checked:u.isDone,onChange:A=>s.toggleTodoStatus(b)},null,40,yo),h(a,{txt:u.title,onTxtSaved:A=>s.updateTodoTitle(A,u.id),onTxtIsEmpty:A=>s.removeTodo(b)},{"edit-controlls":_(()=>[r("button",{class:"remove-btn-quite",onClick:A=>s.removeTodo(b)},null,8,Co)]),default:_(()=>[r("button",{class:"remove-btn-quite",onClick:A=>s.removeTodo(b)},null,8,vo)]),_:2},1032,["txt","onTxtSaved","onTxtIsEmpty"])]))),128))]),h(a,{class:"make-btn",placeholder:"Add an item","deny-empty-save":"","reset-on-save":"",onTxtSaved:s.addTodo,"allow-next":"",ref:"input"},null,8,["onTxtSaved"]),n.isDeleteContentTeleported&&o.isEditModalMounted?(i(),O(W,{key:0,to:".teleport-container"},[To,r("button",{onClick:e[1]||(e[1]=(...u)=>s.removeChecklist&&s.removeChecklist(...u)),class:"delete-btn btn"},"Delete checklist")])):m("",!0)])}var So=k(bo,[["render",Eo]]);const Mo={name:"trello-dates",props:{dueDate:Number,status:String},methods:{openEditModal(t){console.log("event",t),this.$emit("editModalOpened",t,"dateEdit")}},computed:{formatDueDate(){const t={month:"long",day:"2-digit",hour:"numeric",minute:"numeric"};return new Date(this.dueDate).toLocaleString(void 0,t)}}},Bo={class:"trello-dates"},wo=r("span",{class:"secondary-section-title"},"Due date",-1),Oo={class:"flex-container flex align-center"},xo=r("input",{type:"checkbox"},null,-1),Do=r("svg",{width:"24",height:"24",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1);function Ao(t,e,o,l,n,s){return i(),d("section",Bo,[wo,r("div",Oo,[xo,r("button",{class:"btn-default flex align-center",onClick:e[0]||(e[0]=(...a)=>s.openEditModal&&s.openEditModal(...a))},[E(f(s.formatDueDate)+" ",1),r("span",{class:I(["status-tag",o.status])},f(o.status),3),Do])])])}var $o=k(Mo,[["render",Ao]]);const Io={name:"main-edit-modal",props:{modalTitle:String,pos:Object},mounted(){console.log("Main edit modal is mounted!"),this.correctPosition(),new ResizeObserver(()=>{this.correctPosition}).observe(this.$refs.elModal),this.$emit("mounted")},data(){return{posCorrected:JSON.parse(JSON.stringify(this.pos)),maxHeight:window.innerHeight||document.documentElement.clientHeight}},methods:{closeModal(){this.$emit("editModalClosed")},correctPosition(){const t=JSON.parse(JSON.stringify(this.pos)),e=this.$refs.elModal.getBoundingClientRect(),o={h:window.innerHeight||document.documentElement.clientHeight,w:window.innerWidth||document.documentElement.clientWidth};e.left<0&&(t.x=20),e.right>o.w&&(t.x=o.w-e.width-20),this.maxHeight=o.h,t.y+e.height>o.h&&(t.y=o.h-e.height-20),t.y<20&&(t.y=20,this.maxHeight=o.h-80),this.posCorrected=t}},computed:{position(){return this.$refs.elModal},elheight(){if(!!this.$refs.elModal)return this.$refs.elModal.getBoundingClientRect().height}},watch:{},unmounted(){console.log("main edit modal is unmounted"),this.$emit("unmounted")}},Lo={class:"modal-header"},Uo={class:"modal-header-title"};function No(t,e,o,l,n,s){const a=N("clickoutside");return T((i(),d("section",{class:"main-edit-modal",style:y({top:n.posCorrected.y+"px",left:n.posCorrected.x+"px"}),ref:"elModal"},[r("header",Lo,[r("span",Uo,f(o.modalTitle),1),r("button",{class:"exit-btn",onClick:e[0]||(e[0]=(...c)=>s.closeModal&&s.closeModal(...c))})]),r("main",{class:"edit-modal-main",style:y({"max-height":n.maxHeight+"px"})},[j(t.$slots,"default")],4)],4)),[[a,s.closeModal]])}var Go=k(Io,[["render",No]]);const Jo={name:"labels-edit",props:{currTask:Object},data(){return{filterBy:"",labelInEdit:null}},methods:{checkIfTaskLabel(t){return this.taskToEdit.labelIds?this.taskToEdit.labelIds.some(e=>e===t.id):!1},toggleLabelFromTask(t){this.taskToEdit.labelIds||(this.taskToEdit.labelIds=[]);var e=this.taskToEdit.labelIds;const o=e.findIndex(l=>l===t.id);o===-1?e.push(t.id):e.splice(o,1),this.$emit("taskUpdated",this.taskToEdit)},saveLabel(){this.$emit("labelUpdated",this.labelInEdit),this.labelInEdit=null}},computed:{labels(){return this.$store.getters.currBoardLabels},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))},labelsForDisplay(){return this.labels.filter(t=>t.title.toLowerCase().includes(this.filterBy.toLowerCase()))}}},jo={class:"labels-edit"},zo={key:0,class:"all-labels"},Fo=r("span",{class:"secondary-section-title"},"Labels",-1),qo={class:"clean-list"},Po=["onClick"],Ro=["onClick"],Vo={key:1,class:"label-editor"},Ho={class:"controlls flex space-between align-center"};function Zo(t,e,o,l,n,s){return i(),d("section",jo,[n.labelInEdit?(i(),d("div",Vo,[r("div",{class:I(["label",[s.checkIfTaskLabel(n.labelInEdit)?"selected":""]]),style:y({"background-color":n.labelInEdit.color})},[T(r("input",{type:"text",placeholder:"Enter label name...","onUpdate:modelValue":e[1]||(e[1]=a=>n.labelInEdit.title=a)},null,512),[[M,n.labelInEdit.title]])],6),r("div",Ho,[r("button",{class:"primary-btn",onClick:e[2]||(e[2]=(...a)=>s.saveLabel&&s.saveLabel(...a))},"Save"),r("button",{class:"btn",onClick:e[3]||(e[3]=a=>n.labelInEdit=null)},"Cancel")])])):(i(),d("div",zo,[T(r("input",{class:"search",type:"text",placeholder:"Search labels...","onUpdate:modelValue":e[0]||(e[0]=a=>n.filterBy=a)},null,512),[[M,n.filterBy]]),Fo,r("ul",qo,[(i(!0),d(v,null,C(s.labelsForDisplay,a=>(i(),d("li",{key:a.id},[r("div",{class:I(["label",[s.checkIfTaskLabel(a)?"selected":"",a.class]]),style:y({"background-color":a.color}),onClick:c=>s.toggleLabelFromTask(a)},[r("span",null,f(a.title),1)],14,Po),r("span",{class:"edit-icon",onClick:S(c=>n.labelInEdit=JSON.parse(JSON.stringify(a)),["stop"])},null,8,Ro)]))),128))])]))])}var Wo=k(Jo,[["render",Zo]]);const Ko={name:"members-edit",props:{currTask:Object},data(){return{filterBy:""}},methods:{checkIfTaskMember(t){return this.taskToEdit.members?this.taskToEdit.members.some(e=>e._id===t):!1},async toggleMembership(t){this.taskToEdit.members||(this.taskToEdit.members=[]);var e=this.taskToEdit.members;const o=e.findIndex(l=>l._id===t._id);o===-1?e.push(t):e.splice(o,1),this.$emit("taskUpdated",this.taskToEdit)}},computed:{currBoardMembers(){return this.$store.getters.currBoardMembers},membersForDisplay(){return this.currBoardMembers.filter(t=>t.username.toLowerCase().includes(this.filterBy.toLowerCase())||t.fullname.toLowerCase().includes(this.filterBy.toLowerCase()))},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}},components:{userAvatar:G}},Yo={class:"members-edit"},Qo=r("span",{class:"secondary-section-title"},"Board members",-1),Xo=["onClick"],er={class:"member"};function tr(t,e,o,l,n,s){const a=p("user-avatar");return i(),d("section",Yo,[T(r("input",{class:"search",type:"text",placeholder:"Search members","onUpdate:modelValue":e[0]||(e[0]=c=>n.filterBy=c)},null,512),[[M,n.filterBy]]),Qo,r("ul",null,[(i(!0),d(v,null,C(s.membersForDisplay,c=>(i(),d("li",{key:c._id,class:I(["flex align-center",{selected:s.checkIfTaskMember(c._id)}]),onClick:u=>s.toggleMembership(c)},[h(a,{user:c,diameter:32},null,8,["user"]),r("div",er,[r("span",null,f(c.fullname+" ("+c.username+")"),1)])],10,Xo))),128))])])}var sr=k(Ko,[["render",tr]]);const or={name:"checklists-edit",props:{currTask:Object},data(){return{newChecklist:{id:"",title:"Checklist",todos:[]},todosToCopy:[]}},methods:{createChecklist(){this.newChecklist.id=B.makeId(),this.newChecklist.todos=JSON.parse(JSON.stringify(this.todosToCopy.flat())).map(t=>(console.log("todo",t),t.id=B.makeId(),t)),this.taskToEdit.checklists||(this.taskToEdit.checklists=[]),this.taskToEdit.checklists.push(JSON.parse(JSON.stringify(this.newChecklist))),this.$emit("taskUpdated",this.taskToEdit),this.newChecklist={id:null,title:"Checklist",todos:[]},this.$emit("modalClosed")}},computed:{checklists(){return this.$store.getters.currBoardChecklists},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}}},rr={class:"checklists-edit"},nr=r("span",{class:"secondary-section-title"},"Title",-1),ar=r("span",{class:"secondary-section-title"},"Copy items from...",-1),ir=r("option",{value:[]},"(none)",-1),lr=["label"],dr=["value"];function cr(t,e,o,l,n,s){const a=N("focus");return i(),d("section",rr,[nr,T(r("input",{class:"search",type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>n.newChecklist.title=c)},null,512),[[a],[M,n.newChecklist.title]]),ar,T(r("select",{"onUpdate:modelValue":e[1]||(e[1]=c=>n.todosToCopy=c),multiple:""},[ir,(i(!0),d(v,null,C(s.checklists,c=>(i(),d("optgroup",{key:c.taskId,label:c.taskTitle},[(i(!0),d(v,null,C(c.checklists,u=>(i(),d("option",{key:u.id,value:u.todos},f(u.title),9,dr))),128))],8,lr))),128))],512),[[ye,n.todosToCopy]]),r("button",{class:"primary-btn",onClick:e[2]||(e[2]=(...c)=>s.createChecklist&&s.createChecklist(...c))},"Add")])}var ur=k(or,[["render",cr]]);const hr={name:"date-edit",props:{currTask:Object},components:{Datepicker:ve},data(){return{startDate:null,dueDate:null,taskDate:null,currTaskDates:{startDate:null,endDate:null,endTime:null,date:null}}},computed:{taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}},methods:{selectDate(){var t=document.querySelector(".dp__selection_preview"),e=Date.parse(t.innerText);this.taskToEdit.dueDate=e,console.log(this.taskToEdit),this.dueDate-Date.now()<0&&(this.taskToEdit.status="over-due"),this.dueDate-Date.now()<86400*1e3&&(this.taskToEdit.status="due-soon"),this.dueDate-Date.now()>86400*1e3&&(this.taskToEdit.status="in-progress"),this.$emit("taskUpdated",this.taskToEdit)},test(){console.log(modelValue)}}},mr={class:"date-edit"},pr=r("p",{class:"date-title"},"Due date",-1);function gr(t,e,o,l,n,s){const a=p("Datepicker");return i(),d("section",mr,[h(a,{AutoApply:"",modelValue:n.taskDate,"onUpdate:modelValue":[e[1]||(e[1]=c=>n.taskDate=c),s.test],utc:"",inline:"",startTime:{},monthChangeOnScroll:!1,weekStart:"0",monthNameFormat:"long"},{"action-select":_(()=>[r("button",{class:"btn-save-date",onClick:e[0]||(e[0]=(...c)=>s.selectDate&&s.selectDate(...c))},"Save")]),_:1},8,["modelValue","onUpdate:modelValue"]),pr,r("pre",null,f(n.taskDate),1)])}var kr=k(hr,[["render",gr]]);const he=t=>{const e="dxj8szufc",l="https://api.cloudinary.com/v1_1/dxj8szufc/image/upload",n=new FormData;return n.append("file",t.target.files[0]),n.append("upload_preset",e),fetch(l,{method:"POST",body:n}).then(s=>s.json()).then(s=>s).catch(s=>{throw console.error(s),s})},br={name:"attachment-edit",props:{currTask:Object},created(){this.currStatus=this.statusOptions.waiting},data(){return{currStatus:null,statusOptions:{waiting:{imgName:"Upload-PNG-Image-File.png",txt:"Upload file",isWaiting:!0},loading:{imgName:"loader.gif",txt:"Loading...",isLoading:!0,txtColor:"#00c2e0"},complete:{imgName:"checkmark-cut.gif",txt:"Attachment added successfuly!",txtColor:"#61bd4f"},failed:{imgName:"ezgif.com-gif-maker.gif",txt:"OOPS! File upload failed!",txtColor:"#eb5a46"}}}},methods:{async onUpload(t){console.log("ev.target.files[0]",t.target.files[0]),this.currStatus=this.statusOptions.loading;try{const e=await he(t);this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(e),console.log("this.taskToEdit",this.taskToEdit),this.$emit("taskUpdated",this.taskToEdit),this.currStatus=this.statusOptions.complete}catch{this.currStatus=this.statusOptions.failed}setTimeout(this.closeModal,2e3)},closeModal(){this.$emit("editModalClosed")}},computed:{taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}}},fr={class:"attachment-edit flex column"},_r=r("span",{class:"secondary-section-title"},"Upload file",-1),yr={key:0},vr=["src","alt"],Cr={key:1,class:"status-msg flex align-center"},Tr=["src"];function Er(t,e,o,l,n,s){const a=N("focus");return i(),d("section",fr,[_r,n.currStatus.isWaiting?(i(),d("label",yr,[r("img",{class:"upload-icon",src:"../../../../src/assets/"+n.currStatus.imgName,alt:n.currStatus.txt},null,8,vr),T(r("input",{class:"search",type:"file",onChange:e[0]||(e[0]=(...c)=>s.onUpload&&s.onUpload(...c))},null,544),[[a]])])):(i(),d("div",Cr,[r("span",{class:"secondary-section-title",style:y({color:n.currStatus.txtColor})},f(n.currStatus.txt),5),r("img",{class:"status-icon",src:"../../../../src/assets/"+n.currStatus.imgName},null,8,Tr)]))])}var Sr=k(br,[["render",Er]]);const Mr={name:"trello-attachments",props:{attachments:Array,isEditModalMounted:Boolean},data(){return{attachmentToEditIdx:NaN,isDeleteContentTeleported:!1,isNameContentTeleported:!1}},methods:{removeAttachment(){this.updatedAttachments.splice(this.attachmentToEditIdx,1),this.$emit("updated",this.updatedAttachments),this.$emit("editModalClosed")},openEditModal(t){this.$emit("editModalOpened",t)},openDeleteModal(t,e){console.log("event",t),this.attachmentToEditIdx=e,this.isDeleteContentTeleported=!0,this.$emit("teleportContainerOpened",t)},openNameModal(t,e){this.attachmentToEditIdx=e,this.isNameContentTeleported=!0,this.$emit("teleportContainerOpened",t)}},computed:{updatedAttachments(){return JSON.parse(JSON.stringify(this.attachments))}},watch:{isEditModalMounted(t){t||(this.isDeleteContentTeleported=!1,this.isNameContentTeleported=!1)}}},Br={class:"trello-attachments"},wr=r("div",{class:"section-title text-m icon-attachment"},"Attachments",-1),Or={class:"attachments clean-list"},xr=["src","alt"],Dr={class:"file-details"},Ar={class:"attachment-name"},$r={class:"attachment-addedAt"},Ir={class:"attachment-delete"},Lr=["onClick"],Ur={class:"attachment-edit-name"},Nr=["onClick"],Gr={class:"attachment-make-cover"},Jr=["onClick"],jr=r("p",{class:"msg"},"Deleting an attachment is permanent. There is no undo.",-1);function zr(t,e,o,l,n,s){return i(),d("section",Br,[wr,r("ul",Or,[(i(!0),d(v,null,C(o.attachments,(a,c)=>(i(),d("li",{class:"flex",key:a.asset_id},[r("img",{class:"img-preview",src:a.secure_url,alt:a.original_filename},null,8,xr),r("p",Dr,[r("span",Ar,f(a.original_filename+"."+a.format),1),r("span",$r,"Added at "+f(a.created_at),1),r("span",Ir,[r("a",{href:"#",onClick:S(u=>s.openDeleteModal(u,c),["prevent"])},"Delete",8,Lr)]),r("span",Ur,[r("a",{href:"#",onClick:S(u=>s.openNameModal(u,c),["prevent"])},"Edit",8,Nr)]),r("span",Gr,[r("a",{href:"#",onClick:S(u=>t.makeCover(c),["prevent"])},"Make-cover",8,Jr)])])]))),128))]),r("button",{class:"btn",onClick:e[0]||(e[0]=(...a)=>s.openEditModal&&s.openEditModal(...a))},"Add an attachment"),n.isDeleteContentTeleported&&o.isEditModalMounted?(i(),O(W,{key:0,to:".teleport-container"},[jr,r("button",{onClick:e[1]||(e[1]=(...a)=>s.removeAttachment&&s.removeAttachment(...a)),class:"delete-btn btn"},"Delete")])):m("",!0)])}var Fr=k(Mr,[["render",zr]]);const qr={name:"cover-edit",props:{currTask:Object},data(){return{currStatus:null,statusOptions:{waiting:{imgName:"Upload-PNG-Image-File.png",txt:"Upload file",isWaiting:!0},loading:{imgName:"loader.gif",txt:"Loading...",isLoading:!0},complete:{imgName:"checkmark-cut.gif",txt:"Attachment added successfuly!"},failed:{imgName:"ezgif.com-gif-maker.gif",txt:"OOPS! File upload failed!"}}}},created(){this.currStatus=this.statusOptions.waiting},methods:{openSearch(){this.$emit("openSearch")},async onUpload(t){console.log("ev.target.files[0]",t.target.files[0]),this.currStatus=this.statusOptions.loading;try{const e=await he(t);console.log(e),this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(e),console.log("this.taskToEdit",this.taskToEdit),this.$emit("taskUpdated",this.taskToEdit),this.currStatus=this.statusOptions.complete}catch{this.currStatus=this.statusOptions.failed}},setCoverClr(t){console.log(this.taskToEdit),this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.bg=t,this.taskToEdit.style.size||(this.taskToEdit.style.size="small"),this.$emit("taskUpdated",this.taskToEdit)},setCoverImg(t){this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.bg=t,this.taskToEdit.style.size||(this.taskToEdit.style.size="big"),this.$emit("taskUpdated",this.taskToEdit),console.log(this.currTask)},setCoverSize(t){console.log(this.taskToEdit),this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.size=t,this.taskToEdit.style.bg||(this.taskToEdit.style.bg="#7BC86C"),this.$emit("taskUpdated",this.taskToEdit)},removeCover(){delete this.taskToEdit.style,console.log(this.taskToEdit),this.$emit("taskUpdated",this.taskToEdit)}},computed:{getBg(){var t=JSON.parse(JSON.stringify(this.currTask));if(t.style||(t.style={},t.style.bg=""),t.style.bg)return console.log(t.style),t.style.bg.split("")[0]==="#"?`background-color: ${t.style.bg}; opacity:1`:`background-image: url('${t.style.bg}'); opacity:1; background-color:transparent;`},getLine(){if(this.currTask.style)return"colorized"},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}},components:{}},Pr={class:"cover-edit"},Rr=r("h4",null,"Size",-1),Vr={class:"flex center align-center"},Hr=["checked"],Zr={class:"cover-opt small"},Wr=Ce('<div class="line"></div><div class="line"></div><div class="cube"></div><div class="cube"></div><div class="circle"></div>',5),Kr=[Wr],Yr=["checked"],Qr={class:"cover-opt big"},Xr=r("div",{class:"line"},null,-1),en=r("div",{class:"line"},null,-1),tn=[Xr,en],sn=r("h4",null,"Colors",-1),on={class:"btn-cover-container flex center wrap"},rn=["checked"],nn=r("div",{class:"btn-clr green"},null,-1),an=["checked"],ln=r("div",{class:"btn-clr yellow"},null,-1),dn=["checked"],cn=r("div",{class:"btn-clr orange"},null,-1),un=["checked"],hn=r("div",{class:"btn-clr red"},null,-1),mn=["checked"],pn=r("div",{class:"btn-clr purple"},null,-1),gn=["checked"],kn=r("div",{class:"btn-clr blue"},null,-1),bn=["checked"],fn=r("div",{class:"btn-clr lightblue"},null,-1),_n=["checked"],yn=r("div",{class:"btn-clr turquoise"},null,-1),vn=["checked"],Cn=r("div",{class:"btn-clr pink"},null,-1),Tn=["checked"],En=r("div",{class:"btn-clr navy"},null,-1),Sn=r("h4",null,"Attachments",-1),Mn={key:1,class:"btn-cover-container img-container flex wrap"},Bn=["onClick"],wn=["checked"],On={class:"btn-clr cover-opt-img"},xn=["src"],Dn={key:2,class:"btn-upload-cover"},An=E(" Upload a cover image "),$n={key:3},In=["src"];function Ln(t,e,o,l,n,s){return i(),d("section",Pr,[Rr,r("div",Vr,[r("label",null,[r("input",{onClick:e[0]||(e[0]=a=>s.setCoverSize("small")),checked:o.currTask.style&&o.currTask.style.size=="small",type:"radio",name:"cover-opt"},null,8,Hr),r("div",Zr,[r("div",{class:"cover-opt-header",style:y(s.getBg)},null,4),r("div",{class:I(["cover-opt-lines",s.getLine])},Kr,2)])]),r("label",null,[r("input",{onClick:e[1]||(e[1]=a=>s.setCoverSize("big")),checked:o.currTask.style&&o.currTask.style.size=="big",type:"radio",name:"cover-opt",value:"true"},null,8,Yr),r("div",Qr,[r("div",{style:y(s.getBg),class:"big-container"},[r("div",{class:I(["cover-opt-lines",s.getLine])},tn,2)],4)])])]),o.currTask.style?(i(),d("button",{key:0,onClick:e[2]||(e[2]=(...a)=>s.removeCover&&s.removeCover(...a)),class:"btn-remove-cover"},"Remove cover")):m("",!0),sn,r("div",on,[r("label",{onClick:e[3]||(e[3]=a=>s.setCoverClr("#7BC86C"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#7BC86C",type:"radio",name:"btn-clr"},null,8,rn),nn]),r("label",{onClick:e[4]||(e[4]=a=>s.setCoverClr("#f5dd29"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#f5dd29",type:"radio",name:"btn-clr"},null,8,an),ln]),r("label",{onClick:e[5]||(e[5]=a=>s.setCoverClr("#FFAF3F"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#FFAF3F",type:"radio",name:"btn-clr"},null,8,dn),cn]),r("label",{onClick:e[6]||(e[6]=a=>s.setCoverClr("#EF7564"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#EF7564",type:"radio",name:"btn-clr"},null,8,un),hn]),r("label",{onClick:e[7]||(e[7]=a=>s.setCoverClr("#CD8DE5"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#CD8DE5",type:"radio",name:"btn-clr"},null,8,mn),pn]),r("label",{onClick:e[8]||(e[8]=a=>s.setCoverClr("#5BA4CF"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#5BA4CF",type:"radio",name:"btn-clr"},null,8,gn),kn]),r("label",{onClick:e[9]||(e[9]=a=>s.setCoverClr("#29CCE5"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#29CCE5",type:"radio",name:"btn-clr"},null,8,bn),fn]),r("label",{onClick:e[10]||(e[10]=a=>s.setCoverClr("#6DECA9"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#6DECA9",type:"radio",name:"btn-clr"},null,8,_n),yn]),r("label",{onClick:e[11]||(e[11]=a=>s.setCoverClr("#FF8ED4"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#FF8ED4",type:"radio",name:"btn-clr"},null,8,vn),Cn]),r("label",{onClick:e[12]||(e[12]=a=>s.setCoverClr("#172B4D"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#172B4D",type:"radio",name:"btn-clr"},null,8,Tn),En])]),Sn,o.currTask.attachments?(i(),d("div",Mn,[(i(!0),d(v,null,C(o.currTask.attachments,a=>(i(),d("label",{key:a.asset_id,onClick:c=>s.setCoverImg(a.secure_url)},[r("input",{checked:o.currTask.style&&o.currTask.style.bg==a.secure_url,type:"radio",name:"btn-clr"},null,8,wn),r("div",On,[r("img",{class:"cover-opt-img",src:a.secure_url,alt:""},null,8,xn)])],8,Bn))),128))])):m("",!0),n.currStatus.isWaiting||!n.currStatus.isLoading?(i(),d("label",Dn,[An,r("input",{type:"file",class:"attach",onChange:e[13]||(e[13]=(...a)=>s.onUpload&&s.onUpload(...a))},null,32)])):m("",!0),n.currStatus.isLoading?(i(),d("div",$n,[r("img",{src:"../../../../src/assets/"+n.currStatus.imgName},null,8,In),r("span",null,f(n.currStatus.txt),1)])):m("",!0),r("button",{onClick:e[14]||(e[14]=S((...a)=>s.openSearch&&s.openSearch(...a),["stop"])),class:"btn-search-photo"},"Search for photos")])}var Un=k(qr,[["render",Ln]]);const Nn={name:"teleport-container"},Gn={class:"teleport-container"};function Jn(t,e,o,l,n,s){return i(),d("section",Gn)}var jn=k(Nn,[["render",Jn]]);const zn={query:Fn};async function Fn(t){return(await de({method:"get",url:"https://api.unsplash.com/search/photos",params:{client_id:"wfRMyNNl6BtufTtEgOm1agD3oTHPI-ymhw9iJXaCr98",query:t,page:1,per_page:20,orientation:"landscape",w:"2560",h:"1560"}})).data}const qn={name:"search-photo",props:{currTask:Object},data(){return{isSearching:!1,res:null}},created(){this.searchImg=B.debounce(this.searchImg,1e3)},methods:{async searchImg(){const t=this.$refs.filterBy.value;if(!t){this.isSearching=!1,this.res=null;return}this.res=await zn.query(t),this.isSearching=!0,console.log(this.res),this.res=this.res.results.map(e=>({small:e.urls.thumb,regular:e.urls.regular,big:e.urls.full,asset_id:e.id,format:"png",original_filename:e.alt_description,secure_url:e.urls.regular,created_at:e.created_at}))},setImg(t){this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.bg=t.regular,this.taskToEdit.style.size||(this.taskToEdit.style.size="big"),this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(t),this.$emit("taskUpdated",this.taskToEdit),this.$emit("closeSearch")},setSuggestSearch(t){this.$refs.filterBy.value=t,this.searchImg()}},computed:{taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}}},Pn={class:"search-photo"},Rn={key:0},Vn=r("h4",null,"Suggested searches",-1),Hn={class:"suggested-container flex wrap"},Zn={key:1},Wn=r("h4",null,"Results",-1),Kn={class:"search-results flex wrap"},Yn=["onClick"],Qn=["src"];function Xn(t,e,o,l,n,s){return i(),d("section",Pn,[r("input",{ref:"filterBy",onInput:e[0]||(e[0]=(...a)=>s.searchImg&&s.searchImg(...a)),class:"img-search-input",type:"text",placeholder:"Search for photos"},null,544),n.isSearching?m("",!0):(i(),d("section",Rn,[Vn,r("div",Hn,[r("button",{onClick:e[1]||(e[1]=a=>s.setSuggestSearch("Perspective")),class:"btn-search-opt"},"Perspective"),r("button",{onClick:e[2]||(e[2]=a=>s.setSuggestSearch("Productivity")),class:"btn-search-opt"},"Productivity"),r("button",{onClick:e[3]||(e[3]=a=>s.setSuggestSearch("Oraganization")),class:"btn-search-opt"},"Oraganization"),r("button",{onClick:e[4]||(e[4]=a=>s.setSuggestSearch("Colorful")),class:"btn-search-opt"},"Colorful"),r("button",{onClick:e[5]||(e[5]=a=>s.setSuggestSearch("Nature")),class:"btn-search-opt"},"Nature"),r("button",{onClick:e[6]||(e[6]=a=>s.setSuggestSearch("Business")),class:"btn-search-opt"},"Business"),r("button",{onClick:e[7]||(e[7]=a=>s.setSuggestSearch("Minimal")),class:"btn-search-opt"},"Minimal"),r("button",{onClick:e[8]||(e[8]=a=>s.setSuggestSearch("Space")),class:"btn-search-opt"},"Space"),r("button",{onClick:e[9]||(e[9]=a=>s.setSuggestSearch("Animals")),class:"btn-search-opt"},"Animals")])])),n.res?(i(),d("section",Zn,[Wn,r("section",Kn,[(i(!0),d(v,null,C(n.res,a=>(i(),d("div",{onClick:c=>s.setImg(a),class:"res-container",key:a},[r("img",{src:a.small,alt:""},null,8,Qn)],8,Yn))),128))])])):m("",!0)])}var ea=k(qn,[["render",Xn]]);const ta={name:"task-details",async created(){this.currTaskId=this.$route.params.taskId,this.parentGroupId=this.$route.params.groupId;const{groupId:t,taskId:e}=this.$route.params;await this.$store.dispatch({type:"loadCurrTask",groupId:t,taskId:e})},data(){return{editModalStatus:{isOpen:!1,editType:"",pos:null,title:""},isDeleteContentTeleported:!1,isEditModalMounted:!1,currTaskId:"",parentGroupId:""}},mounted(){},methods:{checkImg(){return this.currTask.style.bg.split("")[0]!=="#"},openSearch(){this.editModalStatus.editType="search-photo"},async saveCurrTask(t=null){const e=t||this.currTask;await this.$store.dispatch({type:"saveTask",groupId:this.parentGroupId,taskToSave:JSON.parse(JSON.stringify(e))}),console.log("Current task saved!")},async removeTask(){const t=this.$route.params.groupId,e=await this.$store.dispatch({type:"removeTask",groupId:t,taskId:this.currTask.id});this.$router.push(`/board/${e._id}`)},updateDesc(t){console.log("updatedDesc",t),this.currTask.description=t,this.saveCurrTask()},updateChecklist(t){const e=this.currTask.checklists.findIndex(o=>o.id===t.id);this.currTask.checklists[e]=t,this.saveCurrTask()},updateLabel(t){t=JSON.parse(JSON.stringify(t)),this.$store.dispatch({type:"updateLabel",label:t})},removeChecklist(t){this.currTask.checklists.splice(t,1),this.saveCurrTask()},updateComments(t){this.currTask.comments=t,this.saveCurrTask()},updateAttachments(t){this.currTask.attachments=t,this.saveCurrTask()},closeModal(){this.saveCurrTask();const t=this.$route.params.boardId;this.$router.push({name:"board",params:{boardId:t}})},openDeleteModal(t){this.isDeleteContentTeleported=!0,this.openEditModal(t,"teleportContainer","Delete card?")},openEditModal(t,e,o=""){console.log("editType",e);var l;if(!t)l=this.pos;else{const s=t.target.getBoundingClientRect();l={x:s.x,y:s.y-s.height-10}}if(!o)switch(e){case"labels-edit":console.log("inside switch labels edit"),o="Labels";break;case"members-edit":o="Members";break;case"checklists-edit":o="Add checklist";break;case"date-edit":o="Dates";break;case"attachment-edit":o="Attach from computer";break;case"cover-edit":o="Cover";break;case"searchPhoto":o="Photo search"}console.log("title",o);const n={isOpen:!0,editType:e,pos:l,title:o};this.editModalStatus=n},closeEditModal(){this.editModalStatus={isOpen:!1,editType:"",pos:null,title:""}}},computed:{getCoverClr(){return`background-color: ${this.currTask.style.bg} !important`},boardLabels(){return this.$store.getters.currBoardLabels},hasLabels(){return this.currTaskLabels&&this.currTaskLabels.length>0},hasMembers(){if(!!this.currTask)return this.currTask.members&&this.currTask.members.length>0},hasAttachments(){return this.currTask.attachments&&this.currTask.attachments.length},currTask(){return this.$store.getters.getCurrTask},currTaskLabels(){return!this.currTask.labelIds||!this.currTask.labelIds.length?[]:this.boardLabels.filter(t=>this.currTask.labelIds.includes(t.id))}},watch:{isEditModalMounted(t){t||(this.isDeleteContentTeleported=!1)}},components:{mainEditModal:Go,trelloLabels:Zs,trelloMembers:eo,activityLog:ko,trelloChecklist:So,trelloTxtInput:Y,trelloDates:$o,labelsEdit:Wo,membersEdit:sr,checklistsEdit:ur,dateEdit:kr,attachmentEdit:Sr,trelloAttachments:Fr,coverEdit:Un,teleportContainer:jn,searchPhoto:ea}},sa={key:0,class:"task-details"},oa={class:"modal-screen flex center"},ra={class:"modal-container flex column center"},na={key:1,class:"cover"},aa=["src"],ia={class:"modal-header section-title text-l icon-task-title"},la={class:"flex-container flex space-between"},da={class:"modal-main"},ca={key:0,class:"notations flex wrap"},ua={class:"description"},ha=r("span",{class:"section-title text-m icon-description"},"Description",-1),ma={key:1,class:"attachments"},pa={key:2,class:"checklists"},ga={class:"activity-log"},ka={class:"modal-sidebar flex column"},ba=r("span",{class:"secondary-section-title"},"Add to card",-1),fa=r("span",{class:"secondary-section-title"},"Actions",-1),_a=r("p",{class:"msg"},"All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo.",-1);function ya(t,e,o,l,n,s){const a=p("trello-members"),c=p("trello-labels"),u=p("trello-dates"),b=p("trello-txt-input"),A=p("trello-attachments"),q=p("trello-checklist"),P=p("activity-log"),x=p("main-edit-modal"),w=N("clickoutside");return s.currTask?(i(),d("section",sa,[r("div",oa,[T((i(),d("div",ra,[m("",!0),s.currTask.style?(i(),d("div",na,[s.currTask.style&&s.currTask.style.bg.split("")[0]!=="#"?(i(),d("img",{key:0,src:s.currTask.style.bg,alt:""},null,8,aa)):(i(),d("div",{key:1,style:y(s.getCoverClr),class:"cover-clr"},null,4))])):m("",!0),r("button",{class:"exit-btn",onClick:e[0]||(e[0]=(...g)=>s.closeModal&&s.closeModal(...g))}),r("div",ia,f(s.currTask.title),1),r("div",la,[r("div",da,[(i(),d("div",ca,[s.hasMembers?(i(),O(a,{key:0,members:s.currTask.members,onEditModalOpened:s.openEditModal},null,8,["members","onEditModalOpened"])):m("",!0),s.hasLabels?(i(),O(c,{key:1,labels:s.currTaskLabels,onEditModalOpened:s.openEditModal},null,8,["labels","onEditModalOpened"])):m("",!0),s.currTask.dueDate?(i(),O(u,{key:2,dueDate:s.currTask.dueDate,status:s.currTask.status,onEditModalOpened:s.openEditModal},null,8,["dueDate","status","onEditModalOpened"])):m("",!0)])),r("div",ua,[ha,h(b,{class:"make-btn",txt:s.currTask.description,placeholder:"Add a more detailed description\u2026",onTxtSaved:s.updateDesc,onTxtIsEmpty:s.updateDesc},null,8,["txt","onTxtSaved","onTxtIsEmpty"])]),s.hasAttachments?(i(),d("div",ma,[h(A,{attachments:s.currTask.attachments,isEditModalMounted:n.isEditModalMounted,onEditModalOpened:e[1]||(e[1]=g=>s.openEditModal(g,"attachmentEdit")),onTeleportContainerOpened:e[2]||(e[2]=g=>s.openEditModal(g,"teleportContainer","Delete attachment?")),onUpdated:s.updateAttachments},null,8,["attachments","isEditModalMounted","onUpdated"])])):m("",!0),(i(),d("div",pa,[(i(!0),d(v,null,C(s.currTask.checklists,(g,ke)=>(i(),O(q,{key:g.id,checklist:g,isEditModalMounted:n.isEditModalMounted,onUpdated:s.updateChecklist,onRemoved:ee=>s.removeChecklist(ke),onEditModalClosed:s.closeEditModal,onTeleportContainerOpened:e[3]||(e[3]=ee=>s.openEditModal(ee,"teleportContainer","Delete Checklist?"))},null,8,["checklist","isEditModalMounted","onUpdated","onRemoved","onEditModalClosed"]))),128))])),r("div",ga,[h(P,{comments:s.currTask.comments,onUpdated:s.updateComments},null,8,["comments","onUpdated"])])]),r("div",ka,[ba,r("button",{class:"btn side-bar icon-members",onClick:e[4]||(e[4]=g=>s.openEditModal(g,"members-edit"))},"Members"),r("button",{class:"btn side-bar icon-labels",onClick:e[5]||(e[5]=g=>s.openEditModal(g,"labels-edit"))},"Labels"),r("button",{class:"btn side-bar icon-checklist",onClick:e[6]||(e[6]=g=>s.openEditModal(g,"checklists-edit"))},"Checklist"),r("button",{class:"btn side-bar icon-dates",onClick:e[7]||(e[7]=g=>s.openEditModal(g,"date-edit"))},"Dates"),r("button",{class:"btn side-bar icon-attachment",onClick:e[8]||(e[8]=g=>s.openEditModal(g,"attachment-edit"))},"Attachment"),r("button",{class:"btn side-bar icon-cover",onClick:e[9]||(e[9]=g=>s.openEditModal(g,"cover-edit"))},"Cover"),fa,r("button",{class:"btn side-bar icon-copy",onClick:e[10]||(e[10]=g=>s.openEditModal(g,"copy-edit"))},"Copy"),r("button",{class:"btn delete-btn side-bar icon-delete",onClick:e[11]||(e[11]=(...g)=>s.openDeleteModal&&s.openDeleteModal(...g))},"Delete")])]),h(Z,{"enter-active-class":"animate__animated animate__fadeIn animate__faster","leave-active-class":"animate__animated animate__fadeOut animate__faster"},{default:_(()=>[n.editModalStatus.isOpen?(i(),O(x,{key:0,"modal-title":n.editModalStatus.title,onEditModalClosed:s.closeEditModal,pos:n.editModalStatus.pos,onMounted:e[14]||(e[14]=g=>this.isEditModalMounted=!0),onUnmounted:e[15]||(e[15]=g=>this.isEditModalMounted=!1)},{default:_(()=>[(i(),O(Te(n.editModalStatus.editType),{currTask:s.currTask,onTaskUpdated:s.saveCurrTask,onEditModalClosed:s.closeEditModal,onLabelUpdated:s.updateLabel,onOpenSearch:e[12]||(e[12]=g=>s.openEditModal(void 0,"search-photo")),onCloseSearch:e[13]||(e[13]=g=>s.openEditModal(void 0,"cover-edit"))},null,8,["currTask","onTaskUpdated","onEditModalClosed","onLabelUpdated"]))]),_:1},8,["modal-title","onEditModalClosed","pos"])):m("",!0)]),_:1}),n.isDeleteContentTeleported&&n.isEditModalMounted?(i(),O(W,{key:2,to:".teleport-container"},[_a,r("button",{onClick:e[16]||(e[16]=(...g)=>s.removeTask&&s.removeTask(...g)),class:"delete-btn btn"},"Delete")])):m("",!0)])),[[w,s.closeModal]])])])):m("",!0)}var va=k(ta,[["render",ya]]);const Ca={data(){return{user:{username:null,password:null}}},methods:{async login(){try{await this.$store.dispatch({type:"login",userCred:this.user})&&this.$router.push("/board/6244b761207696d8ae1f3618")}catch(t){console.log("ERROR: cannot login. User and/or password are incorrect",t);const e={txt:"Invalid username or password",type:"error"};await this.$store.dispatch({type:"showMsg",msg:e})}}}},Ta={class:"login-signup"},Ea={class:"header-home"},Sa=r("div",{class:"logo"},[r("span",{class:"material-icons-outlined logo-icon"}),E("Mello ")],-1),Ma={class:"homepage-nav"},Ba=E("Home"),wa=r("span",null," | ",-1),Oa=E("Sign up"),xa={class:"main-container login-container"},Da=r("p",null,"Log in to Mello",-1),Aa=r("button",{class:"login"},"Log in",-1),$a=E("Sign up for an account");function Ia(t,e,o,l,n,s){const a=p("router-link");return i(),d("div",Ta,[r("section",Ea,[Sa,r("nav",Ma,[h(a,{to:"/",class:"login"},{default:_(()=>[Ba]),_:1}),wa,h(a,{to:"/signup",class:"signup"},{default:_(()=>[Oa]),_:1})])]),r("div",xa,[Da,r("form",{onSubmit:e[2]||(e[2]=S((...c)=>s.login&&s.login(...c),["prevent"]))},[T(r("input",{type:"text",name:"username","onUpdate:modelValue":e[0]||(e[0]=c=>n.user.username=c),placeholder:"Enter username",required:""},null,512),[[M,n.user.username]]),T(r("input",{type:"password",name:"password","onUpdate:modelValue":e[1]||(e[1]=c=>n.user.password=c),placeholder:"Enter password",required:""},null,512),[[M,n.user.password]]),Aa],32),h(a,{class:"btn-signup",to:"/signup"},{default:_(()=>[$a]),_:1})])])}var La=k(Ca,[["render",Ia]]);const Ua={data(){return{user:{fullname:null,username:null,email:null,password:null,imgUrl:"",mentions:[]},isLoading:!1,isLoaded:!1}},methods:{async onUploadImg(t){try{this.isLoading=!0;const e=await uploadImg(t);this.user.imgUrl=e.url,this.isLoaded=!0}catch(e){throw console.log("cannot upload image",e),e}finally{this.isLoading=!1}},async signup(){await this.$store.dispatch({type:"signup",userCred:this.user}),this.$router.push("/board/6244b761207696d8ae1f3618")}}},Na={class:"login-signup"},Ga={class:"header-home"},Ja=r("div",{class:"logo"},[r("span",{class:"material-icons-outlined logo-icon"}),E("Mello ")],-1),ja={class:"homepage-nav"},za=E("Home"),Fa=r("span",null," | ",-1),qa=E("Log in"),Pa={class:"main-container"},Ra=r("p",null,"Sign up for your account",-1),Va={key:0},Ha=r("button",null,"Sign up",-1),Za=E("Already have an account? Log in");function Wa(t,e,o,l,n,s){const a=p("router-link");return i(),d("div",Na,[r("section",Ga,[Ja,r("nav",ja,[h(a,{to:"/",class:"login"},{default:_(()=>[za]),_:1}),Fa,h(a,{to:"/login",class:"signup"},{default:_(()=>[qa]),_:1})])]),r("div",Pa,[Ra,r("form",{onSubmit:e[4]||(e[4]=S((...c)=>s.signup&&s.signup(...c),["prevent"]))},[T(r("input",{type:"text",name:"fullname","onUpdate:modelValue":e[0]||(e[0]=c=>n.user.fullname=c),placeholder:"Enter full name",autocomplete:"off",required:""},null,512),[[M,n.user.fullname]]),T(r("input",{type:"text",name:"username","onUpdate:modelValue":e[1]||(e[1]=c=>n.user.username=c),placeholder:"Enter username",autocomplete:"off",required:""},null,512),[[M,n.user.username]]),T(r("input",{type:"email",name:"email","onUpdate:modelValue":e[2]||(e[2]=c=>n.user.email=c),placeholder:"Enter email",required:""},null,512),[[M,n.user.email]]),T(r("input",{type:"password",name:"password","onUpdate:modelValue":e[3]||(e[3]=c=>n.user.password=c),placeholder:"Enter password",required:""},null,512),[[M,n.user.password]]),r("div",null,[n.isLoading?(i(),d("div",Va," Loading image... ")):m("",!0)]),Ha],32),h(a,{class:"btn-signup",to:"/login"},{default:_(()=>[Za]),_:1})])])}var Ka=k(Ua,[["render",Wa]]);const me=Ee({history:Se("/"),routes:[{path:"/",name:"home",component:nt},{path:"/board",name:"boards",component:pt},{path:"/board/:boardId",name:"board",component:Fs,children:[{path:"task/:groupId/:taskId",name:"task-details",component:va}]},{path:"/login",name:"Login",component:La},{path:"/signup",name:"Signup",component:Ka}]}),Ya="/api/";var Qa=de.create({withCredentials:!0});const $={get(t,e){return z(t,"GET",e)},post(t,e){return z(t,"POST",e)},put(t,e){return z(t,"PUT",e)},delete(t,e){return z(t,"DELETE",e)}};async function z(t,e="GET",o=null){try{return(await Qa({url:`${Ya}${t}`,method:e,data:o,params:e==="GET"?o:null})).data}catch(l){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,o),console.dir(l),l.response&&l.response.status===401&&me.push("/login"),l}}const Xa="user-watch",ae="board updated",ie="user-updated",ei="",U=ti();U.setup();function ti(){var t=null;return{async setup(){t=Me(ei)},on(o,l){t.on(o,l)},off(o,l=null){!t||(l?t.off(o,l):t.removeAllListeners(o))},emit(o,l){t.emit(o,l)},terminate(){t=null}}}const Q="loggedinUser";F({_id:"bk8d9sad",fullname:"Dani Norman",username:"dani",password:"123",imgUrl:"",isAdmin:!1,color:"purple"});const D={login:ri,logout:ai,signup:ni,getLoggedinUser:X,getUsers:si,getById:pe,remove:oi,update:ge,changeScore:ii,getMiniUser:li};window.userService=D;function si(){return $.get("user")}async function pe(t){return await $.get(`user/${t}`)}function oi(t){return $.delete(`user/${t}`)}async function ge(t){return t=await $.put(`user/${t._id}`,t),X()._id===t._id&&F(t),t}async function ri(t){try{const e=await $.post("auth/login",t);if(e)return F(e)}catch(e){throw console.log("userService: Error in login user",e),e}}async function ni(t){try{const e=await $.post("auth/signup",t);return F(e)}catch(e){throw console.log("userService: Error in signup user",e),e}}async function ai(){return sessionStorage.removeItem(Q),await $.post("auth/logout")}async function ii(t){const e=X();if(!e)throw new Error("Not loggedin");return e.score=e.score+t||t,await ge(e),e.score}function F(t){return sessionStorage.setItem(Q,JSON.stringify(t)),t}function X(){return JSON.parse(sessionStorage.getItem(Q)||"null")}async function li(t){try{const e=await pe(t);return{_id:e._id,username:e.username,fullname:e.fullname,imgUrl:e.imgUrl}}catch(e){throw console.log("userService: Error in getById user",e),e}}const L={query:di,getById:ci,remove:ui,save:hi,getEmptyBoard:mi,getEmptyTask:gi,getEmptyGroup:pi};async function di(){try{return await $.get("board")}catch(t){console.log("query had an error",t)}}async function ci(t){try{return await $.get(`board/${t}`)}catch(e){console.log("Error:",e)}}async function ui(t){try{return await $.get(`board/${t}`)}catch(e){console.log("Error:",e)}}async function hi(t){try{return t._id?await $.put("board",t):await $.post("board",t)}catch(e){console.log("Error:",e)}}async function mi(){return{title:"",createdAt:Date.now(),createdBy:{},style:{bgImg:["https://res.cloudinary.com/dxj8szufc/image/upload/v1648812004/bg/bg6_hsbmsz.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648812001/bg/bg2_mz8ugr.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648812000/bg/bg3_dmcjgv.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811997/bg/bg5_pkzq9o.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811995/bg/bg4_mvddif.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811991/bg/bg7_tbhddd.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811988/bg/bg_iyfy8d.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811985/bg/bg1_xzp635.jpg","#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc"]},labels:[{id:"l101",title:"",color:"#61bd4f"},{id:"l102",title:"",color:"#f2d600"},{id:"l103",title:"",color:"#ff9f1a"},{id:"l104",title:"",color:"#eb5a46"},{id:"l105",title:"",color:"#c377e0"},{id:"l106",title:"",color:"#0079bf"},{id:"l107",title:"",color:"#00c2e0"},{id:"l108",title:"",color:"#51e898"},{id:"l109",title:"",color:"#ff78cb"},{id:"l110",title:"",color:"#344563"}],members:[],groups:[],activities:[]}}function pi(){return{id:"",title:"",tasks:[],style:{}}}function gi(){const{_id:t,fullname:e,imgUrl:o}=D.getLoggedinUser();return{id:B.makeId(),title:"",status:"",description:"",createdAt:Date.now(),dueDate:null,byMember:{_id:t,fullname:e,imgUrl:o}}}const ki={data(){return{board:L.getEmptyBoard(),colors:[],imgs:[],selectImg:"",selectColor:""}},created(){this.renderColors()},methods:{renderColors(){this.colors=[];for(var t=0;t<9;t++)this.colors.push(B.getRandomColor())},closeCompose(t){t.target.className==="board-compose-container"&&this.$emit("closeCompose")},async createBoard(){this.board.style={"background-color":this.selectColor,"background-image":`url(${this.selectImg})`},this.board.createdAt=Date.now();try{const t=this.$store.getters.loggedinUser._id,e=await this.$store.dispatch({type:"getMiniUser",userId:t});this.board.createdBy=e,this.board.members=[e],this.$emit("addBoard",this.board)}catch(t){console.log("failed to get miniLoggedInUser",t)}},close(){this.$emit("closeCompose")},setBcg(t){this.selectImg="",this.selectColor=t,this.board.style={"background-color":t}},setimg(t){this.selectColor="",this.selectImg=t,this.board.style={"background-image:":`url(${t})`}}},destroyed(){this.colors=[]}},bi={class:"board-compose"},fi=E("Create board"),_i=E("Change Colors"),yi={class:"backgrounds"},vi={class:"board-compose-imgs"},Ci=["onClick"],Ti={class:"board-compose-bgcs"},Ei=["onClick"];function Si(t,e,o,l,n,s){const a=p("el-input"),c=p("el-button");return i(),d("div",{class:"board-compose-container",onClick:e[2]||(e[2]=(...u)=>s.closeCompose&&s.closeCompose(...u))},[r("div",bi,[r("div",{class:"board-compose-preview",style:y({backgroundColor:n.selectColor,backgroundImage:`url(${n.selectImg})`})},[r("span",{onClick:e[0]||(e[0]=(...u)=>s.close&&s.close(...u))},"close"),h(a,{placeholder:"Add board title",modelValue:n.board.title,"onUpdate:modelValue":e[1]||(e[1]=u=>n.board.title=u),onKeyup:R(s.createBoard,["enter","native"])},null,8,["modelValue","onKeyup"]),h(c,{onClick:s.createBoard,type:"primary",disabled:!n.board.title,class:"compose-btn"},{default:_(()=>[fi]),_:1},8,["onClick","disabled"]),h(c,{onClick:s.renderColors,type:"primary",class:"compose-btn change-colors"},{default:_(()=>[_i]),_:1},8,["onClick"])],4),r("section",yi,[r("div",vi,[(i(!0),d(v,null,C(n.imgs,(u,b)=>(i(),d("span",{key:b,style:y({backgroundImage:`url(${u})`}),onClick:A=>s.setimg(u)},null,12,Ci))),128))]),r("div",Ti,[(i(!0),d(v,null,C(n.colors,(u,b)=>(i(),d("span",{key:b,style:y({backgroundColor:u}),onClick:A=>s.setBcg(u)},null,12,Ei))),128))])])])])}var Mi=k(ki,[["render",Si]]);const Bi={props:{boards:{type:Array,required:!0}},data(){return{recentBoards:null,listClose:[],searchBoard:""}},created(){this.$store.getters.currBoard&&this.$store.commit({type:"addBoardToRecentBoards",board:this.$store.getters.currBoard}),this.recentBoards=this.$store.getters.recentBoards},mounted(){this.$refs.searchBoard.focus()},methods:{closeBoardList(){this.$emit("closeBoardList")},openBoard(t){this.$store.commit({type:"addBoardToRecentBoards",board:t}),(!this.$store.getters.currBoard||t._id!==this.$store.getters.currBoard._id)&&(this.$emit("setBackground",t.style),this.$store.commit({type:"setCurrBoard",board:t}),this.$router.push(`/b/${t._id}`)),this.closeBoardList()},toggleListClose(t){const e=this.listClose.findIndex(o=>o===t);e===-1?this.listClose.push(t):this.listClose.splice(e,1)},setFilter(){this.$store.commit({type:"setFilterBy",filterBy:{txt:this.searchBoard}})}},computed:{borads(){return this.boards.filter(t=>t.isStarred)},boardsAfterFilter(){return this.$store.getters.boardsToShow}}},wi={key:0},Oi={key:0},xi=r("h2",{class:"title"},[r("span",null,"BOARDS")],-1),Di={key:0},Ai=["onClick"],$i=r("h2",null,[r("span",null,"RECENT BOARDS")],-1),Ii={key:0},Li=["onClick"],Ui=r("h2",null,[r("span",null,"ALL BOARDS")],-1),Ni={key:0},Gi=["onClick"],Ji={key:1},ji=["onClick"];function zi(t,e,o,l,n,s){return i(),d("section",null,[r("header",null,[T(r("input",{ref:"searchBoard",class:"input-search-boards",type:"text",placeholder:"Find boards by name...","onUpdate:modelValue":e[0]||(e[0]=a=>n.searchBoard=a),onInput:e[1]||(e[1]=(...a)=>s.setFilter&&s.setFilter(...a))},null,544),[[M,n.searchBoard]]),r("span",{onClick:e[2]||(e[2]=(...a)=>s.closeBoardList&&s.closeBoardList(...a))},"close")]),r("main",null,[n.searchBoard?(i(),d("section",Ji,[r("div",null,[(i(!0),d(v,null,C(s.boardsAfterFilter,a=>(i(),d("article",{key:a._id,class:"board-preview",onClick:c=>s.openBoard(a)},null,8,ji))),128))])])):(i(),d("section",wi,[s.borads.length?(i(),d("div",Oi,[xi,n.listClose.includes("borads")?m("",!0):(i(),d("div",Di,[(i(!0),d(v,null,C(s.borads,a=>(i(),d("article",{key:a._id,class:"board-preview",onClick:c=>s.openBoard(a)}," > ",8,Ai))),128))]))])):m("",!0),r("div",null,[$i,n.listClose.includes("recentBoards")?m("",!0):(i(),d("div",Ii,[(i(!0),d(v,null,C(n.recentBoards,a=>(i(),d("article",{key:a._id,onClick:c=>s.openBoard(a)},null,8,Li))),128))]))]),r("div",null,[Ui,n.listClose.includes("boards")?m("",!0):(i(),d("div",Ni,[(i(!0),d(v,null,C(o.boards,a=>(i(),d("article",{key:a._id,class:"board-preview",onClick:c=>s.openBoard(a)},null,8,Gi))),128))]))])]))])])}var Fi=k(Bi,[["render",zi]]);const qi={props:{user:{type:Object,required:!0}},data(){return{}},methods:{close(){this.$emit("close")},logout(){this.$emit("logout")}},components:{userAvatar:G}},Pi={class:"user-menu"},Ri={class:"group-edit-header"},Vi=r("span",null,"Account",-1),Hi={class:"account-info"},Zi={class:"account-details"},Wi={class:"username"};function Ki(t,e,o,l,n,s){const a=p("user-avatar");return i(),d("section",Pi,[r("div",Ri,[Vi,r("span",{onClick:e[0]||(e[0]=S((...c)=>s.close&&s.close(...c),["stop"])),class:"close"},"X")]),r("div",Hi,[h(a,{size:32,username:o.user.fullname,src:o.user.imgUrl,backgroundColor:"#DFE1E6",color:"#172b4d"},null,8,["username","src"]),r("div",Zi,[r("span",null,f(o.user.fullname),1),r("span",Wi," ( "+f(o.user.username)+" )",1)])]),r("div",{class:"logout",onClick:e[1]||(e[1]=(...c)=>s.logout&&s.logout(...c))},"Log out")])}var Yi=k(qi,[["render",Ki]]),Qi="/assets/boardAdd.76c3902e.svg";const Xi={props:{menuOpen:Boolean},data(){return{boardToAdd:null,boardBg:"#0079bf"}},components:{customMenu:K},async created(){const t=await this.$store.dispatch({type:"getEmptyBoard"});this.boardToAdd=t},mounted(){},methods:{setBg(t){this.boardBg=t,console.log(t),console.log(this.$refs);for(const e in this.$refs)this.boardBg===e?e.split("")[0]==="#"?this.$refs[e][0].classList.value="bg-opt clr checked":this.$refs[e][0].classList.value="bg-opt checked":e.split("")[0]==="#"?this.$refs[e][0].classList.value="bg-opt clr":this.$refs[e][0].classList.value="bg-opt"},closeMenu(){this.$emit("closeMenu")},getStyle(t){return`background-color: ${t}`},getClass(){this.$refs.title.value?this.$refs.btn.classList.value="enable":this.$refs.btn.classList.value="disable"},async saveBoard(){if(!this.$refs.title.value)return;this.boardToAdd.title=this.$refs.title.value,this.boardToAdd.style.bg=this.boardBg;const t=this.$store.getters.loggedinUser;this.boardToAdd.createdBy={_id:t._id,fullname:t.fullname,imgUrl:"http://some-img"},delete this.boardToAdd.style.bgImg;const e=await this.$store.dispatch({type:"saveCurrBoard",boardToSave:this.boardToAdd});this.boardToAdd=await this.$store.dispatch({type:"getEmptyBoard"}),this.$router.push(`/board/${e._id}`)}},computed:{getBg(){if(this.boardBg)return this.boardBg.split("")[0]==="#"?`background-color: ${this.boardBg}`:`background-image: url(${this.boardBg})`}}},el={class:"board-add-menu"},tl=r("p",null,"Create board",-1),sl=r("hr",null,null,-1),ol={class:"board-add-container flex align-center column"},rl=r("img",{class:"board-image",src:Qi,alt:""},null,-1),nl=[rl],al={class:"bg-selector"},il=r("p",null,"Background",-1),ll={class:"btn-bg-container flex wrap"},dl=["onClick","idx"],cl=["src"],ul=r("p",null,[E("Board title "),r("span",null,"*")],-1),hl=r("div",{class:"emoticon"},"\u{1F44B} Board title is required",-1);function ml(t,e,o,l,n,s){const a=p("custom-menu"),c=N("focus");return i(),d("section",el,[h(a,{menuOpen:o.menuOpen},{default:_(()=>[tl,r("button",{onClick:e[0]||(e[0]=(...u)=>s.closeMenu&&s.closeMenu(...u)),class:"close",title:"Close"}),sl,r("section",ol,[r("div",{style:y(s.getBg),class:"board-image-container flex center align-center"},nl,4),r("div",al,[il,r("div",ll,[(i(!0),d(v,null,C(n.boardToAdd.style.bgImg,(u,b)=>(i(),d("label",{key:b,onClick:S(A=>s.setBg(u),["stop"]),idx:b},[u.split("")[0]!=="#"?(i(),d("img",{key:0,class:"bg-opt",src:u,alt:"",ref_for:!0,ref:u},null,8,cl)):m("",!0),u.split("")[0]=="#"?(i(),d("div",{key:1,style:y(s.getStyle(u)),class:"bg-opt clr",ref_for:!0,ref:u},null,4)):m("",!0)],8,dl))),128)),ul,r("form",{action:"submit",onSubmit:e[4]||(e[4]=S(()=>{},["prevent"]))},[T(r("input",{required:"",ref:"title",onFocus:e[1]||(e[1]=(...u)=>s.getClass&&s.getClass(...u)),onInput:e[2]||(e[2]=(...u)=>s.getClass&&s.getClass(...u)),placeholder:"   ",type:"text"},null,544),[[c]]),hl,r("button",{ref:"btn",type:"submit",onClick:e[3]||(e[3]=(...u)=>s.saveBoard&&s.saveBoard(...u))},"Create",512)],32)])])])]),_:1},8,["menuOpen"])])}var le=k(Xi,[["render",ml]]),pl="/assets/boards.b440fffa.png",gl="data:image/gif;base64,R0lGODlhOAFAAHAAACH5BAEAAAIALAAAAAA4AUAAgQAAAP///wAAAAAAAAL/lB+py+0P3Zm02ouz3rz7D2KR0o1BiKaIybbuqcbyTNceW472Pr3+L+EJh8QijmMq0oDMpvIJjSKT04gU1cwCr9yu8riheqvasljY4rnGKbDmzBaZ51a0r/aLf9wZuL5CFxi0szVT+Bfmd6GIaCD4SEJ4GDPZuMgIqGOZCSmoxmSYtymnmVg3utIZ+FkZAopqwUcKAZuqOscqqvJa24NJ8fsXbNuQc4rntNtaK3t5jFpKtrD3HMrret0r0BwbDV3dNyhdLJlNvQzLzUnb6/0mbvqQix5/p00sP07ODD47fdNPWTIQWYZEWjLMkTtkCQTmM8bg3EOG5vStsbYQYMZ1/xNlXLR40KJEeBgrvjMJ8SPBhNs2arR3smPMfyn3UUTpTAJLjrpesqtHciQ9hT9F+rSJsKDQaTt9aVnp0mlRqE/9IZ0ZEmjEcrR26mhK1MzRoN0CYq3Kc2vNhmNp3tQZVSpcs2XprL2aUyZIpcDo9sVrVe3bYl7ZNe20N2tgwXfF/tW7eKnbpIbjtqzsF59drYDTMuaM6zHZvIrDTS0ZJKEmlrdgmM58+fRrxHI71518FrfH1ZZPqX6hWbZoyJ51L/YUvHTktsodPgxW6je3NLOJD7d9HVLtz9XZNvY+WC1033GpHzeeHH129euDAg87+nZz+dwpRY96bJi67fXTz6rnz55/6n1kWXCS/YdNfhtFM16B++0HIILwCRfhVgVOCB5oGaJmEybPNAjbg6w5OCIVF8bWX3sb7qZgQB/id6GIJGZmnoaRnNjaPPAo4s0vEFa4ooCu5RYgitYV9w+Ot+iIFI+n+aikSz9imKKQVOUTJW02wCFLNVDCZmR8YWInYGJDfkdCltpxJROXXko5I4xxHkllkSo2pOYjTH7mpl5fZtQTfWTWKSFYY/9GlCdyWy50Bjh/5kiknfoZikOiq7Dp3n2yPbpkpBIeiuCUd55g6WaLOqopWZxq2d2goAYJ5Jlmkgrmq2XsaZyJwq2qqI2w3umrrMG+emBop+76VT+8mjormsIi+Stpc9EZK1/h5ZosccuiVeyn0lF4Xpq1Qnqstla4COeL1HoabZm+JnjuuJ2WO5q1wIb7rEElgmtltzDsyypl5g617accuvotv6MS2hpM186HU8HtPuxtb6La+m/DjtFrW8Ry1urcugCLfITGG1OcL8bYgQgyFiOLyXCoYJh8K6YrOywoeyqtFGzKQvqscsoE0mzvwTrjDC3Q76XUM3qBVrvi0kS2F82iwkvj2zSffqHz9M81xzy1wlfCfLW0VYLNrdmAIg21tWHj5PLWO+dcKLn4qsq21wOh/fbZYw9aI9azUp10Z3nr/XTfXdtH45SFBaw2hYcjXnbQik/s7+Bm+rt3q+BWTnfnlIdtR4hzwjzqUG0LPXfk9FweuMCo2+osvMyye/TFxt6tuL7yzk573LtrjjvQqYvNN833LE9r2sxJeuLoy09PvbN+j9WGq64bXH333n//BOYWFAAAOw==";const kl={data(){return{boardMenuOpen:!1,user:null,bg:""}},components:{userAvatar:G,boardCompose:Mi,boardList:Fi,userMenu:Yi,boardAddMenu:le,BoardAddMenu:le},created(){this.user=this.$store.getters.loggedinUser},methods:{toggleBoardCompose(){this.isBoardComposeOn=!this.isBoardComposeOn},toggleBoardList(){this.isBoardListOpen=!this.isBoardListOpen},hideBoardList(){this.isBoardListOpen=!1},hideUserMenu(){this.isUserMenuOpen=!1},addBoard(t){this.$emit("addBoard",t),this.isBoardComposeOn=!1},setBackground(t){this.$emit("setBackground",t)},async logout(){await this.$store.dispatch({type:"logout"});const t={"background-color":"whitesmoke"};this.setBackground(t),this.$router.push("/")}},computed:{boards(){return this.$store.getters.boards},getClr(){}},watch:{"$route.params"(t){t.boardId?this.bg="#00000040":this.bg="#026AA7"}}},bl=r("button",{class:"btn-boards",title:"Boards"},[r("img",{src:pl,alt:""})],-1),fl=r("button",{title:"Mello",class:"btn-logo"},[r("img",{src:gl,alt:""})],-1),_l=r("button",{class:"btn-opt",title:"Recent"},[E("Recent "),r("img",{class:"img-arrow",src:ue,alt:""})],-1);function yl(t,e,o,l,n,s){const a=p("router-link"),c=p("board-add-menu"),u=p("user-avatar");return i(),d("section",{style:y({"background-color":`${n.bg}`}),class:"main-header"},[h(a,{to:"/board"},{default:_(()=>[bl]),_:1}),h(a,{to:"/"},{default:_(()=>[fl]),_:1}),_l,r("button",{onClick:e[0]||(e[0]=b=>n.boardMenuOpen=!n.boardMenuOpen),class:"btn-opt create",title:"Create"},"Create"),h(c,{onCloseMenu:e[1]||(e[1]=b=>n.boardMenuOpen=!1),menuOpen:n.boardMenuOpen},null,8,["menuOpen"]),h(u,{diameter:32,user:n.user},null,8,["user"])],4)}var vl=k(kl,[["render",yl]]);const Cl={name:"app-vue",computed:{editModalStatus(){return this.$store.getters.editModalStatus}},components:{mainHeader:vl}};function Tl(t,e,o,l,n,s){const a=p("main-header"),c=p("router-view");return i(),d("section",null,[h(a),h(c)])}var El=k(Cl,[["render",Tl]]);const Sl={state:{loggedinUser:D.getLoggedinUser(),users:[],watchedUser:null},getters:{users({users:t}){return JSON.parse(JSON.stringify(t))},loggedinUser({loggedinUser:t}){return t},getMyMiniUser(t){const e=JSON.parse(JSON.stringify(t.loggedinUser));return delete e.email,delete e.mentions,e},watchedUser({watchedUser:t}){return t}},mutations:{setLoggedinUser(t,{user:e}){t.loggedinUser=e?oe({},e):null},setWatchedUser(t,{user:e}){t.watchedUser=e},setUsers(t,{users:e}){t.users=e},removeUser(t,{userId:e}){t.users=t.users.filter(o=>o._id!==e)},setUserScore(t,{score:e}){t.loggedinUser.score=e},updateUser(t,{user:e}){const o=t.users.findIndex(l=>l._id===e._id);t.users.splice(o,1,e)}},actions:{async login({commit:t},{userCred:e}){try{const o=await D.login(e);return t({type:"setLoggedinUser",user:o}),o}catch(o){throw console.log("userStore: Error in login",o),o}},async signup({commit:t},{userCred:e}){try{const o=await D.signup(e);return t({type:"setLoggedinUser",user:o}),o}catch(o){throw console.log("userStore: Error in signup",o),o}},async logout({commit:t}){try{await D.logout(),t({type:"setLoggedinUser",user:null})}catch(e){throw console.log("userStore: Error in logout",e),e}},async loadUsers({commit:t}){try{const e=await D.getUsers();t({type:"setUsers",users:e})}catch(e){throw console.log("userStore: Error in loadUsers",e),e}},async loadAndWatchUser({commit:t},{userId:e}){try{const o=await D.getById(e);t({type:"setWatchedUser",user:o}),U.emit(Xa,e),U.off(ie),U.on(ie,l=>{t({type:"setWatchedUser",user:l})})}catch(o){throw console.log("userStore: Error in loadAndWatchUser",o),o}},async removeUser({commit:t},{userId:e}){try{await D.remove(e),t({type:"removeUser",userId:e})}catch(o){throw console.log("userStore: Error in removeUser",o),o}},async updateUser({commit:t},{user:e}){try{e=await D.update(e),t({type:"setUser",user:e})}catch(o){throw console.log("userStore: Error in updateUser",o),o}},async increaseScore({commit:t}){try{const e=await D.changeScore(100);t({type:"setUserScore",score:e})}catch(e){throw console.log("userStore: Error in increaseScore",e),e}},async signup({commit:t},{userCred:e}){try{const o=await D.signup(e);return t({type:"setLoggedinUser",user:o}),o}catch(o){throw console.log("userStore: Error in signup",o),o}},async signupAsGuest({commit:t,dispatch:e}){try{const o=await D.signupAsGuest();await e({type:"loadAndWatchUser",userId:o._id}),t({type:"setLoggedinUser",user:o})}catch(o){throw console.log("userStore: Error in signup As Guest",o),o}},async getMiniUser(t,{userId:e}){try{return await D.getMiniUser(e)}catch(o){throw console.log("userStore: Error in getById user",o),o}}}},Ml={state:{boards:[],currBoard:null,recentBoards:[],currTaskIdxs:null},getters:{boards(t){return JSON.parse(JSON.stringify(t.boards))},currBoard(t){return JSON.parse(JSON.stringify(t.currBoard))},currBoardLabels(t){return t.currBoard.labels},currBoardMembers(t){return t.currBoard.members},currBoardChecklists(t){const e=[];return t.currBoard.groups.forEach(o=>{o.tasks.forEach(l=>{!l.checklists||!l.checklists.length||e.push({taskId:l.id,taskTitle:l.title,checklists:l.checklists})})}),e},getCurrTask({currTaskIdxs:t,currBoard:e}){if(!t)return null;const{groupIdx:o,currTaskIdx:l}=t,n=e.groups[o].tasks[l];return JSON.parse(JSON.stringify(n))},recentBoards({recentBoards:t}){return t},cardEdit({cardEdit:t}){return t},boardsToShow(t){let e=new RegExp(t.filterBy.txt,"i");return t.boards.filter(o=>e.test(o.title))}},mutations:{setCurrTask(t,{currTaskIdx:e,groupIdx:o}){t.currTaskIdxs={currTaskIdx:e,groupIdx:o}},setCurrBoard(t,{currBoard:e}){t.currBoard=e},addBoardToRecentBoards(t,{board:e}){t.recentBoards.length>=5&&t.recentBoards.pop(),t.recentBoards=t.recentBoards.filter(o=>o._id!==e._id),t.recentBoards.unshift(e)},addBoard(t,{savedBoard:e}){t.boards.push(e)},loadBoards(t,{boards:e}){console.log(e),t.boards=e}},actions:{async loadCurrBoard(t,{boardId:e}){try{const o=await L.getById(e);return t.commit({type:"setCurrBoard",currBoard:o}),U.emit("watch board",o._id),U.off(ae),U.on(ae,l=>{console.log("board updated"),t.commit({type:"setCurrBoard",currBoard:l})}),JSON.parse(JSON.stringify(o))}catch(o){console.error("Cannot load currBoard: ",o),t.dispatch({type:"flashUserMsg",msg:"Oops! Cannot load selected board...",style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async saveCurrBoard(t,{boardToSave:e}){const o=t.getters.currBoard;try{t.commit({type:"setCurrBoard",currBoard:e});const l=await L.save(e);return U.emit("board update",e),t.dispatch({type:"flashUserMsg",msg:`Board ${l._id} saved successfully`,style:"success"}),l}catch(l){t.commit({type:"setCurrBoard",currBoard:o}),console.error(`Cannot save board ${t.getters.currBoard._id}: `,l),t.dispatch({type:"flashUserMsg",msg:`Oops! Cannot save board ${t.getters.currBoard._id}...`,style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async updateGroup(t,{groupToSave:e}){console.log(e),t.commit({type:"setIsLoading",loadingStatus:!0});try{const o=t.getters.currBoard;if(e.id){const n=o.groups.findIndex(s=>s.id===e.id);o.groups.splice(n,1,e)}else e.id=B.makeId(),o.groups.push(e);const l=await t.dispatch({type:"saveCurrBoard",boardToSave:o});return U.emit("board update",o),l}catch(o){console.error(`Cannot save group ${t.getters.currBoard._Id}: `,o),t.dispatch({type:"flashUserMsg",msg:`Oops! Cannot save board ${t.getters.currBoard._id}...`,style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async copyGroup(t,{groupToSave:e}){t.commit({type:"setIsLoading",loadingStatus:!0});try{e.id=B.makeId();const o=t.getters.currBoard;return o.groups.push(e),await t.dispatch({type:"saveCurrBoard",boardToSave:o})}catch(o){console.error(`Cannot save group ${t.getters.currBoard._Id}: `,o),t.dispatch({type:"flashUserMsg",msg:`Oops! Cannot save board ${t.getters.currBoard._Id}...`,style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async getEmptyBoard(t){t.commit({type:"setIsLoading",loadingStatus:!0});try{return L.getEmptyBoard()}catch{console.error("Cannot get empty board: ",err),t.dispatch({type:"flashUserMsg",msg:"Oops! Cannot initiate a new board...",style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async loadCurrTask({commit:t,getters:e},{groupId:o,taskId:l}){const n=e.currBoard,s=n.groups.findIndex(c=>c.id===o),a=n.groups[s].tasks.findIndex(c=>c.id===l);t({type:"setCurrTask",groupIdx:s,currTaskIdx:a})},async getTaskById({getters:t},{groupId:e,taskId:o}){return t.currBoard.groups.find(a=>a.id===e).tasks.find(a=>a.id===o)},async saveTask(t,{groupId:e,taskToSave:o}){const l=t.getters.currBoard,n=l.groups.find(s=>s.id===e);if(o.id){const s=n.tasks.findIndex(a=>a.id===o.id);n.tasks[s]=o}else{debugger;o.id=B.makeId(),o.createdAt=Date.now(),console.log(n),n.tasks.push(o),console.log(n)}return t.dispatch({type:"saveCurrBoard",boardToSave:l})},async removeTask(t,{groupId:e,taskId:o}){const l=t.getters.currBoard,n=l.groups.find(a=>a.id===e),s=n.tasks.findIndex(a=>a.id===o);return n.tasks.splice(s,1),await t.dispatch({type:"saveCurrBoard",boardToSave:l})},async removeGroup(t,{group:e}){const o=t.getters.currBoard,l=o.groups.findIndex(s=>s.id===e.id);return o.groups.splice(l,1),await t.dispatch({type:"saveCurrBoard",boardToSave:o})},async getBoardById(t,{boardId:e}){try{return await L.getById(e)}catch(o){throw console.log("Cannot get board",e,",",o),o}},async loadBoards({commit:t}){try{const e=await L.query();return t({type:"loadBoards",boards:e}),console.log(e),e}catch(e){throw console.log("Cannot load boards",e),e}},async updateLabel(t,{label:e}){const o=t.getters.currBoard,l=o.labels.findIndex(n=>n.id===e.id);return o.labels[l]=e,await t.dispatch({type:"saveCurrBoard",boardToSave:o})}}},Bl=Be({strict:!0,state:{editModalStatus:{isOpen:!1,editType:"",currTask:null,parentGroupId:""},isLoading:!1,userMsg:{msg:"",style:"",isAlive:!1}},getters:{editModalStatus(t){return JSON.parse(JSON.stringify(t.editModalStatus))},isLoading(t){return JSON.parse(JSON.stringify(t.isLoading))},userMsg(t){return t.userMsg}},mutations:{toggleEditModal(t,{isOpen:e,editType:o,currTask:l,parentGroupId:n}){t.editModalStatus={isOpen:e,editType:o,currTask:l,parentGroupId:n}},setIsLoading(t,{loadingStatus:e}){t.isLoading=e},setUserMsg(t,{msg:e,style:o,isAlive:l}){t.userMsg={msg:e,style:o,isAlive:l}},setMsg(t,{msg:e}){t.userMsg=e}},actions:{flashUserMsg(t,{msg:e,style:o}){t.commit({type:"setUserMsg",msg:e,style:o,isAlive:!0}),setTimeout(()=>{t.commit({type:"setUserMsg",msg:"",style:"",isAlive:!1})},2e3)},async showMsg({state:t,commit:e},{msg:o}){try{t.setTimeId&&clearTimeout(t.setTimeId),e({type:"setMsg",msg:o}),o={txt:"",type:""},t.setTimeId=setTimeout(()=>{e({type:"setMsg",msg:o}),clearTimeout(t.setTimeId)},2500)}catch(l){console.log("ERROR: cannot get userMsg",l)}}},modules:{userStore:Sl,boardStore:Ml}}),wl={mounted:t=>{t.focus()}},Ol={mounted:(t,e,o)=>{t.clickOutsideEvent=function(n){const s=t.getBoundingClientRect();(n.clientX<s.x||n.clientX>s.x+s.width||n.clientY<s.y||n.clientY>s.y+s.height)&&!(t==n.target||t.contains(n.target))&&(console.log("clicked outside!",t),e.value(n))};const l=function(){document.body.removeEventListener("click",l),document.body.removeEventListener("touchstart",l),document.body.addEventListener("click",t.clickOutsideEvent),document.body.addEventListener("touchstart",t.clickOutsideEvent)};document.body.addEventListener("click",l),document.body.addEventListener("touchstart",l)},unmounted:function(t){document.body.removeEventListener("click",t.clickOutsideEvent),document.body.removeEventListener("touchstart",t.clickOutsideEvent)},stopProp(t){t.stopPropagation()}};const J=we(El);J.config.globalProperties.$filters={};J.directive("focus",wl);J.directive("clickoutside",Ol);J.use(me);J.use(Bl);J.use(Oe);J.mount("#app");
