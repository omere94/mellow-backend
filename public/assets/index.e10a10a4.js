var be=Object.defineProperty;var se=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var oe=(t,e,o)=>e in t?be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,re=(t,e)=>{for(var o in e||(e={}))_e.call(e,o)&&oe(t,o,e[o]);if(se)for(var o of se(e))fe.call(e,o)&&oe(t,o,e[o]);return t};import{o as i,c as d,n as y,t as _,r as p,a as r,b as h,w as f,d as E,F as v,e as C,f as S,g as $,C as H,D as Z,h as z,i as B,j as m,k as j,T as W,l as T,v as M,m as N,p as V,q as K,s as ye,U as ve,u as Ce,x as de,y as Te,z as Se,A as Ee,B as Be,E as Me,G as we,H as Oe}from"./vendor.caf0b19e.js";const xe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}};xe();var k=(t,e)=>{const o=t.__vccOpts||t;for(const[l,a]of e)o[l]=a;return o};const Ae={name:"user-avatar",props:{user:Object,diameter:{type:Number,default:28}},methods:{getNameAbbreviation(t){return t.split(" ").map(l=>l.charAt(0).toUpperCase()).join("")}},computed:{userColor(){return`background-color: ${this.user.color}`},getSizeInCss(){return{width:this.diameter+"px",height:this.diameter+"px","line-height":this.diameter+"px"}}}},$e=["src"];function De(t,e,o,l,a,s){return i(),d("div",{class:"user-avatar",style:y(s.getSizeInCss)},[o.user.imgUrl?(i(),d("img",{key:0,src:o.user.imgUrl},null,8,$e)):(i(),d("div",{key:1,class:"flex center",style:y(s.userColor)},_(s.getNameAbbreviation(o.user.fullname)),5))],4)}var G=k(Ae,[["render",De]]);const w={delay:Ie,getRndIntInc:Le,makeId:Ne,getRandomColor:Ge,applyDrag:Ue,saveToStorage:Je,loadFromStorage:ze,lightenDarkenColor:je,debounce:Fe};function Ie(t=1500){return new Promise(e=>{setTimeout(e,t)})}function Le(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function Ue(t,e){console.log("arr>>",t,"drag",e);const{removedIndex:o,addedIndex:l,payload:a}=e;if(o===null&&l===null)return t;const s=[...t];let n=a;return o!==null&&(n=s.splice(o,1)[0]),l!==null&&s.splice(l,0,n),console.log(s),s}function Ne(t=8){for(var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=0;l<t;l++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}function Ge(){for(var t="0123456789ABCDEF",e="#",o=0;o<6;o++)e+=t[Math.floor(Math.random()*16)];return e}function Je(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function ze(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function je(t,e){if(t==="#0079bf")return"#055a8c";if(t==="#00c2e0")return"#0098b7";var o=!1;t[0]=="#"&&(t=t.slice(1),o=!0);var l=parseInt(t,16),a=(l>>16)+e;a>255?a=255:a<0&&(a=0);var s=(l>>8&255)+e;s>255?s=255:s<0&&(s=0);var n=(l&255)+e;return n>255?n=255:n<0&&(n=0),(o?"#":"")+(n|s<<8|a<<16).toString(16)}function Fe(t,e){let o;return(...l)=>{clearTimeout(o),o=setTimeout(()=>{t(...l)},e)}}var qe="/assets/homeLogo.10aa9f3f.png",Pe="/assets/Asset3.171b9aa8.png";const Re={name:"home",components:{},created(){},methods:{async goToBoardsPage(){this.$router.push("/board/624afa5e47cdb81018c1bc99")}}},Ve={class:"homepage"},He={class:"homepage-nav flex"},Ze=r("img",{src:qe,alt:""},null,-1),We=E("Log in"),Ke=E("Sign up"),Ye={class:"flex center"},Qe=r("img",{class:"hero",src:Pe,alt:""},null,-1),Xe={class:"text"},et=r("h1",null,"Mello helps teams move work forward.",-1),tt=r("p",null,"As your software team grows, Mello makes it easy to manage workflows across multiple teams and projects. Simple, intuitive, fast: Mello is where software teams do their best work. Free to get started, with easy user experience Mello.",-1),st=E("Start as a guest");function ot(t,e,o,l,a,s){const n=p("router-link");return i(),d("section",Ve,[r("nav",He,[h(n,{title:"Boards",to:"/board",class:"logo"},{default:f(()=>[Ze]),_:1}),r("div",null,[h(n,{title:"Login",to:"/login",class:"login"},{default:f(()=>[We]),_:1}),h(n,{title:"Signup",to:"/signup",class:"signup"},{default:f(()=>[Ke]),_:1})])]),r("main",Ye,[Qe,r("div",Xe,[et,tt,h(n,{to:"/board/624b2ee347cdb81018c1bc9a",class:"btn-start"},{default:f(()=>[st]),_:1})])])])}var rt=k(Re,[["render",ot]]);const at={data(){return{}},async mounted(){await this.$store.dispatch({type:"loadBoards"}),console.log(this.boards)},computed:{boards(){return this.$store.getters.boards},starBoards(){return this.$store.getters.starBoards}},methods:{checkStar(t){if(t.star)return"star-on"},async starBoard(t){const e=this.$store.getters.boards,o=e.findIndex(l=>l._id===t);e[o].star?e[o].star=!1:e[o].star=!0,await this.$store.dispatch({type:"saveCurrBoard",boardToSave:e[o]}),await this.$store.dispatch({type:"loadBoards"})}}},nt={class:"board-list flex center column align-center"},it=r("h3",null,"STARRED BOARDS",-1),lt={class:"board-list-container flex wrap center"},dt=["onClick"],ct={class:"board-title"},ut=["onClick"],ht=["src"],mt=r("h3",{class:"boards"},"YOUR BOARDS",-1),pt={class:"board-list-container flex wrap center"},gt=["onClick"],kt={class:"board-title"},bt=["onClick"],_t=["src"];function ft(t,e,o,l,a,s){return i(),d("section",nt,[r("section",null,[it,r("div",lt,[(i(!0),d(v,null,C(s.starBoards,n=>(i(),d("label",{onClick:c=>t.$router.push(`/board/${n._id}`),key:n._id},[r("span",ct,_(n.title),1),r("span",{onClick:S(c=>s.starBoard(n._id),["stop"]),class:$([s.checkStar(n),"board-star"])},null,10,ut),n.style.bg.split("")[0]!=="#"?(i(),d("img",{key:0,src:n.style.bg,alt:""},null,8,ht)):(i(),d("div",{key:1,style:y({"background-color":`${n.style.bg}`})},null,4))],8,dt))),128))])]),r("section",null,[mt,r("div",pt,[(i(!0),d(v,null,C(s.boards,n=>(i(),d("label",{onClick:c=>t.$router.push(`/board/${n._id}`),key:n._id},[r("span",kt,_(n.title),1),r("span",{onClick:S(c=>s.starBoard(n._id),["stop"]),class:$([s.checkStar(n),"board-star"])},null,10,bt),n.style.bg.split("")[0]!=="#"?(i(),d("img",{key:0,src:n.style.bg,alt:""},null,8,_t)):(i(),d("div",{key:1,style:y({"background-color":`${n.style.bg}`})},null,4))],8,gt))),128))])])])}var yt=k(at,[["render",ft]]);const vt={name:"task-preview",props:{task:Object,labelsOpen:Boolean},components:{userAvatar:G,Container:H,Draggable:Z},data(){return{hover:!1,open:!0,dateBg:"",dateClass:"clock"}},mounted(){this.loadDate()},methods:{async updateTask(){const t=JSON.parse(JSON.stringify(this.task));this.$emit("saveTask",t),this.$emit("socketUpdateBoard")},removeTask(){this.$emit("removeTask",this.task),this.$emit("socketUpdateBoard")},toggleDateBg(t){this.dateBg=w.lightenDarkenColor(this.dateBg,t)},getStyle(t){const o=this.$store.getters.currBoardLabels.find(l=>l.id===t);if(!!o)return this.hover?`background-color: ${w.lightenDarkenColor(o==null?void 0:o.color,-30)}`:`background-color: ${o==null?void 0:o.color}`},getLabelText(t){const o=this.$store.getters.currBoardLabels.find(l=>l.id===t);if(!!o)return`${o.title}`},toggleLabels(){this.$emit("openLabels"),this.open=!this.open},toggleDate(){if(this.task.status==="over-due"||this.task.status==="in-progress"||this.task.status==="due-soon"){this.$emit("done"),this.updateTask();return}if(this.task.dueDate-Date.now()<0){this.$emit("over-due"),this.updateTask();return}if(this.task.dueDate-Date.now()>86400*1e3){this.$emit("in-progress"),this.updateTask();return}if(this.task.dueDate-Date.now()<86400*1e3){this.$emit("due-soon"),this.updateTask();return}},loadDate(){if(this.task.status!=="done"){if(this.task.dueDate-Date.now()<0){this.task.status="over-due";return}if(this.task.dueDate-Date.now()>86400*1e3){this.task.status="in-progress";return}if(this.task.dueDate-Date.now()<86400*1e3){this.task.status="due-soon";return}}},socketUpdateBoard(){this.$emit("socketUpdateBoard")}},computed:{checkStyle(){if(this.task.style&&this.task.style.size==="big")return"border-bottom: none"},getCoverClr(){return`background-color: ${this.task.style.bg} !important`},checkBadges(){return!(!this.task.members&&!this.task.startDate&&!this.task.dueDate)},getClass(){return this.labelsOpen?"open":"close"},getDateClass(){return this.task.status},startDate(){return z(this.task.startDate,"MMM d")},dueDate(){return z(this.task.dueDate,"MMM d")},getWidth(){var t=0;if((this.task.startDate||this.task.dueDate)&&t++,this.task.comments&&t++,t>2||t===0)return"width: 100%"},getDateBg(){this.task.startDate&&this.task.dueDate}},watch:{task(t,e){this.loadDate()}}},Ct={class:"task-preview"},Tt={key:0,class:"small-cover"},St=["src"],Et={key:1,class:"big-cover"},Bt={class:"img-txt"},Mt=r("div",null,null,-1),wt={key:2},Ot={key:0,class:"task-labels"},xt={key:1,class:"task-preview-badges flex wrap"},At={key:0,class:"task-preview-date"},$t={key:0,class:"start-only"},Dt=r("span",null,null,-1),It=r("span",null,"-",-1);function Lt(t,e,o,l,a,s){const n=p("user-avatar"),c=p("Draggable");return i(),B(c,null,{default:f(()=>[r("section",Ct,[r("button",{onClick:e[0]||(e[0]=S((...u)=>s.removeTask&&s.removeTask(...u),["stop"])),title:"Remove card",class:"btn-remove-task"}),o.task.style&&o.task.style.size==="small"?(i(),d("section",Tt,[o.task.style&&o.task.style.bg.split("")[0]!=="#"?(i(),d("img",{key:0,src:o.task.style.bg,alt:""},null,8,St)):(i(),d("div",{key:1,style:y(s.getCoverClr),class:"cover-clr"},null,4))])):m("",!0),o.task.style&&o.task.style.size==="big"?(i(),d("section",Et,[o.task.style&&o.task.style.bg.split("")[0]!=="#"?(i(),d("div",{key:0,class:"big-cover-img",style:y({"background-image":`url(${o.task.style.bg})`})},[r("div",Bt,[Mt,r("div",null,[r("span",null,_(o.task.title),1)])])],4)):m("",!0),o.task.style&&o.task.style.bg.split("")[0]==="#"?(i(),d("div",{key:1,class:"big-cover-clr",style:y({"background-color":`${o.task.style.bg}`})},[r("div",null,[r("span",null,_(o.task.title),1)])],4)):m("",!0)])):m("",!0),!o.task.style||o.task.style.size==="small"?(i(),d("section",wt,[o.task.labelIds?(i(),d("section",Ot,[(i(!0),d(v,null,C(o.task.labelIds,u=>(i(),d("span",{onClick:e[1]||(e[1]=S((...b)=>s.toggleLabels&&s.toggleLabels(...b),["stop"])),onMouseover:e[2]||(e[2]=b=>a.hover=!0),onMouseleave:e[3]||(e[3]=b=>a.hover=!1),key:u,class:$(["task-preview-label",s.getClass]),style:y(s.getStyle(u))},[r("span",null,_(s.getLabelText(u)),1)],38))),128))])):m("",!0),r("p",null,_(o.task.title),1),s.checkBadges?(i(),d("section",xt,[o.task.startDate||o.task.dueDate?(i(),d("section",At,[o.task.startDate&&!o.task.dueDate?(i(),d("div",$t,[Dt,r("span",null,"Starts: "+_(s.startDate),1)])):m("",!0),!o.task.startDate&&o.task.dueDate?(i(),d("div",{key:1,class:$([s.getDateClass,"due-only"]),onClick:e[4]||(e[4]=S((...u)=>s.toggleDate&&s.toggleDate(...u),["stop"])),onMouseover:e[5]||(e[5]=u=>{s.toggleDateBg(-30),a.dateClass="unCheck"}),onMouseleave:e[6]||(e[6]=u=>{s.toggleDateBg(30),a.dateClass="clock"}),style:y(s.getDateBg)},[r("span",{class:$(a.dateClass)},null,2),r("span",null,_(s.dueDate),1)],38)):m("",!0),o.task.startDate&&o.task.dueDate?(i(),d("div",{key:2,class:$([s.getDateClass,"due-only"]),onClick:e[7]||(e[7]=S((...u)=>s.toggleDate&&s.toggleDate(...u),["stop"])),onMouseover:e[8]||(e[8]=u=>{s.toggleDateBg(-30),a.dateClass="unCheck"}),onMouseleave:e[9]||(e[9]=u=>{s.toggleDateBg(30),a.dateClass="clock"}),style:y(s.getDateBg)},[r("span",{class:$(a.dateClass)},null,2),r("span",null,_(s.startDate),1),It,r("span",null,_(s.dueDate),1)],38)):m("",!0)])):m("",!0),o.task.members?(i(),d("section",{key:1,style:y(s.getWidth),class:"task-members flex"},[(i(!0),d(v,null,C(o.task.members,u=>(i(),B(n,{key:u._id,user:u},null,8,["user"]))),128))],4)):m("",!0)])):m("",!0)])):m("",!0)])]),_:1})}var ce=k(vt,[["render",Lt]]);const Ut={props:{menuOpen:Boolean},data(){return{}},methods:{}},Nt={class:"custom-menu"},Gt={key:0,class:"custom-menu-container"};function Jt(t,e,o,l,a,s){return i(),d("section",Nt,[h(W,{"enter-active-class":"animate__animated animate__fadeIn animate__faster","leave-active-class":"animate__animated animate__fadeOut animate__faster"},{default:f(()=>[o.menuOpen?(i(),d("div",Gt,[j(t.$slots,"default")])):m("",!0)]),_:3})])}var Y=k(Ut,[["render",Jt]]);const zt={props:{menuOpen:Boolean},data(){return{}},components:{customMenu:Y},methods:{addTask(){this.$emit("newTask")},copyGroup(){this.$emit("copyGroup")},removeGroup(){this.$emit("removeGroup")},closeMenu(){this.$emit("closeMenu")}}},jt={class:"group-menu"},Ft=r("p",null,"List actions",-1),qt=r("hr",null,null,-1),Pt=r("hr",null,null,-1);function Rt(t,e,o,l,a,s){const n=p("custom-menu");return i(),d("section",jt,[h(n,{menuOpen:o.menuOpen},{default:f(()=>[Ft,r("button",{onClick:e[0]||(e[0]=(...c)=>s.closeMenu&&s.closeMenu(...c)),class:"close",title:"Close"}),qt,r("p",{onClick:e[1]||(e[1]=(...c)=>s.addTask&&s.addTask(...c))},"Add card..."),r("p",{onClick:e[2]||(e[2]=(...c)=>s.copyGroup&&s.copyGroup(...c))},"Copy list..."),Pt,r("p",{onClick:e[3]||(e[3]=(...c)=>s.removeGroup&&s.removeGroup(...c))},"Remove this list...")]),_:1},8,["menuOpen"])])}var Vt=k(zt,[["render",Rt]]);const Ht={props:{menuOpen:Boolean,groupTitle:String},data(){return{titleForDisplay:JSON.parse(JSON.stringify(this.groupTitle))}},components:{customMenu:Y},mounted(){},methods:{addTask(){this.$emit("newTask")},saveGroup(){this.$emit("saveGroup",this.titleForDisplay)},closeMenu(){this.$emit("closeMenu")}}},Zt={class:"copy-group-menu"},Wt=r("p",null,"Copy list",-1),Kt=r("hr",null,null,-1),Yt=r("div",null,"Name",-1),Qt=r("button",null,"Create list",-1);function Xt(t,e,o,l,a,s){const n=p("custom-menu");return i(),d("section",Zt,[h(n,{menuOpen:o.menuOpen},{default:f(()=>[Wt,r("button",{onClick:e[0]||(e[0]=(...c)=>s.closeMenu&&s.closeMenu(...c)),class:"close",title:"Close"}),Kt,r("form",{action:"submit",onSubmit:e[2]||(e[2]=S((...c)=>s.saveGroup&&s.saveGroup(...c),["prevent"]))},[Yt,T(r("textarea",{style:{resize:"none"},"onUpdate:modelValue":e[1]||(e[1]=c=>a.titleForDisplay=c)},null,512),[[M,a.titleForDisplay]]),Qt],32)]),_:1},8,["menuOpen"])])}var es=k(Ht,[["render",Xt]]);const ts={name:"task-add",props:{task:Object},data(){return{isSave:!0}},methods:{saveTask(){this.isSave||(this.task.title=""),console.log(this.task),this.$emit("saveTask",this.task)},func(){console.log("hover")}},mounted(){this.$refs.taskTitle.focus()}},ss={class:"task-add"},os=r("button",{type:"submit"},"Add card",-1);function rs(t,e,o,l,a,s){return i(),d("section",ss,[r("form",{action:"submit",onSubmit:e[3]||(e[3]=S((...n)=>s.saveTask&&s.saveTask(...n),["prevent","stop"]))},[T(r("textarea",{ref:"taskTitle",style:{resize:"none",width:"256px",height:"66px"},placeholder:"Enter a title for this card...","onUpdate:modelValue":e[0]||(e[0]=n=>o.task.title=n)},null,512),[[M,o.task.title]]),r("div",null,[os,r("button",{onMouseover:e[1]||(e[1]=n=>a.isSave=!1),onMouseleave:e[2]||(e[2]=n=>a.isSave=!0),title:"Close"},null,32)])],32)])}var ae=k(ts,[["render",rs]]);const as={props:{group:{type:Object,required:!0}},data(){return{taskToEdit:null,menuOpen:!1,subMenuOpen:!1,subTaskToEdit:null}},components:{taskPreview:ce,groupMenu:Vt,taskAdd:ae,copyGroupMenu:es,Container:H,Draggable:Z,TaskAdd:ae},methods:{async delay(){setTimeout(()=>{},3e3)},closeMenu(){this.menuOpen=!1,this.subMenuOpen=!1},toggleMenu(){this.menuOpen=!this.menuOpen,this.subMenuOpen&&(this.subMenuOpen=!this.subMenuOpen,this.menuOpen=!1)},updateGroup(){this.$emit("updateGroup",this.group)},addTask(t){this[t]=U.getEmptyTask(),this.menuOpen=!1},saveTask(t){t.title&&(this.group.tasks.push(t),this.updateGroup()),this.taskToEdit=null,this.subTaskToEdit=null},saveGroup(t){const e=JSON.parse(JSON.stringify(this.group));e.title=t,e.id="",e.tasks.forEach(o=>{o.id=w.makeId()}),this.menuOpen=!1,this.subMenuOpen=!1,this.$emit("saveGroup",e)},getCardPayload(t){return e=>this.board.groups.filter(o=>o.id===t)[0].tasks[e]},onCardDrop(t,e){if(console.log(e),e.removedIndex!==null||e.addedIndex!==null){const o=Object.assign({},this.board),l=o.groups.filter(n=>n.id===t)[0],a=o.groups.indexOf(l),s=Object.assign({},l);e.removedIndex==null&&e.addedIndex>=0,s.tasks=w.applyDrag(s.tasks,e),o.groups.splice(a,1,s),this.$emit("move",o)}}},computed:{}},ns={class:"board-group"},is={class:"group-header"},ls={class:"tasks-container"},ds=r("span",null,null,-1),cs=r("span",null,"Add a card",-1),us=[ds,cs],hs={class:"sub-task-add"};function ms(t,e,o,l,a,s){const n=p("group-menu"),c=p("copy-group-menu"),u=p("task-add");return i(),d("section",ns,[r("div",is,[T(r("input",{type:"text",onMousedown:e[0]||(e[0]=(...b)=>s.delay&&s.delay(...b)),"onUpdate:modelValue":e[1]||(e[1]=b=>o.group.title=b),class:"group-title",onBlur:e[2]||(e[2]=(...b)=>s.updateGroup&&s.updateGroup(...b))},null,544),[[M,o.group.title]]),r("button",{onClick:e[3]||(e[3]=(...b)=>s.toggleMenu&&s.toggleMenu(...b)),class:"btn-group-menu",title:"Menu"}),h(n,{onRemoveGroup:e[4]||(e[4]=b=>t.$emit("removeGroup",o.group)),onCopyGroup:e[5]||(e[5]=b=>{a.menuOpen=!1,a.subMenuOpen=!0}),onCloseMenu:e[6]||(e[6]=b=>a.menuOpen=!1),onNewTask:e[7]||(e[7]=b=>s.addTask("taskToEdit")),menuOpen:a.menuOpen},null,8,["menuOpen"]),h(c,{onSaveGroup:s.saveGroup,onCloseMenu:e[8]||(e[8]=b=>a.subMenuOpen=!1),menuOpen:a.subMenuOpen,groupTitle:o.group.title},null,8,["onSaveGroup","menuOpen","groupTitle"])]),a.taskToEdit?(i(),B(u,{key:0,task:a.taskToEdit,onSaveTask:s.saveTask},null,8,["task","onSaveTask"])):m("",!0),r("div",ls,[j(t.$slots,"default")]),a.subTaskToEdit?m("",!0):(i(),d("div",{key:1,onClick:e[9]||(e[9]=b=>s.addTask("subTaskToEdit")),class:"flex align-center btn-task-add"},us)),r("div",hs,[a.subTaskToEdit?(i(),B(u,{key:0,task:a.subTaskToEdit,onSaveTask:s.saveTask},null,8,["task","onSaveTask"])):m("",!0)])])}var ps=k(as,[["render",ms]]);const gs={props:{isAddingGroup:Boolean},data(){return{groupToAdd:U.getEmptyGroup()}},methods:{addGroup(){this.$emit("addGroup"),this.$nextTick(()=>{this.$refs.title.focus()})},saveGroup(){this.groupToAdd.title=this.groupToAdd.title.trim(),console.log("group>>",this.groupToAdd),this.groupToAdd.title&&(this.$emit("saveGroup",this.groupToAdd),this.groupToAdd=U.getEmptyGroup())},closeGroupAdd(){this.groupToAdd=U.getEmptyGroup(),this.$emit("closeGroupAdd")}}},ks=r("div",{class:"flex align-center"},[r("span"),r("span",null,"Add another list")],-1),bs=[ks],_s={key:1,class:"group-edit"},fs=r("button",null,"Add list",-1);function ys(t,e,o,l,a,s){return i(),d("section",null,[o.isAddingGroup?(i(),d("div",{key:0,onClick:e[0]||(e[0]=(...n)=>s.addGroup&&s.addGroup(...n)),class:"group-add"},bs)):m("",!0),o.isAddingGroup?m("",!0):(i(),d("div",_s,[r("form",{type:"submit",onSubmit:e[3]||(e[3]=S((...n)=>s.saveGroup&&s.saveGroup(...n),["prevent"]))},[T(r("input",{type:"text",ref:"title",placeholder:"Enter list title...","onUpdate:modelValue":e[1]||(e[1]=n=>a.groupToAdd.title=n)},null,512),[[M,a.groupToAdd.title]]),r("div",null,[fs,r("button",{onClick:e[2]||(e[2]=(...n)=>s.closeGroupAdd&&s.closeGroupAdd(...n))})])],32)]))])}var vs=k(gs,[["render",ys]]);const Cs={props:{menuOpen:Boolean},data(){return{}},computed:{background(){return this.board.style["background-color"],{"background-color":this.board.style["background-color"]}},methods:{close(){this.$emit("close")},changeBackground(t){const e={"background-color":t};this.$emit("setBackground",e)}}}},Ts={class:"custom-menu"},Ss={key:0,class:"custom-menu-container"},Es=r("span",{class:"btn-boards-drop"},"Change background",-1),Bs=["onClick"];function Ms(t,e,o,l,a,s){return i(),d("div",Ts,[r("div",null,[h(W,{"enter-active-class":"animate__animated animate__slideInRight","leave-active-class":"animate__animated animate__slideOutLeft"},{default:f(()=>[o.menuOpen?(i(),d("div",Ss,[Es,(i(!0),d(v,null,C(t.colors,n=>(i(),d("li",{key:n,style:y({backgroundColor:n}),class:"color",onClick:c=>t.changeBackground(n,"")},null,12,Bs))),128))])):m("",!0)]),_:1})])])}var ws=k(Cs,[["render",Ms]]),Os="/assets/boardsIcon.95d49565.png",ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAAsCAYAAADl06/eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAkMSURBVGhD7ZrrUxNXGMYJYCSEqNzFGS9pqRBkbEWjjuAHp9OKtNCWWuw4Vf+D3r+0nY7+GzqOLdXxAvZD+dAZLy1EkGpHLVpr1QoiVCCQhADlKiF9nvBumoRLAi4QKM/Mzia7Z8++57fvvuc952zEomZHGtmHJLfbrTly5Ij3Gvx2azQat/xdsGK7uVfaPp12hwy6rKxMazabs+Lj47fFxcWtxM0j+/r6HE6n82Zzc/PtvLy8Him6oHT48OHIAwcOvLh8+fLtBoNhzZIlS5YODg7+A/1us9l+zcrKsktRdQTQyx0Ox9cDAwO3h4eHrS6Xq2NoaOhJd3f3dwBdUFNTY5CiC0aE3NDQkGG32z9Hu39Bu1vZ7mfPnrX09PT88PTp01wpqp4qKiqS+vv7z+BmPfBmj0Yg3LSNsHHT1xcSbDRP8+jRo5cA+TNAvurbbgrtfoS3eZ8UD6pI2QdVdHS0RqvVxiI2ea/Bb01UVFSKTqd7Da/V+0ajcfuNGzdi5fS8FT0ZkF9csWJFgV6vfwdtz0Y74+S0R5GRkVocXyp/gypk0KjYhVDBODwyemRUAjsVsAsA+0BaWlpuZWWln1HzSQiRUYcOHXopISHhLfRFJYD5Mtq3TE57hRDSBy8fkr9BFTLo9vb2wd7e3pt8ZRgx5LBHPp79Kozbt379+h3Xrl0bY1y4i5BzcnJeWLZsGT25GJA3BnoyBcDtCCd1XV1df8uhoAoZdH19fT9i8Y/obcsA+w/A9nuaAjstNjaWnv3B2rVrd84n2HgLowkZ2UURnQXZxSsTQLYi6/gJ/VUZHO9PORxUUbIPKovF4kbM6kQ6YyNUPO1khJME8pUiHthQHAxMxTldTEyMo7Cw0FpaWhryKzYXIuTVq1cb0b434CR7CRn2+/U17ACZcQByNQCXofOv3rhxo01OB1XIoCmB7cjOzrbBkEgYtBJgV2Dzg41TcdhSAFwL7+javXu39dSpU37hJlxEyOhXVsOTCxAyStCmTWiCju2QIhHMrsDZDshXMHYoB2QLvL9DToekKYGmCBtG2eHZ7bDFDcOSsY/HFi1FPAJoA7aVgG1A+c7i4uKOEydOhJVnHz16dElmZua6pKSkQthIyDloxxjIED35Z3jyudbW1iubNm2aEmRqyqCpANgREioI268+H9hLEbu7SkpKOo4fPz4op+dU9OSMjIy1qamphfDk9wRyTCBk8WQL+qZzLS0tNdOB/Nxivvn48eNMDEW/ROp3GzFskLHMVzQWnWcrRlLfwdCCcOgg6cl3795NRyb1KUd8sLsfG6F6hf8u2G0F4DNWq7X40qVLiTgc8pSF6uLNCVuG53WTwG6D0Sc5gpzLPNsH8kewtxb2DowHGdlFBzMs2Ps27E3C4bmDrIie3djYmEXY8Oy7sHNo1OT/JLCt8OwTMP61Cxcu6OXyWRMh19XVGQH5Q0CugZ19k0A+jzdw7/Xr11Xx5GnF6EApMdtkMrUjJjNmM/VjNuLtIBn7oFicS8OmZwc5m9kIIe/atWtNcnLym5Jd5OBwDOwcE5PxECoxZjgL0Baz2eyA3c89FawKaEpJ/dhBwng3YKZgP16erRfYOoy+nHv27Jlx2Oz4mF0kJiYqkDfDjkDILkB2EjJGfGefPHli2bp1qyqQKdVAU76eDQNdGNSsHA82dh7YaLAeeXZ3UVFR20wNapQULiUlpUiyC0JeKnZ4JJA7FU9uaGioys3NdaKIaosaqoKmFM8W2Jz1SwLsJPz2m/XDjrBXabXaOJ1O15mfn9+mtmfTk2GHEZC94QK3DoTMcNEFyD/Dk08Tcl5enqqQKdVBUwK7c8OGDcw5RwCTI8hEbIGwdXgQq7Dp8CY49+/f33rs2DFVYBMyQsUayZM5rOaIbzxPZriogiefIeTLly93IZarCnnGxdmw+/fvM89WUr8x2Qh7eclGPIsHFRUVzz2fTcictJfs4ipu0See69VocjHczhQOnV5xbW1tAg57H8K8E2E/ePDABNhfCexno039T4SNRhP2t0z9nmfxgPerr69fj/t9jPtVo+peuY1Xcj8bIJ9jnlxdXR2PwzMKOeRp0ukKw24XPOYvNPx7gDwL7+UU67Cc9ggxPBJvdFJMTEw+XvMPEFN3wiunPKghZAyRjaijEJ0sw4Vn7kJOeySezRSOMZkdn4XhAuXmV7iYSIRw7949etqXaORvcKqJPJuv86mmpqb8qYQR1s+FVNT/Ceq/hqr6pFqvpH6vJ8/7cDGRCENi9hdBwghhnwTs3aF4Nuttbm7mQipXqz0xWarzivXibWK95QsiJgcTobCjEtjBPPskoOyZDLbPJwGcIKInjxuTZa7lLDz5nQUPWRGzAukgg4URdpCl7CDHmxvxgcxPAmpQ/h+53Cuphw/t/wVZEWHfuXMnaBiBJ3KK9RtA8pv1k08CvOECMLvkMq+U6xkurFbru2pNEE1Hc/pkCRsZhhGDir3IEjhyy0YC4rdSwywB4grHJQwqTuNNqK6qquo7ePBgOgZFhXq9fh8GPCaMMv3CC67hjGE7rqvs7e0tb2xstGzbtk3dz7emoDl/hQh73bp16QaDodgHtt+IVaAR9kWn08lVeBtSuJ2A/BYg87sLv7DiA5kLqWfQUV7ZvHmzfS5TuLCIVYSdnp5uRB79LoBzqX+MZ0sosPf399/EvhNlTSiXHghZyvGTgCp6MiFv2bIl5NXqBS9mI7IsxhEkO8iJFg+6h4aG7IjJA3LYT5JdnOby061bt5Kl+kX5ip7NlRqBPW4HOZkAuUU6vuKHDx+GFeQZmb2brkpLS0d27NjhSEhIaEXsdSEscPGAs35B7YSHt0rHV4ZMxJKZmRlW4SKsQFPl5eXu+Pj4TpPJZANoZVlsUtiAzI6vhpDh0VczMjJm/5OAIAo70JSyeACvbAPgEXj3mGUxiuFCOj5+3OLx5HCETIUlaEpZPAj41s/7RZRAVvLk8xjQTOlbuNlW2IKmFM+Wb/04nUqvjgZjfvDiQPbBcMFv4aqn+i3cbCusQVOEzQVfhhGAfgrPfgjYtwD5CkaKF5uammrNZvNinqy24M0aznNw4285vKhFLWpRC08REf8CWiQ4qyM/fXgAAAAASUVORK5CYII=";const xs={props:{board:{type:Object,required:!0}},data(){return{boardTitleToEdit:null,isMembersMenuOpen:!1,isSideMenuOpen:!1}},computed:{selected(){return{selected:this.board.isStarred}},users(){return this.$store.getters.users},boardTitle(){return JSON.parse(JSON.stringify(this.board.title))},userWorkspace(){const t=this.board.createdBy.fullname.split(" ");return t[0]+" "+t[1].split("")[0]+"'s"},checkStar(){if(this.board.star)return"star-on"}},created(){},watch:{boardTitle:{immediate:!0,handler(){this.boardTitleToEdit=this.boardTitle}}},methods:{setBackground(t){this.$emit("setBackground",t)},starBoard(){this.board.star?this.$emit("starBoard",!1):this.$emit("starBoard",!0)}},components:{userAvatar:G,showMenu:ws}},As={class:"board-header"},$s={class:"flex"},Ds=r("button",{class:"btn-boards-drop"},[r("img",{class:"boards-icon",src:Os,alt:""}),r("span",null," Boards "),r("img",{class:"img-arrow",src:ue,alt:""})],-1),Is={class:"board-title",contenteditable:"true"},Ls=r("div",null,null,-1),Us=[Ls],Ns=E(),Gs=r("span",{class:"nav-divider"},"|",-1),Js={class:"btn-user-space"},zs=E(),js=r("span",{class:"nav-divider sub"},"|",-1),Fs={class:"flex board-members"},qs=r("button",{class:"btn-share-board flex center align-center"},[r("span"),E("Share")],-1),Ps=r("button",{class:"btn-show-menu"},[r("span"),r("span",null," Show menu")],-1);function Rs(t,e,o,l,a,s){const n=p("user-avatar");return i(),d("div",As,[r("div",$s,[Ds,r("h2",Is,_(o.board.title),1),r("button",{onClick:e[0]||(e[0]=(...c)=>s.starBoard&&s.starBoard(...c)),class:$([s.checkStar,"btn-star-board"])},Us,2),Ns,Gs,r("button",Js,[r("h4",null,_(s.userWorkspace)+" Workspace",1)]),zs,js,r("div",Fs,[(i(!0),d(v,null,C(o.board.members,c=>(i(),B(n,{key:c._id,user:c},null,8,["user"]))),128)),qs]),Ps])])}var Vs=k(xs,[["render",Rs]]);const Hs={name:"board-details",data(){return{isAddingGroup:!0,labelsOpen:!1,loadDate:!1}},components:{boardGroup:ps,groupAdd:vs,Container:H,Draggable:Z,boardHeader:Vs,taskPreview:ce},async mounted(){const{boardId:t}=this.$route.params;await this.$store.dispatch({type:"loadCurrBoard",boardId:t}),this.board.style&&(document.body.style=`
   background-image: url(${this.board.style.bg});
   background-color: ${this.board.style.bg};`,console.log(this.board))},unmounted(){document.body.style=`
   background: none;`},computed:{board(){return this.$store.getters.currBoard},unfilteredBoard(){return this.$store.state.boardStore.currBoard}},methods:{async starBoard(t){const e=this.$store.getters.currBoard;e.star=t,await this.$store.dispatch({type:"saveCurrBoard",boardToSave:e})},async saveTask(t,e){await this.$store.dispatch({type:"saveTask",groupId:e,taskToSave:t})},async removeGroup(t){await this.$store.dispatch({type:"removeGroup",group:t})},async removeTask(t,e){await this.$store.dispatch({type:"removeTask",groupId:e.id,taskId:t.id})},async updateGroup(t){this.isAddingGroup||(this.isAddingGroup=!0),t.title&&await this.$store.dispatch({type:"updateGroup",groupToSave:t})},async loadBoard(){const{boardId:t}=this.$route.params,e=await this.$store.dispatch({type:"loadCurrBoard",boardId:t});return this.board=e,this.board.style&&(document.body.style=`
    background-image: url(${this.board.style.bg});
    background-color: ${this.board.style.bg};`),e},async onColumnDrop(t){const e=Object.assign({},this.board);console.log(e),t.payload={},t.payload.data=this.board.groups[t.removedIndex],t.payload.id=this.board.groups[t.removedIndex].id,console.log("drop>>",t),e.groups=w.applyDrag(e.groups,t),await this.$store.dispatch({type:"saveCurrBoard",boardToSave:e})},getCardPayload(t){return e=>this.board.groups.filter(o=>o.id===t)[0].tasks[e]},async onCardDrop(t,e){if(console.log(e),e.removedIndex!==null||e.addedIndex!==null){const o=Object.assign({},this.board),l=o.groups.filter(n=>n.id===t)[0],a=o.groups.indexOf(l),s=Object.assign({},l);e.removedIndex==null&&e.addedIndex>=0,s.tasks=w.applyDrag(s.tasks,e),o.groups.splice(a,1,s),await this.$store.dispatch({type:"saveCurrBoard",boardToSave:o})}},goToDetail(t,e){this.$router.push(`/board/${this.board._id}/task/${t.id}/${e.id}`)}},watch:{"$route.params.boardId"(t){!t||(console.log("Changed to",t),this.loadBoard())}}},Zs={key:0,class:"board-details"},Ws=r("div",{class:"bg"},null,-1),Ks={class:"group-list flex"};function Ys(t,e,o,l,a,s){const n=p("board-header"),c=p("router-view"),u=p("task-preview"),b=p("Container"),D=p("board-group"),P=p("Draggable"),R=p("group-add");return s.board?(i(),d("section",Zs,[Ws,h(n,{onStarBoard:s.starBoard,board:s.board},null,8,["onStarBoard","board"]),h(c),r("div",Ks,[h(b,{"group-name":"cols",tag:"div",orientation:"horizontal",onDrop:e[1]||(e[1]=x=>s.onColumnDrop(x))},{default:f(()=>[(i(!0),d(v,null,C(s.board.groups,x=>(i(),B(P,{key:x.id},{default:f(()=>[r("div",null,[h(D,{group:x,onUpdateGroup:s.updateGroup,onSaveGroup:s.updateGroup,onRemoveGroup:s.removeGroup},{default:f(()=>[h(b,{orientation:"vertical","group-name":"col-items",shouldAcceptDrop:(O,g)=>O.groupName==="col-items","get-child-payload":s.getCardPayload(x.id),onDrop:O=>s.onCardDrop(x.id,O)},{default:f(()=>[(i(!0),d(v,null,C(x.tasks,O=>(i(),B(u,{onDueSoon:g=>O.status="due-soon",onInProgress:g=>O.status="in-progress",onOverDue:g=>O.status="over-due",onDone:g=>O.status="done",onSaveTask:g=>s.saveTask(O,x.id),onOpenLabels:e[0]||(e[0]=g=>a.labelsOpen=!a.labelsOpen),labelsOpen:a.labelsOpen,onClick:g=>s.goToDetail(x,O),key:O.id,task:O,onRemoveTask:g=>s.removeTask(O,x)},null,8,["onDueSoon","onInProgress","onOverDue","onDone","onSaveTask","labelsOpen","onClick","task","onRemoveTask"]))),128))]),_:2},1032,["shouldAcceptDrop","get-child-payload","onDrop"])]),_:2},1032,["group","onUpdateGroup","onSaveGroup","onRemoveGroup"])])]),_:2},1024))),128))]),_:1}),h(R,{onAddGroup:e[2]||(e[2]=x=>a.isAddingGroup=!1),onSaveGroup:s.updateGroup,onCloseGroupAdd:e[3]||(e[3]=x=>a.isAddingGroup=!0),isAddingGroup:a.isAddingGroup},null,8,["onSaveGroup","isAddingGroup"])])])):m("",!0)}var Qs=k(Hs,[["render",Ys]]);const Xs={name:"trello-labels",props:{labels:Array},methods:{openEditModal(t){this.$emit("editModalOpened",t,"labelsEdit")}}},eo={class:"trello-labels"},to=r("span",{class:"secondary-section-title"},"Labels",-1),so={class:"clean-list flex wrap"};function oo(t,e,o,l,a,s){return i(),d("section",eo,[to,r("ul",so,[(i(!0),d(v,null,C(o.labels,n=>(i(),d("li",{key:n.id},[r("div",{class:"label",style:y({"background-color":n.color}),onClick:e[0]||(e[0]=(...c)=>s.openEditModal&&s.openEditModal(...c))},_(n.title),5)]))),128)),r("li",null,[r("button",{class:"btn add-label btn-default",onClick:e[1]||(e[1]=(...n)=>s.openEditModal&&s.openEditModal(...n))})])])])}var ro=k(Xs,[["render",oo]]);const ao={name:"trello-members",props:{members:Array},methods:{openEditModal(t){console.log("event",t),this.$emit("editModalOpened",t,"membersEdit")}},components:{userAvatar:G}},no={class:"trello-members"},io=r("span",{class:"secondary-section-title"},"Members",-1),lo={class:"clean-list"};function co(t,e,o,l,a,s){const n=p("user-avatar");return i(),d("section",no,[io,r("ul",lo,[(i(!0),d(v,null,C(o.members,c=>(i(),d("li",{key:c._id,onClick:e[0]||(e[0]=(...u)=>s.openEditModal&&s.openEditModal(...u))},[h(n,{user:c,diameter:32},null,8,["user"])]))),128)),r("li",null,[r("button",{class:"btn-round",onClick:e[1]||(e[1]=(...c)=>s.openEditModal&&s.openEditModal(...c))})])])])}var uo=k(ao,[["render",co]]);const ho={name:"trello-txt-input",props:{txt:String,placeholder:{type:String,default:""},denyEmptySave:{type:Boolean,default:!1},resetOnSave:{type:Boolean},allowNext:{type:Boolean,default:!1}},data(){return{updatedTxt:this.txt,isInEdit:!1}},methods:{saveTxt(){if(console.log("saving Text!"),!this.updatedTxt)return console.log("this.denyEmptySave",this.denyEmptySave),this.denyEmptySave||(this.isInEdit=!1),this.$emit("txtIsEmpty","");this.$emit("txtSaved",this.updatedTxt),this.resetOnSave&&(this.updatedTxt=""),this.isInEdit=!1},openEdit(t){console.log("event.target.tagName",typeof t.target.tagName),t.target.tagName!=="BUTTON"&&(this.isInEdit=!0)},cancel(){this.updatedTxt=this.txt,this.isInEdit=!1},next(){this.saveTxt(),!this.isInEdit&&this.allowNext&&(this.isInEdit=!0)},handleClickOutside(){!this.isInEdit||(this.updatedTxt?this.saveTxt():this.cancel())}},computed:{txtToShow(){return!this.updatedTxt&&this.placeholder?this.placeholder:this.updatedTxt}}},mo={key:0,class:"flex space-between"},po={class:"input-title"},go={key:1,class:"input-edit"},ko=["placeholder"],bo={class:"controlls"};function _o(t,e,o,l,a,s){const n=N("focus"),c=N("clickoutside");return T((i(),d("section",{class:"trello-txt-input",onClick:e[5]||(e[5]=(...u)=>s.openEdit&&s.openEdit(...u))},[a.isInEdit?(i(),d("div",go,[T(r("textarea",{cols:"30",rows:"3",onKeydown:[e[0]||(e[0]=V(S((...u)=>s.next&&s.next(...u),["prevent"]),["enter"])),e[1]||(e[1]=V((...u)=>s.cancel&&s.cancel(...u),["esc"]))],"onUpdate:modelValue":e[2]||(e[2]=u=>a.updatedTxt=u),placeholder:o.placeholder},null,40,ko),[[M,a.updatedTxt],[n]]),r("div",bo,[r("button",{class:"primary-btn",onClick:e[3]||(e[3]=(...u)=>s.saveTxt&&s.saveTxt(...u))},"Save"),r("button",{class:"cancel-btn",onClick:e[4]||(e[4]=(...u)=>s.cancel&&s.cancel(...u))}),j(t.$slots,"edit-controlls")])])):(i(),d("div",mo,[r("span",po,_(s.txtToShow),1),j(t.$slots,"default")]))])),[[c,s.handleClickOutside]])}var Q=k(ho,[["render",_o]]);const fo={name:"activity-log",props:{comments:Array,default:[]},data(){return{updatedComments:this.comments?JSON.parse(JSON.stringify(this.comments)):[],byMember:{}}},methods:{formatCreatedAt(t){return z(t,"MMM d")+" at "+z(t,"HH:MM")},addComment(t){const e={id:w.makeId(),txt:t,createdAt:Date.now(),byMember:this.byMember};this.updatedComments.unshift(e),this.$emit("updated",JSON.parse(JSON.stringify(this.updatedComments)))}},computed:{user(){return console.log(this.$store.getters.loggedinUser),this.$store.getters.loggedinUser}},components:{userAvatar:G,trelloTxtInput:Q}},yo={class:"activity-log"},vo=r("span",{class:"section-title text-m icon-activity"},"Activity",-1),Co={class:"clean-list"},To={class:"user-fullname"},So={class:"comment-time"};function Eo(t,e,o,l,a,s){const n=p("user-avatar"),c=p("trello-txt-input");return i(),d("section",yo,[vo,r("ul",Co,[r("li",null,[h(n,{user:s.user},null,8,["user"]),h(c,{placeholder:"Write a comment...","deny-empty-save":"","reset-on-save":"",onTxtSaved:s.addComment},null,8,["onTxtSaved"])]),(i(!0),d(v,null,C(a.updatedComments,u=>(i(),d("li",{key:u.id},[h(n,{user:u.byMember},null,8,["user"]),r("span",To,_(u.byMember.fullname),1),r("span",So,_(s.formatCreatedAt(u.createdAt)),1),r("p",null,_(u.txt),1)]))),128))])])}var Bo=k(fo,[["render",Eo]]);const Mo={name:"trello-checklist",props:{checklist:Object,isEditModalMounted:Boolean},data(){return{updatedChecklist:JSON.parse(JSON.stringify(this.checklist)),isDeleteContentTeleported:!1}},methods:{saveChecklist(){const t=JSON.parse(JSON.stringify(this.updatedChecklist));this.$emit("updated",t)},toggleTodoStatus(t){const e=this.updatedChecklist.todos[t];e.isDone=!e.isDone,this.saveChecklist()},updateChecklistTitle(t){this.updatedChecklist.title=t,this.saveChecklist()},updateTodoTitle(t,e){const o=this.updatedChecklist.todos.findIndex(l=>l.id===e);this.updatedChecklist.todos[o].title=t,this.saveChecklist()},removeTodo(t){this.updatedChecklist.todos.splice(t,1),this.saveChecklist()},removeChecklist(){this.$emit("removed"),this.$emit("editModalClosed")},addTodo(t){this.updatedChecklist.todos.push({id:w.makeId(),title:t,isDone:!1}),this.saveChecklist()},next(){this.$refs.input.$el.click()},openDeleteModal(t){this.isDeleteContentTeleported=!0,this.$emit("teleportContainerOpened",t)}},computed:{completePercentage(){const t=this.updatedChecklist.todos,e=t.length;if(e===0)return 0;const o=t.filter(l=>l.isDone).length;return Math.floor(o/e*100)},passSuccess(){return this.completePercentage===100?"success":""}},watch:{isEditModalMounted(t){t||(this.isDeleteContentTeleported=!1)}},components:{trelloTxtInput:Q}},wo={class:"trello-checklist"},Oo={class:"todos clean-list"},xo=["checked","onChange"],Ao=["onClick"],$o=["onClick"],Do=r("p",{class:"msg"},"Deleting a checklist is permanent and there is no way to get it back.",-1);function Io(t,e,o,l,a,s){const n=p("trello-txt-input"),c=p("el-progress");return i(),d("section",wo,[h(n,{class:"section-title text-m icon-checklist",txt:a.updatedChecklist.title,onTxtSaved:s.updateChecklistTitle,"deny-empty-save":""},{default:f(()=>[r("button",{class:"btn float-right btn-default",onClick:e[0]||(e[0]=(...u)=>s.openDeleteModal&&s.openDeleteModal(...u))},"Delete")]),_:1},8,["txt","onTxtSaved"]),h(c,{percentage:s.completePercentage,status:s.passSuccess},null,8,["percentage","status"]),r("ul",Oo,[(i(!0),d(v,null,C(a.updatedChecklist.todos,(u,b)=>(i(),d("li",{key:u.id},[r("input",{type:"checkbox",checked:u.isDone,onChange:D=>s.toggleTodoStatus(b)},null,40,xo),h(n,{txt:u.title,onTxtSaved:D=>s.updateTodoTitle(D,u.id),onTxtIsEmpty:D=>s.removeTodo(b)},{"edit-controlls":f(()=>[r("button",{class:"remove-btn-quite",onClick:D=>s.removeTodo(b)},null,8,$o)]),default:f(()=>[r("button",{class:"remove-btn-quite",onClick:D=>s.removeTodo(b)},null,8,Ao)]),_:2},1032,["txt","onTxtSaved","onTxtIsEmpty"])]))),128))]),h(n,{class:"make-btn",placeholder:"Add an item","deny-empty-save":"","reset-on-save":"",onTxtSaved:s.addTodo,"allow-next":"",ref:"input"},null,8,["onTxtSaved"]),a.isDeleteContentTeleported&&o.isEditModalMounted?(i(),B(K,{key:0,to:".teleport-container"},[Do,r("button",{onClick:e[1]||(e[1]=(...u)=>s.removeChecklist&&s.removeChecklist(...u)),class:"delete-btn btn"},"Delete checklist")])):m("",!0)])}var Lo=k(Mo,[["render",Io]]);const Uo={name:"trello-dates",props:{dueDate:Number,status:String},methods:{openEditModal(t){console.log("event",t),this.$emit("editModalOpened",t,"dateEdit")}},computed:{formatDueDate(){return z(this.dueDate,"MMM d")+" at "+z(this.dueDate,"HH:MM")}}},No={class:"trello-dates"},Go=r("span",{class:"secondary-section-title"},"Due date",-1),Jo={class:"flex-container flex align-center"},zo=r("input",{type:"checkbox"},null,-1),jo=r("svg",{width:"24",height:"24",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1);function Fo(t,e,o,l,a,s){return i(),d("section",No,[Go,r("div",Jo,[zo,r("button",{class:"btn-default flex align-center",onClick:e[0]||(e[0]=(...n)=>s.openEditModal&&s.openEditModal(...n))},[E(_(s.formatDueDate)+" ",1),r("span",{class:$(["status-tag",o.status])},_(o.status),3),jo])])])}var qo=k(Uo,[["render",Fo]]);const Po={name:"main-edit-modal",props:{modalTitle:String,pos:Object},mounted(){console.log("Main edit modal is mounted!"),this.correctPosition(),new ResizeObserver(()=>{this.correctPosition}).observe(this.$refs.elModal),this.$emit("mounted")},data(){return{posCorrected:JSON.parse(JSON.stringify(this.pos)),maxHeight:window.innerHeight||document.documentElement.clientHeight}},methods:{closeModal(){this.$emit("editModalClosed")},correctPosition(){const t=JSON.parse(JSON.stringify(this.pos)),e=this.$refs.elModal.getBoundingClientRect(),o={h:window.innerHeight||document.documentElement.clientHeight,w:window.innerWidth||document.documentElement.clientWidth};e.left<0&&(t.x=20),e.right>o.w&&(t.x=o.w-e.width-20),this.maxHeight=o.h,t.y+e.height>o.h&&(t.y=o.h-e.height-20),t.y<20&&(t.y=20,this.maxHeight=o.h-80),this.posCorrected=t}},computed:{position(){return this.$refs.elModal},elheight(){if(!!this.$refs.elModal)return this.$refs.elModal.getBoundingClientRect().height}},watch:{},unmounted(){console.log("main edit modal is unmounted"),this.$emit("unmounted")}},Ro={class:"modal-header"},Vo={class:"modal-header-title"};function Ho(t,e,o,l,a,s){const n=N("clickoutside");return T((i(),d("section",{class:"main-edit-modal",style:y({top:a.posCorrected.y+"px",left:a.posCorrected.x+"px"}),ref:"elModal"},[r("header",Ro,[r("span",Vo,_(o.modalTitle),1),r("button",{class:"exit-btn",onClick:e[0]||(e[0]=(...c)=>s.closeModal&&s.closeModal(...c))})]),r("main",{class:"edit-modal-main",style:y({"max-height":a.maxHeight+"px"})},[j(t.$slots,"default")],4)],4)),[[n,s.closeModal]])}var Zo=k(Po,[["render",Ho]]);const Wo={name:"labels-edit",props:{currTask:Object},data(){return{filterBy:"",labelInEdit:null}},methods:{checkIfTaskLabel(t){return this.taskToEdit.labelIds?this.taskToEdit.labelIds.some(e=>e===t.id):!1},toggleLabelFromTask(t){this.taskToEdit.labelIds||(this.taskToEdit.labelIds=[]);var e=this.taskToEdit.labelIds;const o=e.findIndex(l=>l===t.id);o===-1?e.push(t.id):e.splice(o,1),this.$emit("taskUpdated",this.taskToEdit)},saveLabel(){this.$emit("labelUpdated",this.labelInEdit),this.labelInEdit=null}},computed:{labels(){return this.$store.getters.currBoardLabels},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))},labelsForDisplay(){return this.labels.filter(t=>t.title.toLowerCase().includes(this.filterBy.toLowerCase()))}}},Ko={class:"labels-edit"},Yo={key:0,class:"all-labels"},Qo=r("span",{class:"secondary-section-title"},"Labels",-1),Xo={class:"clean-list"},er=["onClick"],tr=["onClick"],sr={key:1,class:"label-editor"},or={class:"controlls flex space-between align-center"};function rr(t,e,o,l,a,s){return i(),d("section",Ko,[a.labelInEdit?(i(),d("div",sr,[r("div",{class:$(["label",[s.checkIfTaskLabel(a.labelInEdit)?"selected":""]]),style:y({"background-color":a.labelInEdit.color})},[T(r("input",{type:"text",placeholder:"Enter label name...","onUpdate:modelValue":e[1]||(e[1]=n=>a.labelInEdit.title=n)},null,512),[[M,a.labelInEdit.title]])],6),r("div",or,[r("button",{class:"primary-btn",onClick:e[2]||(e[2]=(...n)=>s.saveLabel&&s.saveLabel(...n))},"Save"),r("button",{class:"btn",onClick:e[3]||(e[3]=n=>a.labelInEdit=null)},"Cancel")])])):(i(),d("div",Yo,[T(r("input",{class:"search",type:"text",placeholder:"Search labels...","onUpdate:modelValue":e[0]||(e[0]=n=>a.filterBy=n)},null,512),[[M,a.filterBy]]),Qo,r("ul",Xo,[(i(!0),d(v,null,C(s.labelsForDisplay,n=>(i(),d("li",{key:n.id},[r("div",{class:$(["label",[s.checkIfTaskLabel(n)?"selected":"",n.class]]),style:y({"background-color":n.color}),onClick:c=>s.toggleLabelFromTask(n)},[r("span",null,_(n.title),1)],14,er),r("span",{class:"edit-icon",onClick:S(c=>a.labelInEdit=JSON.parse(JSON.stringify(n)),["stop"])},null,8,tr)]))),128))])]))])}var ar=k(Wo,[["render",rr]]);const nr={name:"members-edit",props:{currTask:Object},data(){return{filterBy:""}},methods:{checkIfTaskMember(t){return this.taskToEdit.members?this.taskToEdit.members.some(e=>e._id===t):!1},async toggleMembership(t){this.taskToEdit.members||(this.taskToEdit.members=[]);var e=this.taskToEdit.members;const o=e.findIndex(l=>l._id===t._id);o===-1?e.push(t):e.splice(o,1),this.$emit("taskUpdated",this.taskToEdit)}},computed:{currBoardMembers(){return this.$store.getters.currBoardMembers},membersForDisplay(){return this.currBoardMembers.filter(t=>t.username.toLowerCase().includes(this.filterBy.toLowerCase())||t.fullname.toLowerCase().includes(this.filterBy.toLowerCase()))},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}},components:{userAvatar:G}},ir={class:"members-edit"},lr=r("span",{class:"secondary-section-title"},"Board members",-1),dr=["onClick"],cr={class:"member"};function ur(t,e,o,l,a,s){const n=p("user-avatar");return i(),d("section",ir,[T(r("input",{class:"search",type:"text",placeholder:"Search members","onUpdate:modelValue":e[0]||(e[0]=c=>a.filterBy=c)},null,512),[[M,a.filterBy]]),lr,r("ul",null,[(i(!0),d(v,null,C(s.membersForDisplay,c=>(i(),d("li",{key:c._id,class:$(["flex align-center",{selected:s.checkIfTaskMember(c._id)}]),onClick:u=>s.toggleMembership(c)},[h(n,{user:c,diameter:32},null,8,["user"]),r("div",cr,[r("span",null,_(c.fullname+" ("+c.username+")"),1)])],10,dr))),128))])])}var hr=k(nr,[["render",ur]]);const mr={name:"checklists-edit",props:{currTask:Object},data(){return{newChecklist:{id:"",title:"Checklist",todos:[]},todosToCopy:[]}},methods:{createChecklist(){this.newChecklist.id=w.makeId(),this.newChecklist.todos=JSON.parse(JSON.stringify(this.todosToCopy.flat())).map(t=>(console.log("todo",t),t.id=w.makeId(),t)),this.taskToEdit.checklists||(this.taskToEdit.checklists=[]),this.taskToEdit.checklists.push(JSON.parse(JSON.stringify(this.newChecklist))),this.$emit("taskUpdated",this.taskToEdit),this.newChecklist={id:null,title:"Checklist",todos:[]},this.$emit("modalClosed")}},computed:{checklists(){return this.$store.getters.currBoardChecklists},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}}},pr={class:"checklists-edit"},gr=r("span",{class:"secondary-section-title"},"Title",-1),kr=r("span",{class:"secondary-section-title"},"Copy items from...",-1),br=r("option",{value:[]},"(none)",-1),_r=["label"],fr=["value"];function yr(t,e,o,l,a,s){const n=N("focus");return i(),d("section",pr,[gr,T(r("input",{class:"search",type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>a.newChecklist.title=c)},null,512),[[n],[M,a.newChecklist.title]]),kr,T(r("select",{"onUpdate:modelValue":e[1]||(e[1]=c=>a.todosToCopy=c),multiple:""},[br,(i(!0),d(v,null,C(s.checklists,c=>(i(),d("optgroup",{key:c.taskId,label:c.taskTitle},[(i(!0),d(v,null,C(c.checklists,u=>(i(),d("option",{key:u.id,value:u.todos},_(u.title),9,fr))),128))],8,_r))),128))],512),[[ye,a.todosToCopy]]),r("button",{class:"primary-btn",onClick:e[2]||(e[2]=(...c)=>s.createChecklist&&s.createChecklist(...c))},"Add")])}var vr=k(mr,[["render",yr]]);const Cr={name:"date-edit",props:{currTask:Object},components:{Datepicker:ve},data(){return{startDate:null,dueDate:null,taskDate:null,currTaskDates:{startDate:null,endDate:null,endTime:null,date:null}}},computed:{taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}},methods:{selectDate(){var t=document.querySelector(".dp__selection_preview"),e=Date.parse(t.innerText);this.taskToEdit.dueDate=e,console.log(this.taskToEdit),this.dueDate-Date.now()<0&&(this.taskToEdit.status="over-due"),this.dueDate-Date.now()<86400*1e3&&(this.taskToEdit.status="due-soon"),this.dueDate-Date.now()>86400*1e3&&(this.taskToEdit.status="in-progress"),this.$emit("taskUpdated",this.taskToEdit)},test(){console.log(modelValue)}}},Tr={class:"date-edit"},Sr=r("p",{class:"date-title"},"Due date",-1);function Er(t,e,o,l,a,s){const n=p("Datepicker");return i(),d("section",Tr,[h(n,{AutoApply:"",modelValue:a.taskDate,"onUpdate:modelValue":[e[1]||(e[1]=c=>a.taskDate=c),s.test],utc:"",inline:"",startTime:{},monthChangeOnScroll:!1,weekStart:"0",monthNameFormat:"long"},{"action-select":f(()=>[r("button",{class:"btn-save-date",onClick:e[0]||(e[0]=(...c)=>s.selectDate&&s.selectDate(...c))},"Save")]),_:1},8,["modelValue","onUpdate:modelValue"]),Sr,r("pre",null,_(a.taskDate),1)])}var Br=k(Cr,[["render",Er]]);const he=t=>{const e="dxj8szufc",l="https://api.cloudinary.com/v1_1/dxj8szufc/image/upload",a=new FormData;return a.append("file",t.target.files[0]),a.append("upload_preset",e),fetch(l,{method:"POST",body:a}).then(s=>s.json()).then(s=>s).catch(s=>{throw console.error(s),s})},Mr={name:"attachment-edit",props:{currTask:Object},created(){this.currStatus=this.statusOptions.waiting},data(){return{currStatus:null,statusOptions:{waiting:{imgName:"Upload-PNG-Image-File.png",txt:"Upload file",isWaiting:!0},loading:{imgName:"loader.gif",txt:"Loading...",isLoading:!0,txtColor:"#00c2e0"},complete:{imgName:"checkmark-cut.gif",txt:"Attachment added successfuly!",txtColor:"#61bd4f"},failed:{imgName:"ezgif.com-gif-maker.gif",txt:"OOPS! File upload failed!",txtColor:"#eb5a46"}}}},methods:{async onUpload(t){console.log("ev.target.files[0]",t.target.files[0]),this.currStatus=this.statusOptions.loading;try{const e=await he(t);this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(e),console.log("this.taskToEdit",this.taskToEdit),this.$emit("taskUpdated",this.taskToEdit),this.currStatus=this.statusOptions.complete}catch{this.currStatus=this.statusOptions.failed}setTimeout(this.closeModal,2e3)},closeModal(){this.$emit("editModalClosed")}},computed:{taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}}},wr={class:"attachment-edit flex column"},Or=r("span",{class:"secondary-section-title"},"Upload file",-1),xr={key:0},Ar=["src","alt"],$r={key:1,class:"status-msg flex align-center"},Dr=["src"];function Ir(t,e,o,l,a,s){const n=N("focus");return i(),d("section",wr,[Or,a.currStatus.isWaiting?(i(),d("label",xr,[r("img",{class:"upload-icon",src:"../../../../src/assets/"+a.currStatus.imgName,alt:a.currStatus.txt},null,8,Ar),T(r("input",{class:"search",type:"file",onChange:e[0]||(e[0]=(...c)=>s.onUpload&&s.onUpload(...c))},null,544),[[n]])])):(i(),d("div",$r,[r("span",{class:"secondary-section-title",style:y({color:a.currStatus.txtColor})},_(a.currStatus.txt),5),r("img",{class:"status-icon",src:"../../../../src/assets/"+a.currStatus.imgName},null,8,Dr)]))])}var Lr=k(Mr,[["render",Ir]]);const Ur={name:"trello-attachments",props:{attachments:Array,isEditModalMounted:Boolean},data(){return{attachmentToEditIdx:NaN,isDeleteContentTeleported:!1,isNameContentTeleported:!1}},methods:{removeAttachment(){this.updatedAttachments.splice(this.attachmentToEditIdx,1),this.$emit("updated",this.updatedAttachments),this.$emit("editModalClosed")},openEditModal(t){this.$emit("editModalOpened",t)},openDeleteModal(t,e){console.log("event",t),this.attachmentToEditIdx=e,this.isDeleteContentTeleported=!0,this.$emit("teleportContainerOpened",t)},openNameModal(t,e){this.attachmentToEditIdx=e,this.isNameContentTeleported=!0,this.$emit("teleportContainerOpened",t)}},computed:{updatedAttachments(){return JSON.parse(JSON.stringify(this.attachments))}},watch:{isEditModalMounted(t){t||(this.isDeleteContentTeleported=!1,this.isNameContentTeleported=!1)}}},Nr={class:"trello-attachments"},Gr=r("div",{class:"section-title text-m icon-attachment"},"Attachments",-1),Jr={class:"attachments clean-list"},zr=["src","alt"],jr={class:"file-details"},Fr={class:"attachment-name"},qr={class:"attachment-addedAt"},Pr={class:"attachment-delete"},Rr=["onClick"],Vr={class:"attachment-edit-name"},Hr=["onClick"],Zr={class:"attachment-make-cover"},Wr=["onClick"],Kr=r("p",{class:"msg"},"Deleting an attachment is permanent. There is no undo.",-1);function Yr(t,e,o,l,a,s){return i(),d("section",Nr,[Gr,r("ul",Jr,[(i(!0),d(v,null,C(o.attachments,(n,c)=>(i(),d("li",{class:"flex",key:n.asset_id},[r("img",{class:"img-preview",src:n.secure_url,alt:n.original_filename},null,8,zr),r("p",jr,[r("span",Fr,_(n.original_filename+"."+n.format),1),r("span",qr,"Added at "+_(n.created_at),1),r("span",Pr,[r("a",{href:"#",onClick:S(u=>s.openDeleteModal(u,c),["prevent"])},"Delete",8,Rr)]),r("span",Vr,[r("a",{href:"#",onClick:S(u=>s.openNameModal(u,c),["prevent"])},"Edit",8,Hr)]),r("span",Zr,[r("a",{href:"#",onClick:S(u=>t.makeCover(c),["prevent"])},"Make-cover",8,Wr)])])]))),128))]),r("button",{class:"btn",onClick:e[0]||(e[0]=(...n)=>s.openEditModal&&s.openEditModal(...n))},"Add an attachment"),a.isDeleteContentTeleported&&o.isEditModalMounted?(i(),B(K,{key:0,to:".teleport-container"},[Kr,r("button",{onClick:e[1]||(e[1]=(...n)=>s.removeAttachment&&s.removeAttachment(...n)),class:"delete-btn btn"},"Delete")])):m("",!0)])}var Qr=k(Ur,[["render",Yr]]);const Xr={name:"cover-edit",props:{currTask:Object},data(){return{currStatus:null,statusOptions:{waiting:{imgName:"Upload-PNG-Image-File.png",txt:"Upload file",isWaiting:!0},loading:{imgName:"loader.gif",txt:"Loading...",isLoading:!0},complete:{imgName:"checkmark-cut.gif",txt:"Attachment added successfuly!"},failed:{imgName:"ezgif.com-gif-maker.gif",txt:"OOPS! File upload failed!"}}}},created(){this.currStatus=this.statusOptions.waiting},methods:{openSearch(){this.$emit("openSearch")},async onUpload(t){console.log("ev.target.files[0]",t.target.files[0]),this.currStatus=this.statusOptions.loading;try{const e=await he(t);console.log(e),this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(e),console.log("this.taskToEdit",this.taskToEdit),this.$emit("taskUpdated",this.taskToEdit),this.currStatus=this.statusOptions.complete}catch{this.currStatus=this.statusOptions.failed}},setCoverClr(t){console.log(this.taskToEdit),this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.bg=t,this.taskToEdit.style.size||(this.taskToEdit.style.size="small"),this.$emit("taskUpdated",this.taskToEdit)},setCoverImg(t){this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.bg=t,this.taskToEdit.style.size||(this.taskToEdit.style.size="big"),this.$emit("taskUpdated",this.taskToEdit),console.log(this.currTask)},setCoverSize(t){console.log(this.taskToEdit),this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.size=t,this.taskToEdit.style.bg||(this.taskToEdit.style.bg="#7BC86C"),this.$emit("taskUpdated",this.taskToEdit)},removeCover(){delete this.taskToEdit.style,console.log(this.taskToEdit),this.$emit("taskUpdated",this.taskToEdit)}},computed:{getBg(){var t=JSON.parse(JSON.stringify(this.currTask));if(t.style||(t.style={},t.style.bg=""),t.style.bg)return console.log(t.style),t.style.bg.split("")[0]==="#"?`background-color: ${t.style.bg}; opacity:1`:`background-image: url('${t.style.bg}'); opacity:1; background-color:transparent;`},getLine(){if(this.currTask.style)return"colorized"},taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}},components:{}},ea={class:"cover-edit"},ta=r("h4",null,"Size",-1),sa={class:"flex center align-center"},oa=["checked"],ra={class:"cover-opt small"},aa=Ce('<div class="line"></div><div class="line"></div><div class="cube"></div><div class="cube"></div><div class="circle"></div>',5),na=[aa],ia=["checked"],la={class:"cover-opt big"},da=r("div",{class:"line"},null,-1),ca=r("div",{class:"line"},null,-1),ua=[da,ca],ha=r("h4",null,"Colors",-1),ma={class:"btn-cover-container flex center wrap"},pa=["checked"],ga=r("div",{class:"btn-clr green"},null,-1),ka=["checked"],ba=r("div",{class:"btn-clr yellow"},null,-1),_a=["checked"],fa=r("div",{class:"btn-clr orange"},null,-1),ya=["checked"],va=r("div",{class:"btn-clr red"},null,-1),Ca=["checked"],Ta=r("div",{class:"btn-clr purple"},null,-1),Sa=["checked"],Ea=r("div",{class:"btn-clr blue"},null,-1),Ba=["checked"],Ma=r("div",{class:"btn-clr lightblue"},null,-1),wa=["checked"],Oa=r("div",{class:"btn-clr turquoise"},null,-1),xa=["checked"],Aa=r("div",{class:"btn-clr pink"},null,-1),$a=["checked"],Da=r("div",{class:"btn-clr navy"},null,-1),Ia=r("h4",null,"Attachments",-1),La={key:1,class:"btn-cover-container img-container flex wrap"},Ua=["onClick"],Na=["checked"],Ga={class:"btn-clr cover-opt-img"},Ja=["src"],za={key:2,class:"btn-upload-cover"},ja=E(" Upload a cover image "),Fa={key:3},qa=["src"];function Pa(t,e,o,l,a,s){return i(),d("section",ea,[ta,r("div",sa,[r("label",null,[r("input",{onClick:e[0]||(e[0]=n=>s.setCoverSize("small")),checked:o.currTask.style&&o.currTask.style.size=="small",type:"radio",name:"cover-opt"},null,8,oa),r("div",ra,[r("div",{class:"cover-opt-header",style:y(s.getBg)},null,4),r("div",{class:$(["cover-opt-lines",s.getLine])},na,2)])]),r("label",null,[r("input",{onClick:e[1]||(e[1]=n=>s.setCoverSize("big")),checked:o.currTask.style&&o.currTask.style.size=="big",type:"radio",name:"cover-opt",value:"true"},null,8,ia),r("div",la,[r("div",{style:y(s.getBg),class:"big-container"},[r("div",{class:$(["cover-opt-lines",s.getLine])},ua,2)],4)])])]),o.currTask.style?(i(),d("button",{key:0,onClick:e[2]||(e[2]=(...n)=>s.removeCover&&s.removeCover(...n)),class:"btn-remove-cover"},"Remove cover")):m("",!0),ha,r("div",ma,[r("label",{onClick:e[3]||(e[3]=n=>s.setCoverClr("#7BC86C"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#7BC86C",type:"radio",name:"btn-clr"},null,8,pa),ga]),r("label",{onClick:e[4]||(e[4]=n=>s.setCoverClr("#f5dd29"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#f5dd29",type:"radio",name:"btn-clr"},null,8,ka),ba]),r("label",{onClick:e[5]||(e[5]=n=>s.setCoverClr("#FFAF3F"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#FFAF3F",type:"radio",name:"btn-clr"},null,8,_a),fa]),r("label",{onClick:e[6]||(e[6]=n=>s.setCoverClr("#EF7564"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#EF7564",type:"radio",name:"btn-clr"},null,8,ya),va]),r("label",{onClick:e[7]||(e[7]=n=>s.setCoverClr("#CD8DE5"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#CD8DE5",type:"radio",name:"btn-clr"},null,8,Ca),Ta]),r("label",{onClick:e[8]||(e[8]=n=>s.setCoverClr("#5BA4CF"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#5BA4CF",type:"radio",name:"btn-clr"},null,8,Sa),Ea]),r("label",{onClick:e[9]||(e[9]=n=>s.setCoverClr("#29CCE5"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#29CCE5",type:"radio",name:"btn-clr"},null,8,Ba),Ma]),r("label",{onClick:e[10]||(e[10]=n=>s.setCoverClr("#6DECA9"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#6DECA9",type:"radio",name:"btn-clr"},null,8,wa),Oa]),r("label",{onClick:e[11]||(e[11]=n=>s.setCoverClr("#FF8ED4"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#FF8ED4",type:"radio",name:"btn-clr"},null,8,xa),Aa]),r("label",{onClick:e[12]||(e[12]=n=>s.setCoverClr("#172B4D"))},[r("input",{checked:o.currTask.style&&o.currTask.style.bg=="#172B4D",type:"radio",name:"btn-clr"},null,8,$a),Da])]),Ia,o.currTask.attachments?(i(),d("div",La,[(i(!0),d(v,null,C(o.currTask.attachments,n=>(i(),d("label",{key:n.asset_id,onClick:c=>s.setCoverImg(n.secure_url)},[r("input",{checked:o.currTask.style&&o.currTask.style.bg==n.secure_url,type:"radio",name:"btn-clr"},null,8,Na),r("div",Ga,[r("img",{class:"cover-opt-img",src:n.secure_url,alt:""},null,8,Ja)])],8,Ua))),128))])):m("",!0),a.currStatus.isWaiting||!a.currStatus.isLoading?(i(),d("label",za,[ja,r("input",{type:"file",class:"attach",onChange:e[13]||(e[13]=(...n)=>s.onUpload&&s.onUpload(...n))},null,32)])):m("",!0),a.currStatus.isLoading?(i(),d("div",Fa,[r("img",{src:"../../../../src/assets/"+a.currStatus.imgName},null,8,qa),r("span",null,_(a.currStatus.txt),1)])):m("",!0),r("button",{onClick:e[14]||(e[14]=S((...n)=>s.openSearch&&s.openSearch(...n),["stop"])),class:"btn-search-photo"},"Search for photos")])}var Ra=k(Xr,[["render",Pa]]);const Va={name:"teleport-container"},Ha={class:"teleport-container"};function Za(t,e,o,l,a,s){return i(),d("section",Ha)}var Wa=k(Va,[["render",Za]]);const Ka={query:Ya};async function Ya(t){return(await de({method:"get",url:"https://api.unsplash.com/search/photos",params:{client_id:"wfRMyNNl6BtufTtEgOm1agD3oTHPI-ymhw9iJXaCr98",query:t,page:1,per_page:20,orientation:"landscape",w:"2560",h:"1560"}})).data}const Qa={name:"search-photo",props:{currTask:Object},data(){return{isSearching:!1,res:null}},created(){this.searchImg=w.debounce(this.searchImg,1e3)},methods:{async searchImg(){const t=this.$refs.filterBy.value;if(!t){this.isSearching=!1,this.res=null;return}this.res=await Ka.query(t),this.isSearching=!0,console.log(this.res),this.res=this.res.results.map(e=>({small:e.urls.thumb,regular:e.urls.regular,big:e.urls.full,asset_id:e.id,format:"png",original_filename:e.alt_description,secure_url:e.urls.regular,created_at:e.created_at}))},setImg(t){this.taskToEdit.style||(this.taskToEdit.style={}),this.taskToEdit.style.bg=t.regular,this.taskToEdit.style.size||(this.taskToEdit.style.size="big"),this.taskToEdit.attachments||(this.taskToEdit.attachments=[]),this.taskToEdit.attachments.push(t),this.$emit("taskUpdated",this.taskToEdit),this.$emit("closeSearch")},setSuggestSearch(t){this.$refs.filterBy.value=t,this.searchImg()}},computed:{taskToEdit(){return JSON.parse(JSON.stringify(this.currTask))}}},Xa={class:"search-photo"},en={key:0},tn=r("h4",null,"Suggested searches",-1),sn={class:"suggested-container flex wrap"},on={key:1},rn=r("h4",null,"Results",-1),an={class:"search-results flex wrap"},nn=["onClick"],ln=["src"];function dn(t,e,o,l,a,s){return i(),d("section",Xa,[r("input",{ref:"filterBy",onInput:e[0]||(e[0]=(...n)=>s.searchImg&&s.searchImg(...n)),class:"img-search-input",type:"text",placeholder:"Search for photos"},null,544),a.isSearching?m("",!0):(i(),d("section",en,[tn,r("div",sn,[r("button",{onClick:e[1]||(e[1]=n=>s.setSuggestSearch("Perspective")),class:"btn-search-opt"},"Perspective"),r("button",{onClick:e[2]||(e[2]=n=>s.setSuggestSearch("Productivity")),class:"btn-search-opt"},"Productivity"),r("button",{onClick:e[3]||(e[3]=n=>s.setSuggestSearch("Oraganization")),class:"btn-search-opt"},"Oraganization"),r("button",{onClick:e[4]||(e[4]=n=>s.setSuggestSearch("Colorful")),class:"btn-search-opt"},"Colorful"),r("button",{onClick:e[5]||(e[5]=n=>s.setSuggestSearch("Nature")),class:"btn-search-opt"},"Nature"),r("button",{onClick:e[6]||(e[6]=n=>s.setSuggestSearch("Business")),class:"btn-search-opt"},"Business"),r("button",{onClick:e[7]||(e[7]=n=>s.setSuggestSearch("Minimal")),class:"btn-search-opt"},"Minimal"),r("button",{onClick:e[8]||(e[8]=n=>s.setSuggestSearch("Space")),class:"btn-search-opt"},"Space"),r("button",{onClick:e[9]||(e[9]=n=>s.setSuggestSearch("Animals")),class:"btn-search-opt"},"Animals")])])),a.res?(i(),d("section",on,[rn,r("section",an,[(i(!0),d(v,null,C(a.res,n=>(i(),d("div",{onClick:c=>s.setImg(n),class:"res-container",key:n},[r("img",{src:n.small,alt:""},null,8,ln)],8,nn))),128))])])):m("",!0)])}var cn=k(Qa,[["render",dn]]);const un={name:"task-details",async created(){this.currTaskId=this.$route.params.taskId,this.parentGroupId=this.$route.params.groupId;const{groupId:t,taskId:e}=this.$route.params;await this.$store.dispatch({type:"loadCurrTask",groupId:t,taskId:e})},data(){return{editModalStatus:{isOpen:!1,editType:"",pos:null,title:""},isDeleteContentTeleported:!1,isEditModalMounted:!1,currTaskId:"",parentGroupId:""}},mounted(){},methods:{checkImg(){return this.currTask.style.bg.split("")[0]!=="#"},openSearch(){this.editModalStatus.editType="search-photo"},async saveCurrTask(t=null){const e=t||this.currTask;await this.$store.dispatch({type:"saveTask",groupId:this.parentGroupId,taskToSave:JSON.parse(JSON.stringify(e))}),console.log("Current task saved!")},async removeTask(){const t=this.$route.params.groupId,e=await this.$store.dispatch({type:"removeTask",groupId:t,taskId:this.currTask.id});this.$router.push(`/board/${e._id}`)},updateDesc(t){console.log("updatedDesc",t),this.currTask.description=t,this.saveCurrTask()},updateChecklist(t){const e=this.currTask.checklists.findIndex(o=>o.id===t.id);this.currTask.checklists[e]=t,this.saveCurrTask()},updateLabel(t){t=JSON.parse(JSON.stringify(t)),this.$store.dispatch({type:"updateLabel",label:t})},removeChecklist(t){this.currTask.checklists.splice(t,1),this.saveCurrTask()},updateComments(t){this.currTask.comments=t,this.saveCurrTask()},updateAttachments(t){this.currTask.attachments=t,this.saveCurrTask()},closeModal(){this.saveCurrTask();const t=this.$route.params.boardId;this.$router.push({name:"board",params:{boardId:t}})},openDeleteModal(t){this.isDeleteContentTeleported=!0,this.openEditModal(t,"teleportContainer","Delete card?")},openEditModal(t,e,o=""){console.log("editType",e);var l;if(!t)l=this.pos;else{const s=t.target.getBoundingClientRect();l={x:s.x,y:s.y-s.height-10}}if(!o)switch(e){case"labels-edit":console.log("inside switch labels edit"),o="Labels";break;case"members-edit":o="Members";break;case"checklists-edit":o="Add checklist";break;case"date-edit":o="Dates";break;case"attachment-edit":o="Attach from computer";break;case"cover-edit":o="Cover";break;case"searchPhoto":o="Photo search"}console.log("title",o);const a={isOpen:!0,editType:e,pos:l,title:o};this.editModalStatus=a},closeEditModal(){this.editModalStatus={isOpen:!1,editType:"",pos:null,title:""}}},computed:{getCoverClr(){return`background-color: ${this.currTask.style.bg} !important`},boardLabels(){return this.$store.getters.currBoardLabels},hasLabels(){return this.currTaskLabels&&this.currTaskLabels.length>0},hasMembers(){if(!!this.currTask)return this.currTask.members&&this.currTask.members.length>0},hasAttachments(){return this.currTask.attachments&&this.currTask.attachments.length},currTask(){return this.$store.getters.getCurrTask},currTaskLabels(){return!this.currTask.labelIds||!this.currTask.labelIds.length?[]:this.boardLabels.filter(t=>this.currTask.labelIds.includes(t.id))}},watch:{isEditModalMounted(t){t||(this.isDeleteContentTeleported=!1)}},components:{mainEditModal:Zo,trelloLabels:ro,trelloMembers:uo,activityLog:Bo,trelloChecklist:Lo,trelloTxtInput:Q,trelloDates:qo,labelsEdit:ar,membersEdit:hr,checklistsEdit:vr,dateEdit:Br,attachmentEdit:Lr,trelloAttachments:Qr,coverEdit:Ra,teleportContainer:Wa,searchPhoto:cn}},hn={key:0,class:"task-details"},mn={class:"modal-screen flex center"},pn={class:"modal-container flex column center"},gn={key:1,class:"cover"},kn=["src"],bn={class:"modal-header section-title text-l icon-task-title"},_n={class:"flex-container flex space-between"},fn={class:"modal-main"},yn={key:0,class:"notations flex wrap"},vn={class:"description"},Cn=r("span",{class:"section-title text-m icon-description"},"Description",-1),Tn={key:1,class:"attachments"},Sn={key:2,class:"checklists"},En={class:"activity-log"},Bn={class:"modal-sidebar flex column"},Mn=r("span",{class:"secondary-section-title"},"Add to card",-1),wn=r("span",{class:"secondary-section-title"},"Actions",-1),On=r("p",{class:"msg"},"All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo.",-1);function xn(t,e,o,l,a,s){const n=p("trello-members"),c=p("trello-labels"),u=p("trello-dates"),b=p("trello-txt-input"),D=p("trello-attachments"),P=p("trello-checklist"),R=p("activity-log"),x=p("main-edit-modal"),O=N("clickoutside");return s.currTask?(i(),d("section",hn,[r("div",mn,[T((i(),d("div",pn,[m("",!0),s.currTask.style?(i(),d("div",gn,[s.currTask.style&&s.currTask.style.bg.split("")[0]!=="#"?(i(),d("img",{key:0,src:s.currTask.style.bg,alt:""},null,8,kn)):(i(),d("div",{key:1,style:y(s.getCoverClr),class:"cover-clr"},null,4))])):m("",!0),r("button",{class:"exit-btn",onClick:e[0]||(e[0]=(...g)=>s.closeModal&&s.closeModal(...g))}),r("div",bn,_(s.currTask.title),1),r("div",_n,[r("div",fn,[(i(),d("div",yn,[s.hasMembers?(i(),B(n,{key:0,members:s.currTask.members,onEditModalOpened:s.openEditModal},null,8,["members","onEditModalOpened"])):m("",!0),s.hasLabels?(i(),B(c,{key:1,labels:s.currTaskLabels,onEditModalOpened:s.openEditModal},null,8,["labels","onEditModalOpened"])):m("",!0),s.currTask.dueDate?(i(),B(u,{key:2,dueDate:s.currTask.dueDate,status:s.currTask.status,onEditModalOpened:s.openEditModal},null,8,["dueDate","status","onEditModalOpened"])):m("",!0)])),r("div",vn,[Cn,h(b,{class:"make-btn",txt:s.currTask.description,placeholder:"Add a more detailed description\u2026",onTxtSaved:s.updateDesc,onTxtIsEmpty:s.updateDesc},null,8,["txt","onTxtSaved","onTxtIsEmpty"])]),s.hasAttachments?(i(),d("div",Tn,[h(D,{attachments:s.currTask.attachments,isEditModalMounted:a.isEditModalMounted,onEditModalOpened:e[1]||(e[1]=g=>s.openEditModal(g,"attachmentEdit")),onTeleportContainerOpened:e[2]||(e[2]=g=>s.openEditModal(g,"teleportContainer","Delete attachment?")),onUpdated:s.updateAttachments},null,8,["attachments","isEditModalMounted","onUpdated"])])):m("",!0),(i(),d("div",Sn,[(i(!0),d(v,null,C(s.currTask.checklists,(g,ke)=>(i(),B(P,{key:g.id,checklist:g,isEditModalMounted:a.isEditModalMounted,onUpdated:s.updateChecklist,onRemoved:te=>s.removeChecklist(ke),onEditModalClosed:s.closeEditModal,onTeleportContainerOpened:e[3]||(e[3]=te=>s.openEditModal(te,"teleportContainer","Delete Checklist?"))},null,8,["checklist","isEditModalMounted","onUpdated","onRemoved","onEditModalClosed"]))),128))])),r("div",En,[h(R,{comments:s.currTask.comments,onUpdated:s.updateComments},null,8,["comments","onUpdated"])])]),r("div",Bn,[Mn,r("button",{class:"btn side-bar icon-members",onClick:e[4]||(e[4]=g=>s.openEditModal(g,"members-edit"))},"Members"),r("button",{class:"btn side-bar icon-labels",onClick:e[5]||(e[5]=g=>s.openEditModal(g,"labels-edit"))},"Labels"),r("button",{class:"btn side-bar icon-checklist",onClick:e[6]||(e[6]=g=>s.openEditModal(g,"checklists-edit"))},"Checklist"),r("button",{class:"btn side-bar icon-dates",onClick:e[7]||(e[7]=g=>s.openEditModal(g,"date-edit"))},"Dates"),r("button",{class:"btn side-bar icon-attachment",onClick:e[8]||(e[8]=g=>s.openEditModal(g,"attachment-edit"))},"Attachment"),r("button",{class:"btn side-bar icon-cover",onClick:e[9]||(e[9]=g=>s.openEditModal(g,"cover-edit"))},"Cover"),wn,r("button",{class:"btn side-bar icon-copy",onClick:e[10]||(e[10]=g=>s.openEditModal(g,"copy-edit"))},"Copy"),r("button",{class:"btn delete-btn side-bar icon-delete",onClick:e[11]||(e[11]=(...g)=>s.openDeleteModal&&s.openDeleteModal(...g))},"Delete")])]),h(W,{"enter-active-class":"animate__animated animate__fadeIn animate__faster","leave-active-class":"animate__animated animate__fadeOut animate__faster"},{default:f(()=>[a.editModalStatus.isOpen?(i(),B(x,{key:0,"modal-title":a.editModalStatus.title,onEditModalClosed:s.closeEditModal,pos:a.editModalStatus.pos,onMounted:e[14]||(e[14]=g=>this.isEditModalMounted=!0),onUnmounted:e[15]||(e[15]=g=>this.isEditModalMounted=!1)},{default:f(()=>[(i(),B(Te(a.editModalStatus.editType),{currTask:s.currTask,onTaskUpdated:s.saveCurrTask,onEditModalClosed:s.closeEditModal,onLabelUpdated:s.updateLabel,onOpenSearch:e[12]||(e[12]=g=>s.openEditModal(void 0,"search-photo")),onCloseSearch:e[13]||(e[13]=g=>s.openEditModal(void 0,"cover-edit"))},null,8,["currTask","onTaskUpdated","onEditModalClosed","onLabelUpdated"]))]),_:1},8,["modal-title","onEditModalClosed","pos"])):m("",!0)]),_:1}),a.isDeleteContentTeleported&&a.isEditModalMounted?(i(),B(K,{key:2,to:".teleport-container"},[On,r("button",{onClick:e[16]||(e[16]=(...g)=>s.removeTask&&s.removeTask(...g)),class:"delete-btn btn"},"Delete")])):m("",!0)])),[[O,s.closeModal]])])])):m("",!0)}var An=k(un,[["render",xn]]);const $n={data(){return{user:{username:null,password:null}}},methods:{async login(){try{await this.$store.dispatch({type:"login",userCred:this.user})&&this.$router.push("/board/624afa5e47cdb81018c1bc99")}catch(t){console.log("ERROR: cannot login. User and/or password are incorrect",t);const e={txt:"Invalid username or password",type:"error"};await this.$store.dispatch({type:"showMsg",msg:e})}}}},Dn={class:"login-signup"},In={class:"header-home"},Ln=r("div",{class:"logo"},[r("span",{class:"material-icons-outlined logo-icon"}),E("Mello ")],-1),Un={class:"homepage-nav"},Nn=E("Home"),Gn=r("span",null," | ",-1),Jn=E("Sign up"),zn={class:"main-container login-container"},jn=r("p",null,"Log in to Mello",-1),Fn=r("button",{class:"login"},"Log in",-1),qn=E("Sign up for an account");function Pn(t,e,o,l,a,s){const n=p("router-link");return i(),d("div",Dn,[r("section",In,[Ln,r("nav",Un,[h(n,{to:"/",class:"login"},{default:f(()=>[Nn]),_:1}),Gn,h(n,{to:"/signup",class:"signup"},{default:f(()=>[Jn]),_:1})])]),r("div",zn,[jn,r("form",{onSubmit:e[2]||(e[2]=S((...c)=>s.login&&s.login(...c),["prevent"]))},[T(r("input",{type:"text",name:"username","onUpdate:modelValue":e[0]||(e[0]=c=>a.user.username=c),placeholder:"Enter username",required:""},null,512),[[M,a.user.username]]),T(r("input",{type:"password",name:"password","onUpdate:modelValue":e[1]||(e[1]=c=>a.user.password=c),placeholder:"Enter password",required:""},null,512),[[M,a.user.password]]),Fn],32),h(n,{class:"btn-signup",to:"/signup"},{default:f(()=>[qn]),_:1})])])}var Rn=k($n,[["render",Pn]]);const Vn={data(){return{user:{fullname:null,username:null,email:null,password:null,imgUrl:"",mentions:[]},isLoading:!1,isLoaded:!1}},methods:{async onUploadImg(t){try{this.isLoading=!0;const e=await uploadImg(t);this.user.imgUrl=e.url,this.isLoaded=!0}catch(e){throw console.log("cannot upload image",e),e}finally{this.isLoading=!1}},async signup(){await this.$store.dispatch({type:"signup",userCred:this.user}),this.$router.push("/board/624afa5e47cdb81018c1bc99")}}},Hn={class:"login-signup"},Zn={class:"header-home"},Wn=r("div",{class:"logo"},[r("span",{class:"material-icons-outlined logo-icon"}),E("Mello ")],-1),Kn={class:"homepage-nav"},Yn=E("Home"),Qn=r("span",null," | ",-1),Xn=E("Log in"),ei={class:"main-container"},ti=r("p",null,"Sign up for your account",-1),si={key:0},oi=r("button",null,"Sign up",-1),ri=E("Already have an account? Log in");function ai(t,e,o,l,a,s){const n=p("router-link");return i(),d("div",Hn,[r("section",Zn,[Wn,r("nav",Kn,[h(n,{to:"/",class:"login"},{default:f(()=>[Yn]),_:1}),Qn,h(n,{to:"/login",class:"signup"},{default:f(()=>[Xn]),_:1})])]),r("div",ei,[ti,r("form",{onSubmit:e[4]||(e[4]=S((...c)=>s.signup&&s.signup(...c),["prevent"]))},[T(r("input",{type:"text",name:"fullname","onUpdate:modelValue":e[0]||(e[0]=c=>a.user.fullname=c),placeholder:"Enter full name",autocomplete:"off",required:""},null,512),[[M,a.user.fullname]]),T(r("input",{type:"text",name:"username","onUpdate:modelValue":e[1]||(e[1]=c=>a.user.username=c),placeholder:"Enter username",autocomplete:"off",required:""},null,512),[[M,a.user.username]]),T(r("input",{type:"email",name:"email","onUpdate:modelValue":e[2]||(e[2]=c=>a.user.email=c),placeholder:"Enter email",required:""},null,512),[[M,a.user.email]]),T(r("input",{type:"password",name:"password","onUpdate:modelValue":e[3]||(e[3]=c=>a.user.password=c),placeholder:"Enter password",required:""},null,512),[[M,a.user.password]]),r("div",null,[a.isLoading?(i(),d("div",si," Loading image... ")):m("",!0)]),oi],32),h(n,{class:"btn-signup",to:"/login"},{default:f(()=>[ri]),_:1})])])}var ni=k(Vn,[["render",ai]]);const me=Se({history:Ee("/"),routes:[{path:"/",name:"home",component:rt},{path:"/board",name:"boards",component:yt},{path:"/board/:boardId",name:"board",component:Qs,children:[{path:"task/:groupId/:taskId",name:"task-details",component:An}]},{path:"/login",name:"Login",component:Rn},{path:"/signup",name:"Signup",component:ni}]}),ii="/api/";var li=de.create({withCredentials:!0});const I={get(t,e){return F(t,"GET",e)},post(t,e){return F(t,"POST",e)},put(t,e){return F(t,"PUT",e)},delete(t,e){return F(t,"DELETE",e)}};async function F(t,e="GET",o=null){try{return(await li({url:`${ii}${t}`,method:e,data:o,params:e==="GET"?o:null})).data}catch(l){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,o),console.dir(l),l.response&&l.response.status===401&&me.push("/login"),l}}const di="user-watch",ne="board updated",ie="user-updated",ci="",L=ui();window.socketService=L;L.setup();function ui(){var t=null;return{async setup(){t=Be(ci),console.log("socket",t)},on(o,l){t.on(o,l)},off(o,l=null){!t||(l?t.off(o,l):t.removeAllListeners(o))},emit(o,l){t.emit(o,l)},terminate(){t=null}}}const X="loggedinUser";q({_id:"6245e54524c152b7c822ae91",fullname:"Amit Miz",username:"amit",password:"123",imgUrl:"https://ca.slack-edge.com/T02L3AYJGN4-U02K3QJLCBH-762de20f3035-512",isAdmin:!1});const A={login:pi,logout:ki,signup:gi,getLoggedinUser:ee,getUsers:hi,getById:pe,remove:mi,update:ge,changeScore:bi,getMiniUser:_i};window.userService=A;function hi(){return I.get("user")}async function pe(t){return await I.get(`user/${t}`)}function mi(t){return I.delete(`user/${t}`)}async function ge(t){return t=await I.put(`user/${t._id}`,t),ee()._id===t._id&&q(t),t}async function pi(t){try{const e=await I.post("auth/login",t);if(e)return q(e)}catch(e){throw console.log("userService: Error in login user",e),e}}async function gi(t){try{const e=await I.post("auth/signup",t);return q(e)}catch(e){throw console.log("userService: Error in signup user",e),e}}async function ki(){return sessionStorage.removeItem(X),await I.post("auth/logout")}async function bi(t){const e=ee();if(!e)throw new Error("Not loggedin");return e.score=e.score+t||t,await ge(e),e.score}function q(t){return sessionStorage.setItem(X,JSON.stringify(t)),t}function ee(){const t=JSON.parse(sessionStorage.getItem(X)||"null");return delete t._id,t}async function _i(t){try{const e=await pe(t);return{_id:e._id,username:e.username,fullname:e.fullname,imgUrl:e.imgUrl}}catch(e){throw console.log("userService: Error in getById user",e),e}}const U={query:fi,getById:yi,remove:vi,save:Ci,getEmptyBoard:Ti,getEmptyTask:Ei,getEmptyGroup:Si};async function fi(){try{return await I.get("board")}catch(t){console.log("query had an error",t)}}async function yi(t){try{return await I.get(`board/${t}`)}catch(e){console.log("Error:",e)}}async function vi(t){try{return await I.get(`board/${t}`)}catch(e){console.log("Error:",e)}}async function Ci(t){try{return t._id?await I.put("board",t):await I.post("board",t)}catch(e){console.log("Error:",e)}}async function Ti(){return{title:"",createdAt:Date.now(),createdBy:{},style:{bgImg:["https://res.cloudinary.com/dxj8szufc/image/upload/v1648812004/bg/bg6_hsbmsz.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648812001/bg/bg2_mz8ugr.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648812000/bg/bg3_dmcjgv.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811997/bg/bg5_pkzq9o.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811995/bg/bg4_mvddif.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811991/bg/bg7_tbhddd.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811988/bg/bg_iyfy8d.jpg","https://res.cloudinary.com/dxj8szufc/image/upload/v1648811985/bg/bg1_xzp635.jpg","#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc"]},labels:[{id:"l101",title:"",color:"#61bd4f"},{id:"l102",title:"",color:"#f2d600"},{id:"l103",title:"",color:"#ff9f1a"},{id:"l104",title:"",color:"#eb5a46"},{id:"l105",title:"",color:"#c377e0"},{id:"l106",title:"",color:"#0079bf"},{id:"l107",title:"",color:"#00c2e0"},{id:"l108",title:"",color:"#51e898"},{id:"l109",title:"",color:"#ff78cb"},{id:"l110",title:"",color:"#344563"}],members:[],groups:[],activities:[]}}function Si(){return{id:"",title:"",tasks:[],style:{}}}function Ei(){const{_id:t,fullname:e,imgUrl:o}=A.getLoggedinUser();return{id:w.makeId(),title:"",status:"",description:"",createdAt:Date.now(),dueDate:null,byMember:{_id:t,fullname:e,imgUrl:o}}}const Bi={data(){return{board:U.getEmptyBoard(),colors:[],imgs:[],selectImg:"",selectColor:""}},created(){this.renderColors()},methods:{renderColors(){this.colors=[];for(var t=0;t<9;t++)this.colors.push(w.getRandomColor())},closeCompose(t){t.target.className==="board-compose-container"&&this.$emit("closeCompose")},async createBoard(){this.board.style={"background-color":this.selectColor,"background-image":`url(${this.selectImg})`},this.board.createdAt=Date.now();try{const t=this.$store.getters.loggedinUser._id,e=await this.$store.dispatch({type:"getMiniUser",userId:t});this.board.createdBy=e,this.board.members=[e],this.$emit("addBoard",this.board)}catch(t){console.log("failed to get miniLoggedInUser",t)}},close(){this.$emit("closeCompose")},setBcg(t){this.selectImg="",this.selectColor=t,this.board.style={"background-color":t}},setimg(t){this.selectColor="",this.selectImg=t,this.board.style={"background-image:":`url(${t})`}}},destroyed(){this.colors=[]}},Mi={class:"board-compose"},wi=E("Create board"),Oi=E("Change Colors"),xi={class:"backgrounds"},Ai={class:"board-compose-imgs"},$i=["onClick"],Di={class:"board-compose-bgcs"},Ii=["onClick"];function Li(t,e,o,l,a,s){const n=p("el-input"),c=p("el-button");return i(),d("div",{class:"board-compose-container",onClick:e[2]||(e[2]=(...u)=>s.closeCompose&&s.closeCompose(...u))},[r("div",Mi,[r("div",{class:"board-compose-preview",style:y({backgroundColor:a.selectColor,backgroundImage:`url(${a.selectImg})`})},[r("span",{onClick:e[0]||(e[0]=(...u)=>s.close&&s.close(...u))},"close"),h(n,{placeholder:"Add board title",modelValue:a.board.title,"onUpdate:modelValue":e[1]||(e[1]=u=>a.board.title=u),onKeyup:V(s.createBoard,["enter","native"])},null,8,["modelValue","onKeyup"]),h(c,{onClick:s.createBoard,type:"primary",disabled:!a.board.title,class:"compose-btn"},{default:f(()=>[wi]),_:1},8,["onClick","disabled"]),h(c,{onClick:s.renderColors,type:"primary",class:"compose-btn change-colors"},{default:f(()=>[Oi]),_:1},8,["onClick"])],4),r("section",xi,[r("div",Ai,[(i(!0),d(v,null,C(a.imgs,(u,b)=>(i(),d("span",{key:b,style:y({backgroundImage:`url(${u})`}),onClick:D=>s.setimg(u)},null,12,$i))),128))]),r("div",Di,[(i(!0),d(v,null,C(a.colors,(u,b)=>(i(),d("span",{key:b,style:y({backgroundColor:u}),onClick:D=>s.setBcg(u)},null,12,Ii))),128))])])])])}var Ui=k(Bi,[["render",Li]]);const Ni={props:{boards:{type:Array,required:!0}},data(){return{recentBoards:null,listClose:[],searchBoard:""}},created(){this.$store.getters.currBoard&&this.$store.commit({type:"addBoardToRecentBoards",board:this.$store.getters.currBoard}),this.recentBoards=this.$store.getters.recentBoards},mounted(){this.$refs.searchBoard.focus()},methods:{closeBoardList(){this.$emit("closeBoardList")},openBoard(t){this.$store.commit({type:"addBoardToRecentBoards",board:t}),(!this.$store.getters.currBoard||t._id!==this.$store.getters.currBoard._id)&&(this.$emit("setBackground",t.style),this.$store.commit({type:"setCurrBoard",board:t}),this.$router.push(`/b/${t._id}`)),this.closeBoardList()},toggleListClose(t){const e=this.listClose.findIndex(o=>o===t);e===-1?this.listClose.push(t):this.listClose.splice(e,1)},setFilter(){this.$store.commit({type:"setFilterBy",filterBy:{txt:this.searchBoard}})}},computed:{borads(){return this.boards.filter(t=>t.isStarred)},boardsAfterFilter(){return this.$store.getters.boardsToShow}}},Gi={key:0},Ji={key:0},zi=r("h2",{class:"title"},[r("span",null,"BOARDS")],-1),ji={key:0},Fi=["onClick"],qi=r("h2",null,[r("span",null,"RECENT BOARDS")],-1),Pi={key:0},Ri=["onClick"],Vi=r("h2",null,[r("span",null,"ALL BOARDS")],-1),Hi={key:0},Zi=["onClick"],Wi={key:1},Ki=["onClick"];function Yi(t,e,o,l,a,s){return i(),d("section",null,[r("header",null,[T(r("input",{ref:"searchBoard",class:"input-search-boards",type:"text",placeholder:"Find boards by name...","onUpdate:modelValue":e[0]||(e[0]=n=>a.searchBoard=n),onInput:e[1]||(e[1]=(...n)=>s.setFilter&&s.setFilter(...n))},null,544),[[M,a.searchBoard]]),r("span",{onClick:e[2]||(e[2]=(...n)=>s.closeBoardList&&s.closeBoardList(...n))},"close")]),r("main",null,[a.searchBoard?(i(),d("section",Wi,[r("div",null,[(i(!0),d(v,null,C(s.boardsAfterFilter,n=>(i(),d("article",{key:n._id,class:"board-preview",onClick:c=>s.openBoard(n)},null,8,Ki))),128))])])):(i(),d("section",Gi,[s.borads.length?(i(),d("div",Ji,[zi,a.listClose.includes("borads")?m("",!0):(i(),d("div",ji,[(i(!0),d(v,null,C(s.borads,n=>(i(),d("article",{key:n._id,class:"board-preview",onClick:c=>s.openBoard(n)}," > ",8,Fi))),128))]))])):m("",!0),r("div",null,[qi,a.listClose.includes("recentBoards")?m("",!0):(i(),d("div",Pi,[(i(!0),d(v,null,C(a.recentBoards,n=>(i(),d("article",{key:n._id,onClick:c=>s.openBoard(n)},null,8,Ri))),128))]))]),r("div",null,[Vi,a.listClose.includes("boards")?m("",!0):(i(),d("div",Hi,[(i(!0),d(v,null,C(o.boards,n=>(i(),d("article",{key:n._id,class:"board-preview",onClick:c=>s.openBoard(n)},null,8,Zi))),128))]))])]))])])}var Qi=k(Ni,[["render",Yi]]);const Xi={props:{user:{type:Object,required:!0}},data(){return{}},methods:{close(){this.$emit("close")},logout(){this.$emit("logout")}},components:{userAvatar:G}},el={class:"user-menu"},tl={class:"group-edit-header"},sl=r("span",null,"Account",-1),ol={class:"account-info"},rl={class:"account-details"},al={class:"username"};function nl(t,e,o,l,a,s){const n=p("user-avatar");return i(),d("section",el,[r("div",tl,[sl,r("span",{onClick:e[0]||(e[0]=S((...c)=>s.close&&s.close(...c),["stop"])),class:"close"},"X")]),r("div",ol,[h(n,{size:32,username:o.user.fullname,src:o.user.imgUrl,backgroundColor:"#DFE1E6",color:"#172b4d"},null,8,["username","src"]),r("div",rl,[r("span",null,_(o.user.fullname),1),r("span",al," ( "+_(o.user.username)+" )",1)])]),r("div",{class:"logout",onClick:e[1]||(e[1]=(...c)=>s.logout&&s.logout(...c))},"Log out")])}var il=k(Xi,[["render",nl]]),ll="/assets/boardAdd.76c3902e.svg";const dl={props:{menuOpen:Boolean},data(){return{boardToAdd:null,boardBg:"#0079bf"}},components:{customMenu:Y},async created(){const t=await this.$store.dispatch({type:"getEmptyBoard"});this.boardToAdd=t},mounted(){},methods:{setBg(t){this.boardBg=t,console.log(t),console.log(this.$refs);for(const e in this.$refs)this.boardBg===e?e.split("")[0]==="#"?this.$refs[e][0].classList.value="bg-opt clr checked":this.$refs[e][0].classList.value="bg-opt checked":e.split("")[0]==="#"?this.$refs[e][0].classList.value="bg-opt clr":this.$refs[e][0].classList.value="bg-opt"},closeMenu(){this.$emit("closeMenu")},getStyle(t){return`background-color: ${t}`},getClass(){this.$refs.title.value?this.$refs.btn.classList.value="enable":this.$refs.btn.classList.value="disable"},async saveBoard(){if(!this.$refs.title.value)return;this.boardToAdd.title=this.$refs.title.value,this.boardToAdd.style.bg=this.boardBg;const t=this.$store.getters.loggedinUser;this.boardToAdd.createdBy={_id:t._id,fullname:t.fullname,imgUrl:"http://some-img"},delete this.boardToAdd.style.bgImg;const e=await this.$store.dispatch({type:"saveCurrBoard",boardToSave:this.boardToAdd});this.boardToAdd=await this.$store.dispatch({type:"getEmptyBoard"}),this.$router.push(`/board/${e._id}`)}},computed:{getBg(){if(this.boardBg)return this.boardBg.split("")[0]==="#"?`background-color: ${this.boardBg}`:`background-image: url(${this.boardBg})`}}},cl={class:"board-add-menu"},ul=r("p",null,"Create board",-1),hl=r("hr",null,null,-1),ml={class:"board-add-container flex align-center column"},pl=r("img",{class:"board-image",src:ll,alt:""},null,-1),gl=[pl],kl={class:"bg-selector"},bl=r("p",null,"Background",-1),_l={class:"btn-bg-container flex wrap"},fl=["onClick","idx"],yl=["src"],vl=r("p",null,[E("Board title "),r("span",null,"*")],-1),Cl=r("div",{class:"emoticon"},"\u{1F44B} Board title is required",-1);function Tl(t,e,o,l,a,s){const n=p("custom-menu"),c=N("focus");return i(),d("section",cl,[h(n,{menuOpen:o.menuOpen},{default:f(()=>[ul,r("button",{onClick:e[0]||(e[0]=(...u)=>s.closeMenu&&s.closeMenu(...u)),class:"close",title:"Close"}),hl,r("section",ml,[r("div",{style:y(s.getBg),class:"board-image-container flex center align-center"},gl,4),r("div",kl,[bl,r("div",_l,[(i(!0),d(v,null,C(a.boardToAdd.style.bgImg,(u,b)=>(i(),d("label",{key:b,onClick:S(D=>s.setBg(u),["stop"]),idx:b},[u.split("")[0]!=="#"?(i(),d("img",{key:0,class:"bg-opt",src:u,alt:"",ref_for:!0,ref:u},null,8,yl)):m("",!0),u.split("")[0]=="#"?(i(),d("div",{key:1,style:y(s.getStyle(u)),class:"bg-opt clr",ref_for:!0,ref:u},null,4)):m("",!0)],8,fl))),128)),vl,r("form",{action:"submit",onSubmit:e[4]||(e[4]=S(()=>{},["prevent"]))},[T(r("input",{required:"",ref:"title",onFocus:e[1]||(e[1]=(...u)=>s.getClass&&s.getClass(...u)),onInput:e[2]||(e[2]=(...u)=>s.getClass&&s.getClass(...u)),placeholder:"   ",type:"text"},null,544),[[c]]),Cl,r("button",{ref:"btn",type:"submit",onClick:e[3]||(e[3]=(...u)=>s.saveBoard&&s.saveBoard(...u))},"Create",512)],32)])])])]),_:1},8,["menuOpen"])])}var le=k(dl,[["render",Tl]]),Sl="/assets/boards.b440fffa.png",El="data:image/gif;base64,R0lGODlhOAFAAHAAACH5BAEAAAIALAAAAAA4AUAAgQAAAP///wAAAAAAAAL/lB+py+0P3Zm02ouz3rz7D2KR0o1BiKaIybbuqcbyTNceW472Pr3+L+EJh8QijmMq0oDMpvIJjSKT04gU1cwCr9yu8riheqvasljY4rnGKbDmzBaZ51a0r/aLf9wZuL5CFxi0szVT+Bfmd6GIaCD4SEJ4GDPZuMgIqGOZCSmoxmSYtymnmVg3utIZ+FkZAopqwUcKAZuqOscqqvJa24NJ8fsXbNuQc4rntNtaK3t5jFpKtrD3HMrret0r0BwbDV3dNyhdLJlNvQzLzUnb6/0mbvqQix5/p00sP07ODD47fdNPWTIQWYZEWjLMkTtkCQTmM8bg3EOG5vStsbYQYMZ1/xNlXLR40KJEeBgrvjMJ8SPBhNs2arR3smPMfyn3UUTpTAJLjrpesqtHciQ9hT9F+rSJsKDQaTt9aVnp0mlRqE/9IZ0ZEmjEcrR26mhK1MzRoN0CYq3Kc2vNhmNp3tQZVSpcs2XprL2aUyZIpcDo9sVrVe3bYl7ZNe20N2tgwXfF/tW7eKnbpIbjtqzsF59drYDTMuaM6zHZvIrDTS0ZJKEmlrdgmM58+fRrxHI71518FrfH1ZZPqX6hWbZoyJ51L/YUvHTktsodPgxW6je3NLOJD7d9HVLtz9XZNvY+WC1033GpHzeeHH129euDAg87+nZz+dwpRY96bJi67fXTz6rnz55/6n1kWXCS/YdNfhtFM16B++0HIILwCRfhVgVOCB5oGaJmEybPNAjbg6w5OCIVF8bWX3sb7qZgQB/id6GIJGZmnoaRnNjaPPAo4s0vEFa4ooCu5RYgitYV9w+Ot+iIFI+n+aikSz9imKKQVOUTJW02wCFLNVDCZmR8YWInYGJDfkdCltpxJROXXko5I4xxHkllkSo2pOYjTH7mpl5fZtQTfWTWKSFYY/9GlCdyWy50Bjh/5kiknfoZikOiq7Dp3n2yPbpkpBIeiuCUd55g6WaLOqopWZxq2d2goAYJ5Jlmkgrmq2XsaZyJwq2qqI2w3umrrMG+emBop+76VT+8mjormsIi+Stpc9EZK1/h5ZosccuiVeyn0lF4Xpq1Qnqstla4COeL1HoabZm+JnjuuJ2WO5q1wIb7rEElgmtltzDsyypl5g617accuvotv6MS2hpM186HU8HtPuxtb6La+m/DjtFrW8Ry1urcugCLfITGG1OcL8bYgQgyFiOLyXCoYJh8K6YrOywoeyqtFGzKQvqscsoE0mzvwTrjDC3Q76XUM3qBVrvi0kS2F82iwkvj2zSffqHz9M81xzy1wlfCfLW0VYLNrdmAIg21tWHj5PLWO+dcKLn4qsq21wOh/fbZYw9aI9azUp10Z3nr/XTfXdtH45SFBaw2hYcjXnbQik/s7+Bm+rt3q+BWTnfnlIdtR4hzwjzqUG0LPXfk9FweuMCo2+osvMyye/TFxt6tuL7yzk573LtrjjvQqYvNN833LE9r2sxJeuLoy09PvbN+j9WGq64bXH333n//BOYWFAAAOw==";const Bl={data(){return{boardMenuOpen:!1,user:null,bg:""}},components:{userAvatar:G,boardCompose:Ui,boardList:Qi,userMenu:il,boardAddMenu:le,BoardAddMenu:le},created(){this.user=this.$store.getters.loggedinUser},methods:{toggleBoardCompose(){this.isBoardComposeOn=!this.isBoardComposeOn},toggleBoardList(){this.isBoardListOpen=!this.isBoardListOpen},hideBoardList(){this.isBoardListOpen=!1},hideUserMenu(){this.isUserMenuOpen=!1},addBoard(t){this.$emit("addBoard",t),this.isBoardComposeOn=!1},setBackground(t){this.$emit("setBackground",t)},async logout(){await this.$store.dispatch({type:"logout"});const t={"background-color":"whitesmoke"};this.setBackground(t),this.$router.push("/")}},computed:{boards(){return this.$store.getters.boards},getClr(){}},watch:{"$route.params"(t){t.boardId?this.bg="#00000040":this.bg="#026AA7"}}},Ml=r("button",{class:"btn-boards",title:"Boards"},[r("img",{src:Sl,alt:""})],-1),wl=r("button",{title:"Mello",class:"btn-logo"},[r("img",{src:El,alt:""})],-1),Ol=r("button",{class:"btn-opt",title:"Recent"},[E("Recent "),r("img",{class:"img-arrow",src:ue,alt:""})],-1);function xl(t,e,o,l,a,s){const n=p("router-link"),c=p("board-add-menu"),u=p("user-avatar");return i(),d("section",{style:y({"background-color":`${a.bg}`}),class:"main-header"},[h(n,{to:"/board"},{default:f(()=>[Ml]),_:1}),h(n,{to:"/"},{default:f(()=>[wl]),_:1}),Ol,r("button",{onClick:e[0]||(e[0]=b=>a.boardMenuOpen=!a.boardMenuOpen),class:"btn-opt create",title:"Create"},"Create"),h(c,{onCloseMenu:e[1]||(e[1]=b=>a.boardMenuOpen=!1),menuOpen:a.boardMenuOpen},null,8,["menuOpen"]),h(u,{diameter:32,user:a.user},null,8,["user"])],4)}var Al=k(Bl,[["render",xl]]);const $l={name:"app-vue",computed:{editModalStatus(){return this.$store.getters.editModalStatus}},components:{mainHeader:Al}};function Dl(t,e,o,l,a,s){const n=p("main-header"),c=p("router-view");return i(),d("section",null,[h(n),h(c)])}var Il=k($l,[["render",Dl]]);const Ll={state:{loggedinUser:A.getLoggedinUser(),users:[],watchedUser:null},getters:{users({users:t}){return JSON.parse(JSON.stringify(t))},loggedinUser({loggedinUser:t}){return t},getMyMiniUser(t){const e=JSON.parse(JSON.stringify(t.loggedinUser));return delete e.email,delete e.mentions,e},watchedUser({watchedUser:t}){return t}},mutations:{setLoggedinUser(t,{user:e}){t.loggedinUser=e?re({},e):null},setWatchedUser(t,{user:e}){t.watchedUser=e},setUsers(t,{users:e}){t.users=e},removeUser(t,{userId:e}){t.users=t.users.filter(o=>o._id!==e)},setUserScore(t,{score:e}){t.loggedinUser.score=e},updateUser(t,{user:e}){const o=t.users.findIndex(l=>l._id===e._id);t.users.splice(o,1,e)}},actions:{async login({commit:t},{userCred:e}){try{const o=await A.login(e);return t({type:"setLoggedinUser",user:o}),o}catch(o){throw console.log("userStore: Error in login",o),o}},async signup({commit:t},{userCred:e}){try{const o=await A.signup(e);return t({type:"setLoggedinUser",user:o}),o}catch(o){throw console.log("userStore: Error in signup",o),o}},async logout({commit:t}){try{await A.logout(),t({type:"setLoggedinUser",user:null})}catch(e){throw console.log("userStore: Error in logout",e),e}},async loadUsers({commit:t}){try{const e=await A.getUsers();t({type:"setUsers",users:e})}catch(e){throw console.log("userStore: Error in loadUsers",e),e}},async loadAndWatchUser({commit:t},{userId:e}){try{const o=await A.getById(e);t({type:"setWatchedUser",user:o}),L.emit(di,e),L.off(ie),L.on(ie,l=>{t({type:"setWatchedUser",user:l})})}catch(o){throw console.log("userStore: Error in loadAndWatchUser",o),o}},async removeUser({commit:t},{userId:e}){try{await A.remove(e),t({type:"removeUser",userId:e})}catch(o){throw console.log("userStore: Error in removeUser",o),o}},async updateUser({commit:t},{user:e}){try{e=await A.update(e),t({type:"setUser",user:e})}catch(o){throw console.log("userStore: Error in updateUser",o),o}},async increaseScore({commit:t}){try{const e=await A.changeScore(100);t({type:"setUserScore",score:e})}catch(e){throw console.log("userStore: Error in increaseScore",e),e}},async signup({commit:t},{userCred:e}){try{const o=await A.signup(e);return t({type:"setLoggedinUser",user:o}),o}catch(o){throw console.log("userStore: Error in signup",o),o}},async signupAsGuest({commit:t,dispatch:e}){try{const o=await A.signupAsGuest();await e({type:"loadAndWatchUser",userId:o._id}),t({type:"setLoggedinUser",user:o})}catch(o){throw console.log("userStore: Error in signup As Guest",o),o}},async getMiniUser(t,{userId:e}){try{return await A.getMiniUser(e)}catch(o){throw console.log("userStore: Error in getById user",o),o}}}},Ul={state:{boards:[],currBoard:null,recentBoards:[],currTaskIdxs:null},getters:{boards(t){return JSON.parse(JSON.stringify(t.boards))},starBoards(t){return JSON.parse(JSON.stringify(t.boards.filter(e=>e.star)))},currBoard(t){return JSON.parse(JSON.stringify(t.currBoard))},currBoardLabels(t){return t.currBoard.labels},currBoardMembers(t){return t.currBoard.members},currBoardChecklists(t){const e=[];return t.currBoard.groups.forEach(o=>{o.tasks.forEach(l=>{!l.checklists||!l.checklists.length||e.push({taskId:l.id,taskTitle:l.title,checklists:l.checklists})})}),e},getCurrTask({currTaskIdxs:t,currBoard:e}){if(!t)return null;const{groupIdx:o,currTaskIdx:l}=t,a=e.groups[o].tasks[l];return JSON.parse(JSON.stringify(a))},recentBoards({recentBoards:t}){return t},cardEdit({cardEdit:t}){return t},boardsToShow(t){let e=new RegExp(t.filterBy.txt,"i");return t.boards.filter(o=>e.test(o.title))}},mutations:{setCurrTask(t,{currTaskIdx:e,groupIdx:o}){t.currTaskIdxs={currTaskIdx:e,groupIdx:o}},setCurrBoard(t,{currBoard:e}){t.currBoard=e},addBoardToRecentBoards(t,{board:e}){t.recentBoards.length>=5&&t.recentBoards.pop(),t.recentBoards=t.recentBoards.filter(o=>o._id!==e._id),t.recentBoards.unshift(e)},addBoard(t,{savedBoard:e}){t.boards.push(e)},loadBoards(t,{boards:e}){console.log(e),t.boards=e}},actions:{async loadCurrBoard(t,{boardId:e}){try{const o=await U.getById(e);return t.commit({type:"setCurrBoard",currBoard:o}),L.emit("watch board",o._id),L.off(ne),L.on(ne,l=>{console.log("board updated",l),t.commit({type:"setCurrBoard",currBoard:l})}),JSON.parse(JSON.stringify(o))}catch(o){console.error("Cannot load currBoard: ",o),t.dispatch({type:"flashUserMsg",msg:"Oops! Cannot load selected board...",style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async saveCurrBoard(t,{boardToSave:e}){const o=t.getters.currBoard;try{t.commit({type:"setCurrBoard",currBoard:e});const l=await U.save(e);return L.emit("board update",e),t.dispatch({type:"flashUserMsg",msg:`Board ${l._id} saved successfully`,style:"success"}),l}catch(l){t.commit({type:"setCurrBoard",currBoard:o}),console.error(`Cannot save board ${t.getters.currBoard._id}: `,l),t.dispatch({type:"flashUserMsg",msg:`Oops! Cannot save board ${t.getters.currBoard._id}...`,style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async updateGroup(t,{groupToSave:e}){console.log(e),t.commit({type:"setIsLoading",loadingStatus:!0});try{const o=t.getters.currBoard;if(e.id){const a=o.groups.findIndex(s=>s.id===e.id);o.groups.splice(a,1,e)}else e.id=w.makeId(),o.groups.push(e);const l=await t.dispatch({type:"saveCurrBoard",boardToSave:o});return L.emit("board update",o),l}catch(o){console.error(`Cannot save group ${t.getters.currBoard._Id}: `,o),t.dispatch({type:"flashUserMsg",msg:`Oops! Cannot save board ${t.getters.currBoard._id}...`,style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async copyGroup(t,{groupToSave:e}){t.commit({type:"setIsLoading",loadingStatus:!0});try{e.id=w.makeId();const o=t.getters.currBoard;return o.groups.push(e),await t.dispatch({type:"saveCurrBoard",boardToSave:o})}catch(o){console.error(`Cannot save group ${t.getters.currBoard._Id}: `,o),t.dispatch({type:"flashUserMsg",msg:`Oops! Cannot save board ${t.getters.currBoard._Id}...`,style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async getEmptyBoard(t){t.commit({type:"setIsLoading",loadingStatus:!0});try{return U.getEmptyBoard()}catch{console.error("Cannot get empty board: ",err),t.dispatch({type:"flashUserMsg",msg:"Oops! Cannot initiate a new board...",style:"warning"})}finally{t.commit({type:"setIsLoading",loadingStatus:!1})}},async loadCurrTask({commit:t,getters:e},{groupId:o,taskId:l}){const a=e.currBoard,s=a.groups.findIndex(c=>c.id===o),n=a.groups[s].tasks.findIndex(c=>c.id===l);t({type:"setCurrTask",groupIdx:s,currTaskIdx:n})},async getTaskById({getters:t},{groupId:e,taskId:o}){return t.currBoard.groups.find(n=>n.id===e).tasks.find(n=>n.id===o)},async saveTask(t,{groupId:e,taskToSave:o}){const l=t.getters.currBoard,a=l.groups.find(s=>s.id===e);if(o.id){const s=a.tasks.findIndex(n=>n.id===o.id);a.tasks[s]=o}else{debugger;o.id=w.makeId(),o.createdAt=Date.now(),console.log(a),a.tasks.push(o),console.log(a)}return t.dispatch({type:"saveCurrBoard",boardToSave:l})},async removeTask(t,{groupId:e,taskId:o}){const l=t.getters.currBoard,a=l.groups.find(n=>n.id===e),s=a.tasks.findIndex(n=>n.id===o);return a.tasks.splice(s,1),await t.dispatch({type:"saveCurrBoard",boardToSave:l})},async removeGroup(t,{group:e}){const o=t.getters.currBoard,l=o.groups.findIndex(s=>s.id===e.id);return o.groups.splice(l,1),await t.dispatch({type:"saveCurrBoard",boardToSave:o})},async getBoardById(t,{boardId:e}){try{return await U.getById(e)}catch(o){throw console.log("Cannot get board",e,",",o),o}},async loadBoards({commit:t}){try{const e=await U.query();return t({type:"loadBoards",boards:e}),console.log(e),e}catch(e){throw console.log("Cannot load boards",e),e}},async updateLabel(t,{label:e}){const o=t.getters.currBoard,l=o.labels.findIndex(a=>a.id===e.id);return o.labels[l]=e,await t.dispatch({type:"saveCurrBoard",boardToSave:o})}}},Nl=Me({strict:!0,state:{editModalStatus:{isOpen:!1,editType:"",currTask:null,parentGroupId:""},isLoading:!1,userMsg:{msg:"",style:"",isAlive:!1}},getters:{editModalStatus(t){return JSON.parse(JSON.stringify(t.editModalStatus))},isLoading(t){return JSON.parse(JSON.stringify(t.isLoading))},userMsg(t){return t.userMsg}},mutations:{toggleEditModal(t,{isOpen:e,editType:o,currTask:l,parentGroupId:a}){t.editModalStatus={isOpen:e,editType:o,currTask:l,parentGroupId:a}},setIsLoading(t,{loadingStatus:e}){t.isLoading=e},setUserMsg(t,{msg:e,style:o,isAlive:l}){t.userMsg={msg:e,style:o,isAlive:l}},setMsg(t,{msg:e}){t.userMsg=e}},actions:{flashUserMsg(t,{msg:e,style:o}){t.commit({type:"setUserMsg",msg:e,style:o,isAlive:!0}),setTimeout(()=>{t.commit({type:"setUserMsg",msg:"",style:"",isAlive:!1})},2e3)},async showMsg({state:t,commit:e},{msg:o}){try{t.setTimeId&&clearTimeout(t.setTimeId),e({type:"setMsg",msg:o}),o={txt:"",type:""},t.setTimeId=setTimeout(()=>{e({type:"setMsg",msg:o}),clearTimeout(t.setTimeId)},2500)}catch(l){console.log("ERROR: cannot get userMsg",l)}}},modules:{userStore:Ll,boardStore:Ul}}),Gl={mounted:t=>{t.focus()}},Jl={mounted:(t,e,o)=>{t.clickOutsideEvent=function(a){const s=t.getBoundingClientRect();(a.clientX<s.x||a.clientX>s.x+s.width||a.clientY<s.y||a.clientY>s.y+s.height)&&!(t==a.target||t.contains(a.target))&&(console.log("clicked outside!",t),e.value(a))};const l=function(){document.body.removeEventListener("click",l),document.body.removeEventListener("touchstart",l),document.body.addEventListener("click",t.clickOutsideEvent),document.body.addEventListener("touchstart",t.clickOutsideEvent)};document.body.addEventListener("click",l),document.body.addEventListener("touchstart",l)},unmounted:function(t){document.body.removeEventListener("click",t.clickOutsideEvent),document.body.removeEventListener("touchstart",t.clickOutsideEvent)},stopProp(t){t.stopPropagation()}};const J=we(Il);J.config.globalProperties.$filters={};J.directive("focus",Gl);J.directive("clickoutside",Jl);J.use(me);J.use(Nl);J.use(Oe);J.mount("#app");
